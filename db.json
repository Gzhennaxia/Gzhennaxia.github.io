{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/next/source/css/main.styl","path":"css/main.styl","modified":0,"renderable":1},{"_id":"themes/next/source/images/algolia_logo.svg","path":"images/algolia_logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/apple-touch-icon-next.png","path":"images/apple-touch-icon-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.gif","path":"images/avatar.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","path":"images/cc-by-nc-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","path":"images/cc-by-nc-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nc.svg","path":"images/cc-by-nc.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-nd.svg","path":"images/cc-by-nd.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by-sa.svg","path":"images/cc-by-sa.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-by.svg","path":"images/cc-by.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/cc-zero.svg","path":"images/cc-zero.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-16x16-next.png","path":"images/favicon-16x16-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/favicon-32x32-next.png","path":"images/favicon-32x32-next.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/loading.gif","path":"images/loading.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/logo.svg","path":"images/logo.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/placeholder.gif","path":"images/placeholder.gif","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-l.svg","path":"images/quote-l.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/quote-r.svg","path":"images/quote-r.svg","modified":0,"renderable":1},{"_id":"themes/next/source/images/searchicon.png","path":"images/searchicon.png","modified":0,"renderable":1},{"_id":"themes/next/source/images/avatar.jpg","path":"images/avatar.jpg","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/affix.js","path":"js/src/affix.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/algolia-search.js","path":"js/src/algolia-search.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/bootstrap.js","path":"js/src/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/clipboard-use.js","path":"js/src/clipboard-use.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/clipboard.min.js","path":"js/src/clipboard.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/exturl.js","path":"js/src/exturl.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/js.cookie.js","path":"js/src/js.cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/motion.js","path":"js/src/motion.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/post-details.js","path":"js/src/post-details.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scroll-cookie.js","path":"js/src/scroll-cookie.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/scrollspy.js","path":"js/src/scrollspy.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","path":"lib/font-awesome/HELP-US-OUT.txt","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/bower.json","path":"lib/font-awesome/bower.json","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/utils.js","path":"js/src/utils.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/LICENSE","path":"lib/pace/LICENSE","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/README.md","path":"lib/pace/README.md","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","path":"lib/pace/pace-theme-barber-shop.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","path":"lib/pace/pace-theme-big-counter.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","path":"lib/pace/pace-theme-bounce.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","path":"lib/pace/pace-theme-center-atom.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","path":"lib/pace/pace-theme-center-circle.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","path":"lib/pace/pace-theme-center-radar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","path":"lib/pace/pace-theme-center-simple.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","path":"lib/pace/pace-theme-corner-indicator.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","path":"lib/pace/pace-theme-fill-left.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","path":"lib/pace/pace-theme-flash.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","path":"lib/pace/pace-theme-loading-bar.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","path":"lib/pace/pace-theme-mac-osx.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","path":"lib/pace/pace-theme-minimal.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/pace/pace.min.js","path":"lib/pace/pace.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.min.js","path":"lib/velocity/velocity.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","path":"lib/velocity/velocity.ui.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","path":"lib/velocity/velocity.ui.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/jquery/index.js","path":"lib/jquery/index.js","modified":0,"renderable":1},{"_id":"themes/next/source/js/src/schemes/pisces.js","path":"js/src/schemes/pisces.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","path":"lib/font-awesome/css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","path":"lib/font-awesome/css/font-awesome.css.map","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","path":"lib/font-awesome/css/font-awesome.min.css","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","path":"lib/ua-parser-js/dist/ua-parser.min.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","path":"lib/ua-parser-js/dist/ua-parser.pack.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","path":"lib/font-awesome/fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/next/source/lib/velocity/velocity.js","path":"lib/velocity/velocity.js","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","path":"lib/font-awesome/fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","path":"lib/font-awesome/fonts/fontawesome-webfont.eot","modified":0,"renderable":1}],"Cache":[{"_id":"themes/next/.all-contributorsrc","hash":"e32dc4075e304af04b98d0726d489081bea722c0","modified":1543657769000},{"_id":"themes/next/.bowerrc","hash":"3228a58ed0ece9f85e1e3136352094080b8dece1","modified":1543657769000},{"_id":"themes/next/.editorconfig","hash":"792fd2bd8174ece1a75d5fd24ab16594886f3a7f","modified":1543657769000},{"_id":"themes/next/.eslintrc.json","hash":"cc5f297f0322672fe3f684f823bc4659e4a54c41","modified":1543657769000},{"_id":"themes/next/.gitattributes","hash":"44bd4729c74ccb88110804f41746fec07bf487d4","modified":1543657769000},{"_id":"themes/next/.gitignore","hash":"a18c2e83bb20991b899b58e6aeadcb87dd8aa16e","modified":1543657769000},{"_id":"themes/next/.stylintrc","hash":"b28e24704a5d8de08346c45286574c8e76cc109f","modified":1543657769000},{"_id":"themes/next/.travis.yml","hash":"3d1dc928c4a97933e64379cfde749dedf62f252c","modified":1543657769000},{"_id":"themes/next/LICENSE.md","hash":"fc7227c508af3351120181cbf2f9b99dc41f063e","modified":1543657769000},{"_id":"themes/next/README.md","hash":"ee7119baf976616a84d3c9c10fcab567995dc98e","modified":1543657769000},{"_id":"themes/next/_config.yml","hash":"a8290003e5ee55ff1621a03dc2b4a28e2b405d1e","modified":1543657769000},{"_id":"themes/next/bower.json","hash":"1c22c2003163799cb919f8e9dc1e3d20bd79151d","modified":1543657769000},{"_id":"themes/next/crowdin.yml","hash":"e026078448c77dcdd9ef50256bb6635a8f83dca6","modified":1543657769000},{"_id":"themes/next/gulpfile.coffee","hash":"48d2f9fa88a4210308fc41cc7d3f6d53989f71b7","modified":1543657769000},{"_id":"themes/next/package.json","hash":"f86ddeeddc0b5c6aff7de1e0101b1f64e7f29476","modified":1543657769000},{"_id":"source/_data/next.yml","hash":"fda15412f76b800008081c5d96fb84736cf3601e","modified":1545567459742},{"_id":"source/_posts/Comments.md","hash":"4573b33eb55911ca30293cd1d8ead6f4062c6711","modified":1546485656868},{"_id":"source/_posts/Git.md","hash":"17588abe0d77af35ebea5e71f7086e2fdabff103","modified":1546486427430},{"_id":"source/_posts/GitHub Pages+Hexo+NexT.md","hash":"358dc1d5d4e0de077bbc19abe85ca95ce22b5836","modified":1545752235838},{"_id":"source/_posts/How-to-Down-Up-a-Plan.md","hash":"3e610b3c44f3b76766fc19d8c5dab01cad2aa2a2","modified":1546388648046},{"_id":"source/_posts/Redis学习笔记.md","hash":"2b5c96f60b8845cd239c991f2f86e9a52682183e","modified":1546388559405},{"_id":"source/_posts/Software and Tools.md","hash":"dac9166a6f112374cf7aca19317dac42822297b3","modified":1546474790665},{"_id":"source/_posts/Windows.md","hash":"d41424402682a7dc0762f86acd022a0d4f85fac7","modified":1546473369660},{"_id":"source/_posts/hello-world.md","hash":"029f91fccbe8f87c0f3ea10c4042300d2fa7edc0","modified":1545485624399},{"_id":"source/categories/index.md","hash":"f9f56a2bb80adec2fd3f364bf725120ec5f62d5b","modified":1545544977569},{"_id":"source/tags/index.md","hash":"394211abbc193cc15dd8eda85f2ab141dbbc7d0b","modified":1545544540490},{"_id":"themes/next/.github/CODE_OF_CONDUCT.md","hash":"b63696d41f022525e40d7e7870c3785b6bc7536b","modified":1543657769000},{"_id":"themes/next/.github/CONTRIBUTING.md","hash":"a5335a99377069ae76fd993d488bc3eaf48f3a05","modified":1543657769000},{"_id":"themes/next/.github/ISSUE_TEMPLATE.md","hash":"00c25366764e6b9ccb40b877c60dc13b2916bbf7","modified":1543657769000},{"_id":"themes/next/.github/PULL_REQUEST_TEMPLATE.md","hash":"7abbb4c8a29b2c14e576a00f53dbc0b4f5669c13","modified":1543657769000},{"_id":"themes/next/.github/browserstack_logo.png","hash":"a6c43887f64a7f48a2814e3714eaa1215e542037","modified":1543657769000},{"_id":"themes/next/.github/stale.yml","hash":"fd0856f6745db8bd0228079ccb92a662830cc4fb","modified":1543657769000},{"_id":"themes/next/docs/AGPL3.md","hash":"0d2b8c5fa8a614723be0767cc3bca39c49578036","modified":1543657769000},{"_id":"themes/next/docs/ALGOLIA-SEARCH.md","hash":"141e989844d0b5ae2e09fb162a280715afb39b0d","modified":1543657769000},{"_id":"themes/next/docs/AUTHORS.md","hash":"7b24be2891167bdedb9284a682c2344ec63e50b5","modified":1543657769000},{"_id":"themes/next/docs/DATA-FILES.md","hash":"8e1962dd3e1b700169b3ae5bba43992f100651ce","modified":1543657769000},{"_id":"themes/next/docs/INSTALLATION.md","hash":"2bbdd6c1751b2b42ce9b9335da420c6026a483e9","modified":1543657769000},{"_id":"themes/next/docs/LEANCLOUD-COUNTER-SECURITY.md","hash":"120750c03ec30ccaa470b113bbe39f3d423c67f0","modified":1543657769000},{"_id":"themes/next/docs/LICENSE","hash":"fe607fe22fc9308f6434b892a7f2d2c5514b8f0d","modified":1543657769000},{"_id":"themes/next/docs/MATH.md","hash":"e6023505dcccaef0b856102543585a13fc6af0b1","modified":1543657769000},{"_id":"themes/next/docs/UPDATE-FROM-5.1.X.md","hash":"ad57c168d12ba01cf144a1ea0627b2ffd1847d3e","modified":1543657769000},{"_id":"themes/next/languages/de.yml","hash":"fb478c5040a4e58a4c1ad5fb52a91e5983d65a3a","modified":1543657769000},{"_id":"themes/next/languages/en.yml","hash":"c540c3a0d7db2d4239293c8783881962640b6c34","modified":1543657769000},{"_id":"themes/next/languages/fr.yml","hash":"0162a85ae4175e66882a9ead1249fedb89200467","modified":1543657769000},{"_id":"themes/next/languages/id.yml","hash":"e7fb582e117a0785036dcdbb853a6551263d6aa6","modified":1543657769000},{"_id":"themes/next/languages/it.yml","hash":"62ef41d0a9a3816939cb4d93a524e6930ab9c517","modified":1543657769000},{"_id":"themes/next/languages/ja.yml","hash":"e331b15b1fda0f2285d25853f834682ab8dc3c39","modified":1543657769000},{"_id":"themes/next/languages/ko.yml","hash":"fae155018ae0efdf68669b2c7dd3f959c2e45cc9","modified":1543657769000},{"_id":"themes/next/languages/nl.yml","hash":"bb9ce8adfa5ee94bc6b5fac6ad24ba4605d180d3","modified":1543657769000},{"_id":"themes/next/languages/pt-BR.yml","hash":"bfc80c8a363fa2e8dde38ea2bc85cd19e15ab653","modified":1543657769000},{"_id":"themes/next/languages/pt.yml","hash":"3cb51937d13ff12fcce747f972ccb664840a9ef3","modified":1543657769000},{"_id":"themes/next/languages/ru.yml","hash":"db0644e738d2306ac38567aa183ca3e859a3980f","modified":1543657769000},{"_id":"themes/next/languages/tr.yml","hash":"c5f0c20743b1dd52ccb256050b1397d023e6bcd9","modified":1543657769000},{"_id":"themes/next/languages/vi.yml","hash":"8da921dd8335dd676efce31bf75fdd4af7ce6448","modified":1543657769000},{"_id":"themes/next/languages/zh-CN.yml","hash":"fbbf3a0b664ae8e927c700b0a813692b94345156","modified":1543657769000},{"_id":"themes/next/languages/zh-HK.yml","hash":"7903b96912c605e630fb695534012501b2fad805","modified":1543657769000},{"_id":"themes/next/languages/zh-TW.yml","hash":"6e6d2cd8f4244cb1b349b94904cb4770935acefd","modified":1543657769000},{"_id":"themes/next/layout/_layout.swig","hash":"26d73cb0d09201f5f6fc903fdb0a67ff7fe89166","modified":1545550251790},{"_id":"themes/next/layout/archive.swig","hash":"2b6450c6b6d2bcbcd123ad9f59922a5e323d77a5","modified":1543657769000},{"_id":"themes/next/layout/category.swig","hash":"5d955284a42f802a48560b4452c80906a5d1da02","modified":1543657769000},{"_id":"themes/next/layout/index.swig","hash":"c2a3896c64e96790edc10426ef586b6186a87f46","modified":1543657769000},{"_id":"themes/next/layout/page.swig","hash":"862b361852fb6d7a95bfb6077922410a33cd3126","modified":1543657769000},{"_id":"themes/next/layout/post.swig","hash":"318249db246a57e9422875a2457c6acfce974ba5","modified":1543657769000},{"_id":"themes/next/layout/schedule.swig","hash":"3268dd3d90d8b0e142cfa1a2ebb23355baeda148","modified":1543657769000},{"_id":"themes/next/layout/tag.swig","hash":"ba402ce8fd55e80b240e019e8d8c48949b194373","modified":1543657769000},{"_id":"themes/next/scripts/merge-configs.js","hash":"33afe97284d34542015d358a720823feeebef120","modified":1543657769000},{"_id":"themes/next/scripts/merge.js","hash":"9130dabe6a674c54b535f322b17d75fe6081472f","modified":1543657769000},{"_id":"themes/next/test/.jshintrc","hash":"19f93d13d1689fe033c82eb2d5f3ce30b6543cc0","modified":1543657769000},{"_id":"themes/next/test/helpers.js","hash":"a1f5de25154c3724ffc24a91ddc576cdbd60864f","modified":1543657769000},{"_id":"themes/next/test/intern.js","hash":"11fa8a4f5c3b4119a179ae0a2584c8187f907a73","modified":1543657769000},{"_id":"themes/next/source/fonts/.gitkeep","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/docs/ru/DATA-FILES.md","hash":"d6d20f60f77a76c77f8e65d0c9adbd79d0274557","modified":1543657769000},{"_id":"themes/next/docs/ru/INSTALLATION.md","hash":"6c5d69e94961c793da156217ecf1179e868d7ba1","modified":1543657769000},{"_id":"themes/next/docs/ru/README.md","hash":"c54e256ed11a84ee38f755d6f35a3e6e29a91dbc","modified":1543657769000},{"_id":"themes/next/docs/ru/UPDATE-FROM-5.1.X.md","hash":"b1dd18d9b890b21718883ea1832e7e02a773104a","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/ALGOLIA-SEARCH.md","hash":"6855402e2ef59aae307e8bd2a990647d3a605eb8","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/CODE_OF_CONDUCT.md","hash":"a45a791b49954331390d548ac34169d573ea5922","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/CONTRIBUTING.md","hash":"bd2c955d9b7b1b45bd74a4536717d547e03fcde3","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/DATA-FILES.md","hash":"f3eec572a7d83542e2710a7404082014aaa1a5e7","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/INSTALLATION.md","hash":"b19a6e0ae96eb7c756fb5b1ba03934c7f9cbb3c3","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/LEANCLOUD-COUNTER-SECURITY.md","hash":"24cf2618d164440b047bb9396263de83bee5b993","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/MATH.md","hash":"8ac2f5d2a023211d8d8ea626cbf6b8dea67ac201","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/README.md","hash":"aa6808f4f587c1a97205fa9427ba96a366bcb288","modified":1543657769000},{"_id":"themes/next/docs/zh-CN/UPDATE-FROM-5.1.X.md","hash":"5da70d7fa0c988a66a469b9795d33d471a4a4433","modified":1543657769000},{"_id":"themes/next/layout/_custom/head.swig","hash":"9e1b9666efa77f4cf8d8261bcfa445a9ac608e53","modified":1543657769000},{"_id":"themes/next/layout/_custom/header.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1543657769000},{"_id":"themes/next/layout/_custom/sidebar.swig","hash":"adc83b19e793491b1c6ea0fd8b46cd9f32e592fc","modified":1543657769000},{"_id":"themes/next/layout/_macro/passage-end-tag.swig","hash":"83393c940b2d55e2547a97ab0890c356dc53e8f7","modified":1545546676803},{"_id":"themes/next/layout/_macro/post-collapse.swig","hash":"82f9e238bac68dfe592915631d1ff0cca7b9da95","modified":1543657769000},{"_id":"themes/next/layout/_macro/post-related.swig","hash":"08fe30ce8909b920540231e36c97e28cfbce62b6","modified":1543657769000},{"_id":"themes/next/layout/_macro/post.swig","hash":"a55428db69e1b4c728ae88760a6d9f89da60f140","modified":1546485430682},{"_id":"themes/next/layout/_macro/reward.swig","hash":"64d65d9ad0cc94734ac6ded279e2b5dc870a1cab","modified":1543657769000},{"_id":"themes/next/layout/_macro/sidebar.swig","hash":"e495523780dbdf6228d933c25bb28bcf4c0952f5","modified":1543657769000},{"_id":"themes/next/layout/_macro/wechat-subscriber.swig","hash":"a9e1346b83cf99e06bed59a53fc069279751e52a","modified":1543657769000},{"_id":"themes/next/layout/_partials/breadcrumb.swig","hash":"6994d891e064f10607bce23f6e2997db7994010e","modified":1543657769000},{"_id":"themes/next/layout/_partials/comments.swig","hash":"84e89692f94735ae7b0c4331a69b9eb9b6cfc1e8","modified":1545566408041},{"_id":"themes/next/layout/_partials/footer.swig","hash":"07f88421bda86d9d5ff32d130b1cb1196b99a326","modified":1543657769000},{"_id":"themes/next/layout/_partials/page-header.swig","hash":"1aaf32bed57b976c4c1913fd801be34d4838cc72","modified":1543657769000},{"_id":"themes/next/layout/_partials/pagination.swig","hash":"dbe321bcf3cf45917cc11a3e3f50d8572bac2c70","modified":1543657769000},{"_id":"themes/next/layout/_partials/post-copyright.swig","hash":"2f73cc9ffb63534f0b6d8f0e9ee853c1af1b1244","modified":1543657769000},{"_id":"themes/next/layout/_scripts/boostrap.swig","hash":"0a0129e926c27fffc6e7ef87fe370016bc7a4564","modified":1543657769000},{"_id":"themes/next/layout/_scripts/commons.swig","hash":"6fc63d5da49cb6157b8792f39c7305b55a0d1593","modified":1543657769000},{"_id":"themes/next/layout/_scripts/noscript.swig","hash":"ac3ad2c0eccdf16edaa48816d111aaf51200a54b","modified":1543657769000},{"_id":"themes/next/layout/_scripts/vendors.swig","hash":"f380a10c792411eff82204305b097a288ed0b423","modified":1543657769000},{"_id":"themes/next/layout/_third-party/bookmark.swig","hash":"60001c8e08b21bf3a7afaf029839e1455340e95d","modified":1543657769000},{"_id":"themes/next/layout/_third-party/copy-code.swig","hash":"a8ab2035654dd06d94faf11a35750529e922d719","modified":1543657769000},{"_id":"themes/next/layout/_third-party/exturl.swig","hash":"f532ce257fca6108e84b8f35329c53f272c2ce84","modified":1543657769000},{"_id":"themes/next/layout/_third-party/github-banner.swig","hash":"c0f6f02d7d7eb20eb216003c6cfb4ea52060f791","modified":1543657769000},{"_id":"themes/next/layout/_third-party/needsharebutton.swig","hash":"927f19160ae14e7030df306fc7114ba777476282","modified":1543657769000},{"_id":"themes/next/layout/_third-party/pangu.swig","hash":"6b75c5fd76ae7cf0a7b04024510bd5221607eab3","modified":1543657769000},{"_id":"themes/next/layout/_third-party/pdf.swig","hash":"def2736c8c10170712ff36dea220243b0c1858af","modified":1543657769000},{"_id":"themes/next/layout/_third-party/rating.swig","hash":"fc93b1a7e6aed0dddb1f3910142b48d8ab61174e","modified":1543657769000},{"_id":"themes/next/layout/_third-party/schedule.swig","hash":"22369026c87fc23893c35a7f250b42f3bb1b60f1","modified":1543657769000},{"_id":"themes/next/layout/_third-party/scroll-cookie.swig","hash":"b0ca46e0d1ff4c08cb0a3a8c1994f20d0260cef9","modified":1543657769000},{"_id":"themes/next/scripts/helpers/next-url.js","hash":"15582e823d228c0b2288543c1eb460c40afad29b","modified":1543657769000},{"_id":"themes/next/scripts/helpers/engine.js","hash":"60eb1554456d9d0e5afc4a2d16f1580a0aa02da8","modified":1543657769000},{"_id":"themes/next/scripts/tags/button.js","hash":"4b12c376bea894d23cca0f9fcb3d6518b6db279d","modified":1543657769000},{"_id":"themes/next/scripts/tags/center-quote.js","hash":"f13430d9d1c9773b390787c2f046bb1f12a79878","modified":1543657769000},{"_id":"themes/next/scripts/tags/exturl.js","hash":"7ded3e7a78380b32de3e12f156e0978ef5c2890a","modified":1543657769000},{"_id":"themes/next/scripts/tags/full-image.js","hash":"e282bf5a7c70b3d354001e8f66d3bef1a4fbb79e","modified":1543657769000},{"_id":"themes/next/scripts/tags/group-pictures.js","hash":"981e01aaf45a1f0f23ce0796d03134f9e437aaca","modified":1543657769000},{"_id":"themes/next/scripts/tags/include-raw.js","hash":"5db59d56f4f4082382bf1c16722e6c383892b0c5","modified":1543657769000},{"_id":"themes/next/scripts/tags/label.js","hash":"f0ecd3b5773b19a6bd93a819dfe0c49ee418e4de","modified":1543657769000},{"_id":"themes/next/scripts/tags/note.js","hash":"adb945ba93ac487d46b969ca4e59d3681b8f8d1c","modified":1543657769000},{"_id":"themes/next/scripts/tags/tabs.js","hash":"e37761253d68a29593fe9ed2fe403f49b6e971de","modified":1543657769000},{"_id":"themes/next/source/css/main.styl","hash":"c26ca6e7b5bd910b9046d6722c8e00be672890e0","modified":1543657769000},{"_id":"themes/next/source/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1543657769000},{"_id":"themes/next/source/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1543657769000},{"_id":"themes/next/source/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1543657769000},{"_id":"themes/next/source/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1543657769000},{"_id":"themes/next/source/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1543657769000},{"_id":"themes/next/source/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1543657769000},{"_id":"themes/next/source/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1543657769000},{"_id":"themes/next/source/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1543657769000},{"_id":"themes/next/source/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1543657769000},{"_id":"themes/next/source/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1543657769000},{"_id":"themes/next/source/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1543657769000},{"_id":"themes/next/source/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1543657769000},{"_id":"themes/next/source/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1543657769000},{"_id":"themes/next/source/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1543657769000},{"_id":"themes/next/source/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1543657769000},{"_id":"themes/next/source/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1543657769000},{"_id":"themes/next/source/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1543657769000},{"_id":"themes/next/source/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1543657769000},{"_id":"themes/next/layout/_scripts/schemes/mist.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/layout/_scripts/schemes/muse.swig","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/css/_mixins/Mist.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/css/_mixins/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/css/_mixins/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/css/_variables/Muse.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/css/_variables/custom.styl","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1543657769000},{"_id":"themes/next/source/images/avatar.jpg","hash":"cb5fbb6b5fb6231d540b19102b30bd20aa57c535","modified":1545537065240},{"_id":"themes/next/layout/_macro/menu/menu-badge.swig","hash":"65c5e585982dae7ae1542cada71858b4ea1f73d6","modified":1543657769000},{"_id":"themes/next/layout/_macro/menu/menu-item.swig","hash":"495fb08875b2e1e04f9c4f3e9e593cdf5c32cc31","modified":1543657769000},{"_id":"themes/next/layout/_partials/head/external-fonts.swig","hash":"7ce76358411184482bb0934e70037949dd0da8ca","modified":1543657769000},{"_id":"themes/next/layout/_partials/head/head-unique.swig","hash":"a7e376b087ae77f2e2a61ba6af81cde5af693174","modified":1543657769000},{"_id":"themes/next/layout/_partials/head/head.swig","hash":"00bf33b3c557b8f7e9faf49b226ea6ff7df5cda0","modified":1543657769000},{"_id":"themes/next/layout/_partials/header/brand.swig","hash":"fd780171713aada5eb4f4ffed8e714617c8ae6be","modified":1543657769000},{"_id":"themes/next/layout/_partials/header/index.swig","hash":"2082f5077551123e695e8afec471c9c44b436acb","modified":1543657769000},{"_id":"themes/next/layout/_partials/header/menu.swig","hash":"3db735d0cd2d449edf2674310ac1e7c0043cb357","modified":1543657769000},{"_id":"themes/next/layout/_partials/header/sub-menu.swig","hash":"88b4b6051592d26bff59788acb76346ce4e398c2","modified":1543657769000},{"_id":"themes/next/layout/_partials/search/index.swig","hash":"a33b29ccbdc2248aedff23b04e0627f435824406","modified":1543657769000},{"_id":"themes/next/layout/_partials/search/localsearch.swig","hash":"957701729b85fb0c5bfcf2fb99c19d54582f91ed","modified":1543657769000},{"_id":"themes/next/layout/_partials/search/swiftype.swig","hash":"959b7e04a96a5596056e4009b73b6489c117597e","modified":1543657769000},{"_id":"themes/next/layout/_partials/search/tinysou.swig","hash":"eefe2388ff3d424694045eda21346989b123977c","modified":1543657769000},{"_id":"themes/next/layout/_partials/share/add-this.swig","hash":"23e23dc0f76ef3c631f24c65277adf7ea517b383","modified":1543657769000},{"_id":"themes/next/layout/_partials/share/baidushare.swig","hash":"1f1107468aaf03f7d0dcd7eb2b653e2813a675b4","modified":1543657769000},{"_id":"themes/next/layout/_partials/share/duoshuo_share.swig","hash":"89c5a5240ecb223acfe1d12377df5562a943fd5d","modified":1543657769000},{"_id":"themes/next/layout/_scripts/pages/post-details.swig","hash":"cc865af4a3cb6d25a0be171b7fc919ade306bb50","modified":1543657769000},{"_id":"themes/next/layout/_scripts/schemes/gemini.swig","hash":"ea03fe9c98ddcfcc0ecfdbe5a2b622f9cde3b3a1","modified":1543657769000},{"_id":"themes/next/layout/_scripts/schemes/pisces.swig","hash":"ea03fe9c98ddcfcc0ecfdbe5a2b622f9cde3b3a1","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/analytics-with-widget.swig","hash":"98df9d72e37dd071e882f2d5623c9d817815b139","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/application-insights.swig","hash":"60426bf73f8a89ba61fb1be2df3ad5398e32c4ef","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/baidu-analytics.swig","hash":"deda6a814ed48debc694c4e0c466f06c127163d0","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/busuanzi-counter.swig","hash":"07307f1f0e0e9858f2c7143cbdfcb2a9a92149ab","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/cnzz-analytics.swig","hash":"8160b27bee0aa372c7dc7c8476c05bae57f58d0f","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/facebook-sdk.swig","hash":"a234c5cd1f75ca5731e814d0dbb92fdcf9240d1b","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/firestore.swig","hash":"fae69a0e1a1d42f7bb44e594a29857d94594698b","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/google-analytics.swig","hash":"beb53371c035b62e1a2c7bb76c63afbb595fe6e5","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/growingio.swig","hash":"5dbeb640707a9c91357e373b9063a48c8e78f439","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/index.swig","hash":"438c6f5e6665d72f4ea7ee206011d669246f6102","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/lean-analytics.swig","hash":"c28f3f4aa31d7f996d26a97df6cd7ffa9bfd2cec","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/tencent-analytics.swig","hash":"3658414379e0e8a34c45c40feadc3edc8dc55f88","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/tencent-mta.swig","hash":"0ddc94ed4ba0c19627765fdf1abc4d8efbe53d5a","modified":1543657769000},{"_id":"themes/next/layout/_third-party/analytics/vkontakte-api.swig","hash":"c3971fd154d781088e1cc665035f8561a4098f4c","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/changyan.swig","hash":"0e3378f7c39b2b0f69638290873ede6b6b6825c0","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/disqus.swig","hash":"03ef008bc95e8e83232e5464a6c63d6157d33a5e","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/gitalk.swig","hash":"c4adbde0ef775e475146fbeb2be03568e16a1c73","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/gitment.swig","hash":"fe8177e4698df764e470354b6acde8292a3515e0","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/index.swig","hash":"9809d63a4234c5f268ff0b489579149b849728fc","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/livere.swig","hash":"2c74a96dd314e804d801f8773ac1b2e0a970fce3","modified":1543657769000},{"_id":"themes/next/layout/_third-party/comments/valine.swig","hash":"34421679cae6581697cd3ab7c3729eb220e3e3f5","modified":1543657769000},{"_id":"themes/next/layout/_third-party/math/index.swig","hash":"a6fc00ec7f5642aabd66aa1cf51c6acc5b10e012","modified":1543657769000},{"_id":"themes/next/layout/_third-party/math/katex.swig","hash":"97dbc2035bcb5aa7eafb80a4202dc827cce34983","modified":1543657769000},{"_id":"themes/next/layout/_third-party/math/mathjax.swig","hash":"15cae4ebac6e86fe22cf1eb3034be4d5049b410b","modified":1543657769000},{"_id":"themes/next/layout/_third-party/search/index.swig","hash":"c747fb5c6b1f500e8f0c583e44195878b66e4e29","modified":1543657769000},{"_id":"themes/next/layout/_third-party/search/localsearch.swig","hash":"b15e10abe85b4270860a56c970b559baa258b2a8","modified":1543657769000},{"_id":"themes/next/layout/_third-party/search/tinysou.swig","hash":"cb3a5d36dbe1630bab84e03a52733a46df7c219b","modified":1543657769000},{"_id":"themes/next/layout/_third-party/seo/baidu-push.swig","hash":"c057b17f79e8261680fbae8dc4e81317a127c799","modified":1543657769000},{"_id":"themes/next/scripts/filters/after_post_render/exturl.js","hash":"9c9f61b7bfb3349b03b1e61355f20232044b5fd8","modified":1543657769000},{"_id":"themes/next/source/css/_custom/custom.styl","hash":"f9797dc4734e1ecce395e108c59ed4c2257fa7c1","modified":1545549546221},{"_id":"themes/next/source/css/_mixins/Gemini.styl","hash":"2aa5b7166a85a8aa34b17792ae4f58a5a96df6cc","modified":1543657769000},{"_id":"themes/next/source/css/_mixins/Pisces.styl","hash":"2640a54fa63bdd4c547eab7ce2fc1192cf0ccec8","modified":1543657769000},{"_id":"themes/next/source/css/_mixins/base.styl","hash":"086f5979b3de091c3378512e6c5c2f8fcb4f6298","modified":1543657769000},{"_id":"themes/next/source/css/_variables/Gemini.styl","hash":"e1f6f59ad6e562dfe640ee4ed5d1ac9b6aba4114","modified":1543657769000},{"_id":"themes/next/source/css/_variables/Mist.styl","hash":"be087dcc060e8179f7e7f60ab4feb65817bd3d9f","modified":1543657769000},{"_id":"themes/next/source/css/_variables/Pisces.styl","hash":"c167eeb6b736f7b021fba98c38c2c21032ee1255","modified":1543657769000},{"_id":"themes/next/source/css/_variables/base.styl","hash":"f9b83d0385529e52ce7ba95ed5ed6b3d4e2419bb","modified":1543657769000},{"_id":"themes/next/source/js/src/affix.js","hash":"a2aab233d99297435a5274bf512c3c753fe08e80","modified":1543657769000},{"_id":"themes/next/source/js/src/algolia-search.js","hash":"1f7f10c579e7703d0f6acb8b73f3d78a07d0c623","modified":1543657769000},{"_id":"themes/next/source/js/src/bootstrap.js","hash":"1c41508b83cb0c4512e64b4d63afa1be954ce8ef","modified":1543657769000},{"_id":"themes/next/source/js/src/clipboard-use.js","hash":"58121dfdf82b66277454872635567d25ff8b1bca","modified":1545549501641},{"_id":"themes/next/source/js/src/clipboard.min.js","hash":"ee60ca5ba9401456105ef703a98092369b579c80","modified":1545550986744},{"_id":"themes/next/source/js/src/exturl.js","hash":"54825acc8de4793feac415be227b965428f4e97d","modified":1543657769000},{"_id":"themes/next/source/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1543657769000},{"_id":"themes/next/source/js/src/motion.js","hash":"b45d2c0d48f2c8e6a0621b8063845f76b89476cc","modified":1543657769000},{"_id":"themes/next/source/js/src/post-details.js","hash":"0dde5e6d4547587662a3256317a9d5d1db507692","modified":1543657769000},{"_id":"themes/next/source/js/src/scroll-cookie.js","hash":"d07b3776708d4ae79ed2037c4c7391d5c9b06b19","modified":1543657769000},{"_id":"themes/next/source/js/src/scrollspy.js","hash":"fa3c92968bcdbcb8d95a1729f7659d9753cbd077","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/.bower.json","hash":"a2aaaf12378db56bd10596ba3daae30950eac051","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/.gitignore","hash":"69d152fa46b517141ec3b1114dd6134724494d83","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/.npmignore","hash":"dcf470ab3a358103bb896a539cc03caeda10fa8b","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/bower.json","hash":"279a8a718ab6c930a67c41237f0aac166c1b9440","modified":1543657769000},{"_id":"themes/next/source/js/src/utils.js","hash":"28a79d317b7f4012917a54cac770551596bf6241","modified":1543657769000},{"_id":"themes/next/source/lib/pace/LICENSE","hash":"336611e76f0638d3d8aeca6b1b97138d2a07523f","modified":1545558597239},{"_id":"themes/next/source/lib/pace/README.md","hash":"ddcd2834d847f37b8ee77858bd03d31f70f55fb7","modified":1545558597241},{"_id":"themes/next/source/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1545558597242},{"_id":"themes/next/source/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1545558597243},{"_id":"themes/next/source/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1545558597245},{"_id":"themes/next/source/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1545558597246},{"_id":"themes/next/source/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1545558597248},{"_id":"themes/next/source/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1545558597249},{"_id":"themes/next/source/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1545558597251},{"_id":"themes/next/source/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1545558597254},{"_id":"themes/next/source/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1545558597255},{"_id":"themes/next/source/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1545558597256},{"_id":"themes/next/source/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1545558597258},{"_id":"themes/next/source/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1545558597260},{"_id":"themes/next/source/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1545558597261},{"_id":"themes/next/source/lib/pace/pace.min.js","hash":"8aaa675f577d5501f5f22d5ccb07c2b76310b690","modified":1545558597263},{"_id":"themes/next/source/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1543657769000},{"_id":"themes/next/source/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1543657769000},{"_id":"themes/next/source/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1543657769000},{"_id":"themes/next/source/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1543657769000},{"_id":"themes/next/layout/_third-party/search/algolia-search/assets.swig","hash":"6958a97fde63e03983ec2394a4f8e408860fb42b","modified":1543657769000},{"_id":"themes/next/layout/_third-party/search/algolia-search/dom.swig","hash":"ba698f49dd3a868c95b240d802f5b1b24ff287e4","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/back-to-top-sidebar.styl","hash":"b4a2f1d031fe44452cf55ded8211cf018235073a","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/back-to-top.styl","hash":"31050fc7a25784805b4843550151c93bfa55c9c8","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/buttons.styl","hash":"7e509c7c28c59f905b847304dd3d14d94b6f3b8e","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/comments.styl","hash":"471f1627891aca5c0e1973e09fbcb01e1510d193","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/components.styl","hash":"a6bb5256be6195e76addbda12f4ed7c662d65e7a","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pagination.styl","hash":"c5d48863f332ff8ce7c88dec2c893f709d7331d3","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tag-cloud.styl","hash":"dd8a3b22fc2f222ac6e6c05bd8a773fb039169c0","modified":1543657769000},{"_id":"themes/next/source/css/_common/outline/outline.styl","hash":"aebbd86500d819c4532ab290c62b6f432bc2f878","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/base.styl","hash":"ec2a62400642bb69edd9259e74e8f1c8ed53c42b","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/helpers.styl","hash":"9c25c75311e1bd4d68df031d3f2ae6d141a90766","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/mobile.styl","hash":"efc40a32487e0ac7b94b1ca81bdbdcc4ec8f2924","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/normalize.styl","hash":"ece571f38180febaf02ace8187ead8318a300ea7","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/scaffolding.styl","hash":"a280a583b7615e939aaddbf778f5c108ef8a2a6c","modified":1543657769000},{"_id":"themes/next/source/css/_common/scaffolding/tables.styl","hash":"02d138ed65060e98f20bc5b1dd59a791222b7156","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Gemini/index.styl","hash":"665b1813a1d6fbc3c5549a76e4f26cd62a804dde","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_base.styl","hash":"0bef9f0dc134215bc4d0984ba3a16a1a0b6f87ec","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_header.styl","hash":"5ae7906dc7c1d9468c7f4b4a6feddddc555797a1","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_logo.styl","hash":"38e5df90c8689a71c978fd83ba74af3d4e4e5386","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_menu.styl","hash":"fe2dc74726a515549956d233becda188da64f948","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_posts-expanded.styl","hash":"2212511ae14258d93bec57993c0385e5ffbb382b","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/index.styl","hash":"5e12572b18846250e016a872a738026478ceef37","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/_layout.styl","hash":"0efa036a15c18f5abb058b7c0fad1dd9ac5eed4c","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/_logo.styl","hash":"8829bc556ca38bfec4add4f15a2f028092ac6d46","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/_menu.styl","hash":"936132428a0d35b3947ccedd4c379940abcf223a","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/_search.styl","hash":"1452cbe674cc1d008e1e9640eb4283841058fc64","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/index.styl","hash":"d5e8ea6336bc2e237d501ed0d5bbcbbfe296c832","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_brand.styl","hash":"c4ed249798296f60bda02351fe6404fb3ef2126f","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_layout.styl","hash":"876b5d99061025cf485a3cac440624ded5734319","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_menu.styl","hash":"74c7dccf0a3ee9fc2ca25ad8e998243191813a0e","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_posts.styl","hash":"2f878213cb24c5ddc18877f6d15ec5c5f57745ac","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_sidebar.styl","hash":"f26860978fc4e011758945db5d0f79105ac84fae","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/_sub-menu.styl","hash":"ffa870c3fa37a48b01dc6f967e66f5df508d02bf","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Pisces/index.styl","hash":"5779cc8086b1cfde9bc4f1afdd85223bdc45f0a0","modified":1543657769000},{"_id":"themes/next/source/js/src/schemes/pisces.js","hash":"72037e8c4202a73b0c6ff7d81b57cd349e836837","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1543657769000},{"_id":"themes/next/source/lib/pace/.github/stale.yml","hash":"dbd5e6bf89b76ad1f2b081578b239c7ae32755af","modified":1545558597238},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1543657769000},{"_id":"themes/next/source/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1543657769000},{"_id":"themes/next/source/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/footer/footer.styl","hash":"39dee82d481dd9d44e33658960ec63e47cd0a715","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/github-banner.styl","hash":"ee37e6c465b9b2a7e39175fccfcbed14f2db039b","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/header.styl","hash":"7cc3f36222494c9a1325c5347d7eb9ae53755a32","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/headerband.styl","hash":"d27448f199fc2f9980b601bc22b87f08b5d64dd1","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/menu.styl","hash":"05e68adae13f4d99a6ac6493daab39c92e39a6bd","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/site-meta.styl","hash":"6c00f6e0978f4d8f9a846a15579963728aaa6a17","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/header/site-nav.styl","hash":"49c2b2c14a1e7fcc810c6be4b632975d0204c281","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/highlight/diff.styl","hash":"96f32ea6c3265a3889e6abe57587f6e2a2a40dfb","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/highlight/highlight.styl","hash":"a6dc3c7eb81ef5117c28fa2245fff1adc02d0292","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/highlight/theme.styl","hash":"b76387934fb6bb75212b23c1a194486892cc495e","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/archive.styl","hash":"a1eeceea4b88fba184408cb2507bbef1f5e7b0e0","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/breadcrumb.styl","hash":"7dd9a0378ccff3e4a2003f486b1a34e74c20dac6","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/categories.styl","hash":"4eff5b252d7b614e500fc7d52c97ce325e57d3ab","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/pages.styl","hash":"fb451dc4cc0355b57849c27d3eb110c73562f794","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/post-detail.styl","hash":"9bf4362a4d0ae151ada84b219d39fbe5bb8c790e","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/pages/schedule.styl","hash":"f2911a048e5c20ca2a059bd1087d98ac1c51681c","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-button.styl","hash":"e72a89e0f421444453e149ba32c77a64bd8e44e8","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-collapse.styl","hash":"3b5a37ba5e70f92c1ee707c8053524e38adbb710","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-copyright.styl","hash":"2356226157e8068b0e9bbe2f7d0f74e1ab49199b","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-eof.styl","hash":"2cdc094ecf907a02fce25ad4a607cd5c40da0f2b","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-expand.styl","hash":"ca89b167d368eac50a4f808fa53ba67e69cbef94","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-gallery.styl","hash":"387ce23bba52b22a586b2dfb4ec618fe1ffd3926","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-meta.styl","hash":"417f05ff12a2aaca6ceeac8b7e7eb26e9440c4c3","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-nav.styl","hash":"a5d8617a24d7cb6c5ad91ea621183ca2c0917331","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-reading_progress.styl","hash":"f4e9f870baa56eae423a123062f00e24cc780be1","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-reward.styl","hash":"549a8a0b5301d32acd86a97f17340cdfcd46fb63","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-rtl.styl","hash":"017074ef58166e2d69c53bb7590a0e7a8947a1ed","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-tags.styl","hash":"a352ae5b1f8857393bf770d2e638bf15f0c9585d","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-title.styl","hash":"8e058c99dd7d41f0bd34c7c28b6ac9fbb17dcb5e","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-type.styl","hash":"10251257aceecb117233c9554dcf8ecfef8e2104","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post-widgets.styl","hash":"578bb2d5f24cad39205bbafb4c39c7e9962b9fa9","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/post/post.styl","hash":"3039df53b94b0847b0c451d2d227270b479cc184","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author-links.styl","hash":"35c0350096921dd8e2222ec41b6c17a4ea6b44f2","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-author.styl","hash":"e0ac0762b9f126819e94b13cf92287cc06c058ae","modified":1545536966403},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-blogroll.styl","hash":"b34bb2ea4d16e47e6fdc06cd4feb32d93ccbd779","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-dimmer.styl","hash":"efa5e5022e205b52786ce495d4879f5e7b8f84b2","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-feed-link.styl","hash":"9486ddd2cb255227db102d09a7df4cae0fabad72","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-nav.styl","hash":"45fa7193435a8eae9960267438750b4c9fa9587f","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toc.styl","hash":"4427ed3250483ed5b7baad74fa93474bd1eda729","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar-toggle.styl","hash":"f7784aba0c1cd20d824c918c120012d57a5eaa2a","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/sidebar.styl","hash":"43bc58daa8d35d5d515dc787ceb21dd77633fe49","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/sidebar/site-state.styl","hash":"3623e7fa4324ec1307370f33d8f287a9e20a5578","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/blockquote-center.styl","hash":"c2abe4d87148e23e15d49ee225bc650de60baf46","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/full-image.styl","hash":"6ec8ea7b11a146777b6b8da0f71f0cc1dbd129df","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/group-pictures.styl","hash":"4851b981020c5cbc354a1af9b831a2dcb3cf9d39","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/label.styl","hash":"4a457d265d62f287c63d48764ce45d9bcfc9ec5a","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/note-modern.styl","hash":"ee7528900578ef4753effe05b346381c40de5499","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/note.styl","hash":"32c9156bea5bac9e9ad0b4c08ffbca8b3d9aac4b","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/tags.styl","hash":"5e340ee2407a4e39cd708794cfcc718a5f398d7b","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/tags/tabs.styl","hash":"4ab5deed8c3b0c338212380f678f8382672e1bcb","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/algolia-search.styl","hash":"10e9bb3392826a5a8f4cabfc14c6d81645f33fe6","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/busuanzi-counter.styl","hash":"d4e6d8d7b34dc69994593c208f875ae8f7e8a3ae","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/gitalk.styl","hash":"ac7753d536341aa824d7bce0332735e838916995","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/gitment.styl","hash":"34935b40237c074be5f5e8818c14ccfd802b7439","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/han.styl","hash":"cce6772e2cdb4db85d35486ae4c6c59367fbdd40","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/localsearch.styl","hash":"d89c4b562b528e4746696b2ad8935764d133bdae","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/needsharebutton.styl","hash":"a5e3e6b4b4b814a9fe40b34d784fed67d6d977fa","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/related-posts.styl","hash":"76937db9702053d772f6758d9cea4088c2a6e2a3","modified":1543657769000},{"_id":"themes/next/source/css/_common/components/third-party/third-party.styl","hash":"fcb8d1f2cffaa418b7c471e0238e101ea0025d0e","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/outline/outline.styl","hash":"5dc4859c66305f871e56cba78f64bfe3bf1b5f01","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Mist/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1543657769000},{"_id":"themes/next/source/css/_schemes/Muse/sidebar/sidebar-blogroll.styl","hash":"817587e46df49e819858c8ecbafa08b53d5ff040","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1543657769000},{"_id":"themes/next/source/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1543657769000},{"_id":"public/categories/index.html","hash":"6689f2919a2cfdcd9907836ecfa3fd80c2bae272","modified":1546486456113},{"_id":"public/tags/index.html","hash":"e727f9e0c9d8e02a4560a8cff90e4541719999b3","modified":1546486456117},{"_id":"public/archives/2019/index.html","hash":"892714a208040bf745e0e44c9b279fc35b6fef84","modified":1546486456119},{"_id":"public/archives/2019/01/index.html","hash":"3d8b14ea8b2d65c7fea21efa6a557892df447ee9","modified":1546486456121},{"_id":"public/categories/Version-Control/index.html","hash":"100d4566d14163f20942edc0bd97fbc076741ba1","modified":1546486456122},{"_id":"public/categories/Software/index.html","hash":"1a47b8ec565cff52edbca62c2bf33e4a0561ade4","modified":1546486456122},{"_id":"public/categories/Windows/index.html","hash":"f6fda776c8b68e8a41450ecd0305b874dfcb0bc8","modified":1546486456124},{"_id":"public/categories/Software/Tools/index.html","hash":"fb3f5d19de372bb387dbebf885178efc27b7d32e","modified":1546486456124},{"_id":"public/categories/Blog/index.html","hash":"e0dc52bd31282b980e4769ba74c8933ffc214a1b","modified":1546486456125},{"_id":"public/categories/Cache/index.html","hash":"02f669d0458e0e465776b372ff7d5c9ee09022e6","modified":1546486456125},{"_id":"public/categories/Cache/Redis/index.html","hash":"f9de982660e887ae3cbca0385a1f96c1ca5299e6","modified":1546486456126},{"_id":"public/tags/Git/index.html","hash":"cf717c3170d19db4d0cd105345ab550827ca5fb6","modified":1546486456126},{"_id":"public/tags/Software/index.html","hash":"5be05bc4ed12cb224e94bb4572bff2245aee4217","modified":1546486456127},{"_id":"public/tags/Tools/index.html","hash":"ef701bd443bb87e3e6a18c08e66afdcb55dd2088","modified":1546486456128},{"_id":"public/tags/Windows/index.html","hash":"3704609979a460812e076fad738a89164239328d","modified":1546486456129},{"_id":"public/tags/GitHub-Pages/index.html","hash":"19ddd3dae9d198e7ad3c126ca6231f10bb7ca0e5","modified":1546486456130},{"_id":"public/tags/Hexo/index.html","hash":"4a6d0f13cfbd7899b4aeb72a8fa145b51690fc94","modified":1546486456131},{"_id":"public/tags/NexT/index.html","hash":"2311d918013b6381b2cbf51c9817b0325e7549bc","modified":1546486456132},{"_id":"public/2019/01/03/Comments/index.html","hash":"85beb6ff8a90c0a9491edc6214ccad540aed360c","modified":1546486456133},{"_id":"public/2019/01/02/How-to-Down-Up-a-Plan/index.html","hash":"825772b386f9eb609b212be2a870d67059a380c6","modified":1546486456134},{"_id":"public/2018/12/25/Redis学习笔记/index.html","hash":"72ea69ae4bcb21613e1be8a2f365d019a4924f82","modified":1546486456134},{"_id":"public/2018/12/23/GitHub Pages+Hexo+NexT/index.html","hash":"45d3ad476093cd28311df8331374931878575777","modified":1546486456135},{"_id":"public/2018/12/23/Windows/index.html","hash":"72e95011823435d744fa50747ef328a131903d59","modified":1546486456136},{"_id":"public/2018/12/23/Software and Tools/index.html","hash":"87e9beb16fe8e72e0da2b5bd4535cbc13f2b72cf","modified":1546486456136},{"_id":"public/2018/12/22/Git/index.html","hash":"5aaae550c278d78d68c4a4fe6dc4769a17ee20fa","modified":1546486456137},{"_id":"public/2018/12/22/hello-world/index.html","hash":"eb06a5785681c774bacb348302bd4bcdfc8c5fa6","modified":1546486456137},{"_id":"public/archives/index.html","hash":"47d2279837efacf84dd2bc241621b53c3f7a1771","modified":1546486456138},{"_id":"public/archives/2018/index.html","hash":"142da35f3c7e308390eff5e3252f50c4f2e5eb12","modified":1546486456139},{"_id":"public/archives/2018/12/index.html","hash":"8ab8bf4454f8d76ff024dfe9b8bab8d9020a6e51","modified":1546486456140},{"_id":"public/index.html","hash":"08a337090833c40666b7e9c3276417b20891e6f0","modified":1546486456141},{"_id":"public/tags/Redis/index.html","hash":"7d16a2901dcefec15d3adcf44b8994ce5d1fdb5d","modified":1546486456273},{"_id":"public/images/algolia_logo.svg","hash":"ec119560b382b2624e00144ae01c137186e91621","modified":1546486456274},{"_id":"public/images/apple-touch-icon-next.png","hash":"2959dbc97f31c80283e67104fe0854e2369e40aa","modified":1546486456274},{"_id":"public/images/avatar.gif","hash":"264082bb3a1af70d5499c7d22b0902cb454b6d12","modified":1546486456275},{"_id":"public/images/cc-by-nc-nd.svg","hash":"c6524ece3f8039a5f612feaf865d21ec8a794564","modified":1546486456275},{"_id":"public/images/cc-by-nc-sa.svg","hash":"3031be41e8753c70508aa88e84ed8f4f653f157e","modified":1546486456276},{"_id":"public/images/cc-by-nc.svg","hash":"8d39b39d88f8501c0d27f8df9aae47136ebc59b7","modified":1546486456277},{"_id":"public/images/cc-by-nd.svg","hash":"c563508ce9ced1e66948024ba1153400ac0e0621","modified":1546486456277},{"_id":"public/images/cc-by-sa.svg","hash":"aa4742d733c8af8d38d4c183b8adbdcab045872e","modified":1546486456278},{"_id":"public/images/cc-by.svg","hash":"28a0a4fe355a974a5e42f68031652b76798d4f7e","modified":1546486456279},{"_id":"public/images/cc-zero.svg","hash":"87669bf8ac268a91d027a0a4802c92a1473e9030","modified":1546486456280},{"_id":"public/images/favicon-16x16-next.png","hash":"943a0d67a9cdf8c198109b28f9dbd42f761d11c3","modified":1546486456282},{"_id":"public/images/favicon-32x32-next.png","hash":"0749d7b24b0d2fae1c8eb7f671ad4646ee1894b1","modified":1546486456285},{"_id":"public/images/loading.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1546486456287},{"_id":"public/images/logo.svg","hash":"d29cacbae1bdc4bbccb542107ee0524fe55ad6de","modified":1546486456288},{"_id":"public/images/placeholder.gif","hash":"5fbd472222feb8a22cf5b8aa5dc5b8e13af88e2b","modified":1546486456289},{"_id":"public/images/quote-l.svg","hash":"94e870b4c8c48da61d09522196d4dd40e277a98f","modified":1546486456290},{"_id":"public/images/quote-r.svg","hash":"e60ae504f9d99b712c793c3740c6b100d057d4ec","modified":1546486456292},{"_id":"public/images/searchicon.png","hash":"67727a6a969be0b2659b908518fa6706eed307b8","modified":1546486456294},{"_id":"public/lib/font-awesome/HELP-US-OUT.txt","hash":"4f7bf961f1bed448f6ba99aeb9219fabf930ba96","modified":1546486456296},{"_id":"public/lib/pace/LICENSE","hash":"336611e76f0638d3d8aeca6b1b97138d2a07523f","modified":1546486456296},{"_id":"public/lib/font-awesome/css/font-awesome.css.map","hash":"0189d278706509412bac4745f96c83984e1d59f4","modified":1546486456299},{"_id":"public/lib/blog-encrypt.js","hash":"ebf4ce2a0389fe8184668508ba9c730cd2c38f97","modified":1546486456301},{"_id":"public/css/blog-encrypt.css","hash":"262922c3f49cb8cca7b3ea982c49b57de2af53d6","modified":1546486456302},{"_id":"public/live2dw/assets/exp/f01.exp.json","hash":"84073a497ddb6e56c6cfc244a0fb217ba473abf9","modified":1546486456302},{"_id":"public/live2dw/assets/exp/f02.exp.json","hash":"241b6afafa2e25c6d7a54692a8b5aa060a137ab1","modified":1546486456303},{"_id":"public/live2dw/assets/exp/f03.exp.json","hash":"fbf7729e504f14f83f976827fcf62301a6579a34","modified":1546486456303},{"_id":"public/live2dw/assets/exp/f04.exp.json","hash":"35e746ede62e7090e7dfb08561d77772f58b4153","modified":1546486456312},{"_id":"public/live2dw/assets/mtn/flickHead_00.mtn","hash":"f64c79c9171660db5c440bef229ac2e35a1597d5","modified":1546486456313},{"_id":"public/live2dw/assets/mtn/flickHead_01.mtn","hash":"a1011d6bf397bcd3c3c968d9616f88fe1ffbc83c","modified":1546486456313},{"_id":"public/live2dw/assets/mtn/flickHead_02.mtn","hash":"d3c9c0acb4dc25a2274f3b9faa71e5ce60ad92e4","modified":1546486456314},{"_id":"public/live2dw/assets/mtn/idle_00.mtn","hash":"378b4577217c604c9d28ab4edf8b707c8d8c2fbb","modified":1546486456315},{"_id":"public/live2dw/assets/mtn/idle_01.mtn","hash":"88c2494655dbb712b842f03232b619f381753d52","modified":1546486456315},{"_id":"public/live2dw/assets/mtn/idle_02.mtn","hash":"7f5d2cf8706007c8659938eba132a68c470a4c26","modified":1546486456316},{"_id":"public/live2dw/assets/mtn/pinchIn_00.mtn","hash":"70978b4c983f6a9fd6d3d9c24571586f7d6eac30","modified":1546486456316},{"_id":"public/live2dw/assets/mtn/pinchIn_01.mtn","hash":"a5fefb45115695db72b9499e627a51b2b9394f2c","modified":1546486456317},{"_id":"public/live2dw/assets/mtn/pinchIn_02.mtn","hash":"aa0d66ca9b06c374577fd7e64e89756de1e1f2ae","modified":1546486456317},{"_id":"public/live2dw/assets/mtn/pinchOut_00.mtn","hash":"e07fe8fd8c2810e3c1d28b730bd49c8c25849bad","modified":1546486456319},{"_id":"public/live2dw/assets/mtn/pinchOut_01.mtn","hash":"e05df948d08b17f34c993a9c1f901190509d5db0","modified":1546486456322},{"_id":"public/live2dw/assets/mtn/pinchOut_02.mtn","hash":"b323fd350d334b33bbdfb31194ae664089986c27","modified":1546486456323},{"_id":"public/live2dw/assets/mtn/shake_00.mtn","hash":"5185d02c7ab9f0bec3d4a890b54b2378e553373d","modified":1546486456323},{"_id":"public/live2dw/assets/mtn/shake_01.mtn","hash":"e812985a56796e122018f9d57d1606a4866ff7d1","modified":1546486456324},{"_id":"public/live2dw/assets/mtn/shake_02.mtn","hash":"2702970805e07777974c383613e631730982bcff","modified":1546486456325},{"_id":"public/live2dw/assets/mtn/tapBody_00.mtn","hash":"835aa3d4a8fbd26c0bb66b164a19464fa3f17a99","modified":1546486456325},{"_id":"public/live2dw/assets/mtn/tapBody_01.mtn","hash":"78fca17436ab5e065e27f419f135aa6c0a0b52ef","modified":1546486456326},{"_id":"public/live2dw/assets/mtn/tapBody_02.mtn","hash":"a75acb51c1191ce5050d3ee1af6f2dcc787c7c5e","modified":1546486456326},{"_id":"public/live2dw/assets/shizuku.model.json","hash":"19a05bd41b806a935cea42c2000626fc82da2536","modified":1546486456327},{"_id":"public/live2dw/assets/shizuku.physics.json","hash":"6484d646e79a44c83784c6ae434cf7349746c5c8","modified":1546486456328},{"_id":"public/live2dw/assets/shizuku.pose.json","hash":"ac5505efbf80ba0a2e5783d67fe232bc5c6f1f80","modified":1546486456328},{"_id":"public/live2dw/assets/snd/flickHead_01.mp3","hash":"436d0bbccf6e7a2744447554947eee4563608970","modified":1546486456329},{"_id":"public/live2dw/assets/snd/flickHead_02.mp3","hash":"5f63477ce63f2073e24d68fea906fe136fe6349e","modified":1546486456329},{"_id":"public/live2dw/assets/snd/shake_01.mp3","hash":"c1e0e8a07ff268ee06c2b7825d1b645e193f21b9","modified":1546486456329},{"_id":"public/live2dw/assets/snd/tapBody_00.mp3","hash":"003e68a59a9c8392e230f34c91860efbd946277a","modified":1546486456330},{"_id":"public/live2dw/assets/snd/tapBody_01.mp3","hash":"5314b50f153df71559e51e2586581c006df00722","modified":1546486456330},{"_id":"public/images/avatar.jpg","hash":"cb5fbb6b5fb6231d540b19102b30bd20aa57c535","modified":1546486461159},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff2","hash":"d6f48cba7d076fb6f2fd6ba993a75b9dc1ecbf0c","modified":1546486461169},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.woff","hash":"28b782240b3e76db824e12c02754a9731a167527","modified":1546486461177},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_00.png","hash":"21bdb28b31783e23b26b3aa061e90be4088665aa","modified":1546486461178},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_03.png","hash":"07f568a2bb8045b6bdff7783fb4daf62c821f9ab","modified":1546486461180},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_05.png","hash":"0cd00007fb8bff62a2eb08e1d7c43abab8722224","modified":1546486461181},{"_id":"public/live2dw/assets/snd/flickHead_00.mp3","hash":"356388d939006b03cf9e6158c603b58d4800bec1","modified":1546486461182},{"_id":"public/live2dw/assets/snd/pinchIn_00.mp3","hash":"f9baa3b7cadec20b714135fc49cfab3ff6adeeb4","modified":1546486461183},{"_id":"public/live2dw/assets/snd/pinchIn_01.mp3","hash":"d5c8cc6f61b56222a83a5174f75006f83c3b88da","modified":1546486461184},{"_id":"public/live2dw/assets/snd/pinchOut_01.mp3","hash":"8a081030fd53c07bffe3edd48f87a371ca77296b","modified":1546486461185},{"_id":"public/live2dw/assets/snd/pinchOut_02.mp3","hash":"554edb2f3838cbdc27d1a9c6b8a9cb6eb465cbdd","modified":1546486461185},{"_id":"public/live2dw/assets/snd/shake_00.mp3","hash":"f65dd58e7b44ec5c865d13c190316070b625b5fe","modified":1546486461187},{"_id":"public/live2dw/assets/snd/shake_02.mp3","hash":"8882b94bce00f09232588b7301badb105fa8acab","modified":1546486461188},{"_id":"public/live2dw/assets/snd/tapBody_02.mp3","hash":"15e7815ed0a0e5164e18e0c53b97aedc742a134d","modified":1546486461189},{"_id":"public/live2dw/lib/L2Dwidget.min.js","hash":"6e013af9c502b2e63ac5e42944e3244f8f515eb7","modified":1546486461190},{"_id":"public/js/src/affix.js","hash":"a2aab233d99297435a5274bf512c3c753fe08e80","modified":1546486461287},{"_id":"public/js/src/algolia-search.js","hash":"1f7f10c579e7703d0f6acb8b73f3d78a07d0c623","modified":1546486461288},{"_id":"public/js/src/bootstrap.js","hash":"1c41508b83cb0c4512e64b4d63afa1be954ce8ef","modified":1546486461293},{"_id":"public/js/src/clipboard-use.js","hash":"f7121e23b59dafd2056edcb45658f9beb7433e89","modified":1546486461293},{"_id":"public/js/src/exturl.js","hash":"54825acc8de4793feac415be227b965428f4e97d","modified":1546486461294},{"_id":"public/js/src/js.cookie.js","hash":"9b37973a90fd50e71ea91682265715e45ae82c75","modified":1546486461294},{"_id":"public/js/src/post-details.js","hash":"0dde5e6d4547587662a3256317a9d5d1db507692","modified":1546486461295},{"_id":"public/js/src/scroll-cookie.js","hash":"d07b3776708d4ae79ed2037c4c7391d5c9b06b19","modified":1546486461296},{"_id":"public/js/src/scrollspy.js","hash":"fa3c92968bcdbcb8d95a1729f7659d9753cbd077","modified":1546486461296},{"_id":"public/lib/font-awesome/bower.json","hash":"64394a2a9aa00f8e321d8daa5e51a420f0e96dad","modified":1546486461297},{"_id":"public/lib/pace/pace-theme-barber-shop.min.css","hash":"ee0d51446cb4ffe1bb96bd7bc8c8e046dddfcf46","modified":1546486461297},{"_id":"public/lib/pace/pace-theme-big-counter.min.css","hash":"5b561dc328af4c4d512e20a76fe964d113a32ba8","modified":1546486461297},{"_id":"public/lib/pace/pace-theme-bounce.min.css","hash":"f6bdb9a785b7979dd8ec5c60e278af955ef1e585","modified":1546486461299},{"_id":"public/lib/pace/pace-theme-center-atom.min.css","hash":"dcf79c24fe5350fb73d8038573a104e73639e9d3","modified":1546486461301},{"_id":"public/lib/pace/pace-theme-center-circle.min.css","hash":"a4066769c78affbfbc5e30a600e2c7862cd532e0","modified":1546486461302},{"_id":"public/lib/pace/pace-theme-center-radar.min.css","hash":"ab7cba998bf4c03b13df342bf43647fa4f419783","modified":1546486461302},{"_id":"public/lib/pace/pace-theme-center-simple.min.css","hash":"67f44c947548bd4d77e7590d3f59e236cbf9e98a","modified":1546486461303},{"_id":"public/lib/pace/pace-theme-fill-left.min.css","hash":"0bec1e235a4a2cccda3f993b205424e1441a44ae","modified":1546486461303},{"_id":"public/lib/pace/pace-theme-corner-indicator.min.css","hash":"b3c64c973f31884e3d8145989476707333406b9a","modified":1546486461305},{"_id":"public/lib/pace/pace-theme-flash.min.css","hash":"13ace22c40312d7bbd8d9c1e50eff897a7a497d8","modified":1546486461305},{"_id":"public/lib/pace/pace-theme-mac-osx.min.css","hash":"9f2e7b51b084da407863826b25265b31150b3821","modified":1546486461306},{"_id":"public/lib/pace/pace-theme-minimal.min.css","hash":"9cd783cceb8a191f3c8b5d81f7a430ecc3e489d3","modified":1546486461306},{"_id":"public/js/src/schemes/pisces.js","hash":"72037e8c4202a73b0c6ff7d81b57cd349e836837","modified":1546486461307},{"_id":"public/lib/pace/README.html","hash":"58f2105ada5cc52dff5aabcecb92569ee84493a0","modified":1546486461309},{"_id":"public/css/main.css","hash":"b99e2d15d989839fd74b2e1c6f4f108bc0fcf408","modified":1546486461310},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_04.png","hash":"f764d594841905db8b2998dd61c329866125ad97","modified":1546486461311},{"_id":"public/live2dw/assets/snd/pinchOut_00.mp3","hash":"0654f38f6e9fd623eaf8be11b5d58c9d12991949","modified":1546486461312},{"_id":"public/js/src/clipboard.min.js","hash":"ee60ca5ba9401456105ef703a98092369b579c80","modified":1546486461442},{"_id":"public/js/src/motion.js","hash":"b45d2c0d48f2c8e6a0621b8063845f76b89476cc","modified":1546486461442},{"_id":"public/js/src/utils.js","hash":"28a79d317b7f4012917a54cac770551596bf6241","modified":1546486461443},{"_id":"public/lib/pace/pace-theme-loading-bar.min.css","hash":"7ee28875dfc1230d76c537f6605766e8d4011e9f","modified":1546486461443},{"_id":"public/lib/pace/pace.min.js","hash":"9944dfb7814b911090e96446cea4d36e2b487234","modified":1546486461444},{"_id":"public/lib/velocity/velocity.ui.min.js","hash":"ed5e534cd680a25d8d14429af824f38a2c7d9908","modified":1546486461445},{"_id":"public/lib/ua-parser-js/dist/ua-parser.min.js","hash":"38628e75e4412cc6f11074e03e1c6d257aae495b","modified":1546486461445},{"_id":"public/lib/ua-parser-js/dist/ua-parser.pack.js","hash":"214dad442a92d36af77ed0ca1d9092b16687f02f","modified":1546486461446},{"_id":"public/lib/crypto-js.js","hash":"3dd73b6f13dc818a3a9c5c7424c1c4a9649b00a2","modified":1546486461447},{"_id":"public/live2dw/assets/snd/pinchIn_02.mp3","hash":"5b63e02607571ac601c500995e836e6c861b1c62","modified":1546486461447},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js","hash":"7d3a9c937317b9c15f2c3a872f0e26607a729458","modified":1546486461448},{"_id":"public/lib/font-awesome/fonts/fontawesome-webfont.eot","hash":"d980c2ce873dc43af460d4d572d441304499f400","modified":1546486461524},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_02.png","hash":"055eb2da9c13e9116be93a1e60c0ea2b660af864","modified":1546486461526},{"_id":"public/lib/font-awesome/css/font-awesome.min.css","hash":"512c7d79033e3028a9be61b540cf1a6870c896f8","modified":1546486461597},{"_id":"public/live2dw/lib/L2Dwidget.min.js.map","hash":"5e7669733ecd0b1bc3881d2cf7fcc01e2990a07d","modified":1546486461601},{"_id":"public/lib/velocity/velocity.min.js","hash":"2f1afadc12e4cf59ef3b405308d21baa97e739c6","modified":1546486461732},{"_id":"public/lib/velocity/velocity.ui.js","hash":"6a1d101eab3de87527bb54fcc8c7b36b79d8f0df","modified":1546486461732},{"_id":"public/lib/font-awesome/css/font-awesome.css","hash":"0140952c64e3f2b74ef64e050f2fe86eab6624c8","modified":1546486461733},{"_id":"public/live2dw/assets/moc/shizuku.1024/texture_01.png","hash":"3d0e745f3e560071ee08beeecde186e5ea35d99e","modified":1546486461734},{"_id":"public/lib/jquery/index.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1546486462097},{"_id":"public/live2dw/lib/L2Dwidget.0.min.js.map","hash":"09521263ecc625a246b3406c385300e99e966a2e","modified":1546486462126},{"_id":"public/live2dw/assets/moc/shizuku.moc","hash":"c2670a0f75830edc89d7fe6d074de4ee67e8dc5d","modified":1546486462136},{"_id":"public/lib/velocity/velocity.js","hash":"9f08181baea0cc0e906703b7e5df9111b9ef3373","modified":1546486462170}],"Category":[{"name":"Version Control","_id":"cjqg23d8u0005wsw2oaj5b5xo"},{"name":"Software","_id":"cjqg23db5000awsw2prmceay4"},{"name":"Windows","_id":"cjqg23dby000ewsw25acq6tx6"},{"name":"Tools","parent":"cjqg23db5000awsw2prmceay4","_id":"cjqg23dd1000gwsw23ndau09m"},{"name":"Blog","_id":"cjqg23dlz000pwsw200w2munx"},{"name":"Cache","_id":"cjqg23es0000ywsw2jtzhmard"},{"name":"Redis","parent":"cjqg23es0000ywsw2jtzhmard","_id":"cjqg23es80011wsw2ublt9b76"}],"Data":[{"_id":"next","data":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}],"Page":[{"title":"categories","date":"2018-12-23T06:02:57.000Z","_content":"","source":"categories/index.md","raw":"---\ntitle: categories\ndate: 2018-12-23 14:02:57\n---\n","updated":"2018-12-23T06:02:57.569Z","path":"categories/index.html","comments":1,"layout":"page","_id":"cjqg23d620001wsw2w7qr2pcj","content":"","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":""},{"title":"tags","date":"2018-12-23T05:54:32.000Z","type":"tags","_content":"","source":"tags/index.md","raw":"---\ntitle: tags\ndate: 2018-12-23 13:54:32\ntype: \"tags\"\n---\n","updated":"2018-12-23T05:55:40.490Z","path":"tags/index.html","comments":1,"layout":"page","_id":"cjqg23d820003wsw2zswm68bn","content":"","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":""}],"Post":[{"title":"Comments","date":"2019-01-03T03:11:10.000Z","discription":"Come on, Just BB!","top":true,"_content":"\n<img src=\"https://www.sandovalcountynm.gov/wp-content/uploads/2018/07/Public-Comment-1031x644.jpg\" width=\"100%\"/>\n\n<!-- more -->\n\n","source":"_posts/Comments.md","raw":"---\ntitle: Comments\ndate: 2019-01-03 11:11:10\ndiscription: Come on, Just BB!\ntop: true\ntags:\n---\n\n<img src=\"https://www.sandovalcountynm.gov/wp-content/uploads/2018/07/Public-Comment-1031x644.jpg\" width=\"100%\"/>\n\n<!-- more -->\n\n","slug":"Comments","published":1,"updated":"2019-01-03T03:20:56.868Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23d4g0000wsw2o9o2ksg0","content":"<p><img src=\"https://www.sandovalcountynm.gov/wp-content/uploads/2018/07/Public-Comment-1031x644.jpg\" width=\"100%\"></p>\n<a id=\"more\"></a>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"<p><img src=\"https://www.sandovalcountynm.gov/wp-content/uploads/2018/07/Public-Comment-1031x644.jpg\" width=\"100%\"></p>","more":""},{"title":"Git","description":"Git是目前世界上最先进的分布式版本控制系统","_content":"\n<img src=\"https://git-scm.com/images/logos/2color-lightbg@2x.png\" width=\"100%\"/>\n\n<!-- more -->\n\n> [Pro Git](https://git-scm.com/book/zh/v2)\n\n# 下载\n\n[官网](https://git-scm.com/)\n\n由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。推荐从 [Git for Windows 国内下载站](https://github.com/waylau/git-for-win) 下载。\n\n# 安装\n\n根据安装程序一步步安装即可。\n\n注意一下几个地方：\n\n1. Adjusting your PATH environment\n\n   勾选第一个选项：Use Git from Git Bash only\n\n   因为这种方式最安全。\n\n2. Choosing HTTPS transport backend\n\n   勾选第一个选项：Use the OpenSSL library\n\n3. Configuring the terminal emulator to use with Git Bash\n\n   勾选第一个选项：Use MinTTY\n\n其他的配置使用默认的即可。\n\n# 配置\n\n> [初次运行 Git 前的配置](https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE)\n\n# 常用命令\n\n## 克隆指定分支\n\n` git clone -b branch_name repo_url`\n\n## 克隆到指定目录\n\n`git clone repo_url dir_path`\n\n","source":"_posts/Git.md","raw":"---\ntitle: Git\ndescription: Git是目前世界上最先进的分布式版本控制系统\ncategories:\n - Version Control\ntags:\n - Git\n---\n\n<img src=\"https://git-scm.com/images/logos/2color-lightbg@2x.png\" width=\"100%\"/>\n\n<!-- more -->\n\n> [Pro Git](https://git-scm.com/book/zh/v2)\n\n# 下载\n\n[官网](https://git-scm.com/)\n\n由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。推荐从 [Git for Windows 国内下载站](https://github.com/waylau/git-for-win) 下载。\n\n# 安装\n\n根据安装程序一步步安装即可。\n\n注意一下几个地方：\n\n1. Adjusting your PATH environment\n\n   勾选第一个选项：Use Git from Git Bash only\n\n   因为这种方式最安全。\n\n2. Choosing HTTPS transport backend\n\n   勾选第一个选项：Use the OpenSSL library\n\n3. Configuring the terminal emulator to use with Git Bash\n\n   勾选第一个选项：Use MinTTY\n\n其他的配置使用默认的即可。\n\n# 配置\n\n> [初次运行 Git 前的配置](https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE)\n\n# 常用命令\n\n## 克隆指定分支\n\n` git clone -b branch_name repo_url`\n\n## 克隆到指定目录\n\n`git clone repo_url dir_path`\n\n","slug":"Git","published":1,"date":"2018-12-22T14:11:58.496Z","updated":"2019-01-03T03:33:47.430Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23d6g0002wsw2aailckvd","content":"<p><img src=\"https://git-scm.com/images/logos/2color-lightbg@2x.png\" width=\"100%\"></p>\n<a id=\"more\"></a>\n<blockquote>\n<p><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"noopener\">Pro Git</a></p>\n</blockquote>\n<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><p><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"noopener\">官网</a></p>\n<p>由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。推荐从 <a href=\"https://github.com/waylau/git-for-win\" target=\"_blank\" rel=\"noopener\">Git for Windows 国内下载站</a> 下载。</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>根据安装程序一步步安装即可。</p>\n<p>注意一下几个地方：</p>\n<ol>\n<li><p>Adjusting your PATH environment</p>\n<p>勾选第一个选项：Use Git from Git Bash only</p>\n<p>因为这种方式最安全。</p>\n</li>\n<li><p>Choosing HTTPS transport backend</p>\n<p>勾选第一个选项：Use the OpenSSL library</p>\n</li>\n<li><p>Configuring the terminal emulator to use with Git Bash</p>\n<p>勾选第一个选项：Use MinTTY</p>\n</li>\n</ol>\n<p>其他的配置使用默认的即可。</p>\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><blockquote>\n<p><a href=\"https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE\" target=\"_blank\" rel=\"noopener\">初次运行 Git 前的配置</a></p>\n</blockquote>\n<h1 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h1><h2 id=\"克隆指定分支\"><a href=\"#克隆指定分支\" class=\"headerlink\" title=\"克隆指定分支\"></a>克隆指定分支</h2><p><code>git clone -b branch_name repo_url</code></p>\n<h2 id=\"克隆到指定目录\"><a href=\"#克隆到指定目录\" class=\"headerlink\" title=\"克隆到指定目录\"></a>克隆到指定目录</h2><p><code>git clone repo_url dir_path</code></p>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"<p><img src=\"https://git-scm.com/images/logos/2color-lightbg@2x.png\" width=\"100%\"></p>","more":"<blockquote>\n<p><a href=\"https://git-scm.com/book/zh/v2\" target=\"_blank\" rel=\"noopener\">Pro Git</a></p>\n</blockquote>\n<h1 id=\"下载\"><a href=\"#下载\" class=\"headerlink\" title=\"下载\"></a>下载</h1><p><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"noopener\">官网</a></p>\n<p>由于众所周知的原因，从上面的链接下载git for windows最好挂上一个代理，否则下载速度十分缓慢。推荐从 <a href=\"https://github.com/waylau/git-for-win\" target=\"_blank\" rel=\"noopener\">Git for Windows 国内下载站</a> 下载。</p>\n<h1 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h1><p>根据安装程序一步步安装即可。</p>\n<p>注意一下几个地方：</p>\n<ol>\n<li><p>Adjusting your PATH environment</p>\n<p>勾选第一个选项：Use Git from Git Bash only</p>\n<p>因为这种方式最安全。</p>\n</li>\n<li><p>Choosing HTTPS transport backend</p>\n<p>勾选第一个选项：Use the OpenSSL library</p>\n</li>\n<li><p>Configuring the terminal emulator to use with Git Bash</p>\n<p>勾选第一个选项：Use MinTTY</p>\n</li>\n</ol>\n<p>其他的配置使用默认的即可。</p>\n<h1 id=\"配置\"><a href=\"#配置\" class=\"headerlink\" title=\"配置\"></a>配置</h1><blockquote>\n<p><a href=\"https://git-scm.com/book/zh/v1/%E8%B5%B7%E6%AD%A5-%E5%88%9D%E6%AC%A1%E8%BF%90%E8%A1%8C-Git-%E5%89%8D%E7%9A%84%E9%85%8D%E7%BD%AE\" target=\"_blank\" rel=\"noopener\">初次运行 Git 前的配置</a></p>\n</blockquote>\n<h1 id=\"常用命令\"><a href=\"#常用命令\" class=\"headerlink\" title=\"常用命令\"></a>常用命令</h1><h2 id=\"克隆指定分支\"><a href=\"#克隆指定分支\" class=\"headerlink\" title=\"克隆指定分支\"></a>克隆指定分支</h2><p><code>git clone -b branch_name repo_url</code></p>\n<h2 id=\"克隆到指定目录\"><a href=\"#克隆到指定目录\" class=\"headerlink\" title=\"克隆到指定目录\"></a>克隆到指定目录</h2><p><code>git clone repo_url dir_path</code></p>"},{"title":"How to Down Up a Plan","date":"2019-01-02T00:21:38.000Z","_content":"\n## 为什么要制定计划\n\n> [这样制定计划 让你的效率翻倍](https://study.163.com/topics/coursefinder40_m/)\n>\n> [【人生规划局 VOL.02】构建你的计划与时间管理系统](https://www.douban.com/note/697771300/)\n\n- 清楚自己要做什么\n- 清楚事情的进展情况\n- 让自己的时间得以有效利用\n\n## 计划的分类\n\n主要分为两大类\n\n1. 固定时间计划\n\n   如日计划，周计划，月计划......\n\n2. 关键事务计划\n\n   如项目计划等......\n\n## 制定计划的原则\n\n> [[方法论] 如何设定目标，如何制定计划？](https://www.jianshu.com/p/2e2de41fea93)\n\nSMART原则：\n\n**Specific**（具体的）\n\n**Measurable**（可度量的）\n\n**Achievable**（可实现的）\n\n**Relevant**（相关的）\n\n**Timeboxed**（时间可控的）\n\n## 制定计划的流程\n\n1. 罗列要做的事情\n2. 确定重点事宜\n3. 分配时间\n\n## 计划的检查与调整\n\n日计划一般中午和晚上各检查一次，周计划则1-2天检查一次","source":"_posts/How-to-Down-Up-a-Plan.md","raw":"---\ntitle: How to Down Up a Plan\ndate: 2019-01-02 08:21:38\ntags:\n---\n\n## 为什么要制定计划\n\n> [这样制定计划 让你的效率翻倍](https://study.163.com/topics/coursefinder40_m/)\n>\n> [【人生规划局 VOL.02】构建你的计划与时间管理系统](https://www.douban.com/note/697771300/)\n\n- 清楚自己要做什么\n- 清楚事情的进展情况\n- 让自己的时间得以有效利用\n\n## 计划的分类\n\n主要分为两大类\n\n1. 固定时间计划\n\n   如日计划，周计划，月计划......\n\n2. 关键事务计划\n\n   如项目计划等......\n\n## 制定计划的原则\n\n> [[方法论] 如何设定目标，如何制定计划？](https://www.jianshu.com/p/2e2de41fea93)\n\nSMART原则：\n\n**Specific**（具体的）\n\n**Measurable**（可度量的）\n\n**Achievable**（可实现的）\n\n**Relevant**（相关的）\n\n**Timeboxed**（时间可控的）\n\n## 制定计划的流程\n\n1. 罗列要做的事情\n2. 确定重点事宜\n3. 分配时间\n\n## 计划的检查与调整\n\n日计划一般中午和晚上各检查一次，周计划则1-2天检查一次","slug":"How-to-Down-Up-a-Plan","published":1,"updated":"2019-01-02T00:24:08.046Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23d8f0004wsw26e2jla5h","content":"<h2 id=\"为什么要制定计划\"><a href=\"#为什么要制定计划\" class=\"headerlink\" title=\"为什么要制定计划\"></a>为什么要制定计划</h2><blockquote>\n<p><a href=\"https://study.163.com/topics/coursefinder40_m/\" target=\"_blank\" rel=\"noopener\">这样制定计划 让你的效率翻倍</a></p>\n<p><a href=\"https://www.douban.com/note/697771300/\" target=\"_blank\" rel=\"noopener\">【人生规划局 VOL.02】构建你的计划与时间管理系统</a></p>\n</blockquote>\n<ul>\n<li>清楚自己要做什么</li>\n<li>清楚事情的进展情况</li>\n<li>让自己的时间得以有效利用</li>\n</ul>\n<h2 id=\"计划的分类\"><a href=\"#计划的分类\" class=\"headerlink\" title=\"计划的分类\"></a>计划的分类</h2><p>主要分为两大类</p>\n<ol>\n<li><p>固定时间计划</p>\n<p>如日计划，周计划，月计划……</p>\n</li>\n<li><p>关键事务计划</p>\n<p>如项目计划等……</p>\n</li>\n</ol>\n<h2 id=\"制定计划的原则\"><a href=\"#制定计划的原则\" class=\"headerlink\" title=\"制定计划的原则\"></a>制定计划的原则</h2><blockquote>\n<p><a href=\"https://www.jianshu.com/p/2e2de41fea93\" target=\"_blank\" rel=\"noopener\">[方法论] 如何设定目标，如何制定计划？</a></p>\n</blockquote>\n<p>SMART原则：</p>\n<p><strong>Specific</strong>（具体的）</p>\n<p><strong>Measurable</strong>（可度量的）</p>\n<p><strong>Achievable</strong>（可实现的）</p>\n<p><strong>Relevant</strong>（相关的）</p>\n<p><strong>Timeboxed</strong>（时间可控的）</p>\n<h2 id=\"制定计划的流程\"><a href=\"#制定计划的流程\" class=\"headerlink\" title=\"制定计划的流程\"></a>制定计划的流程</h2><ol>\n<li>罗列要做的事情</li>\n<li>确定重点事宜</li>\n<li>分配时间</li>\n</ol>\n<h2 id=\"计划的检查与调整\"><a href=\"#计划的检查与调整\" class=\"headerlink\" title=\"计划的检查与调整\"></a>计划的检查与调整</h2><p>日计划一般中午和晚上各检查一次，周计划则1-2天检查一次</p>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":"<h2 id=\"为什么要制定计划\"><a href=\"#为什么要制定计划\" class=\"headerlink\" title=\"为什么要制定计划\"></a>为什么要制定计划</h2><blockquote>\n<p><a href=\"https://study.163.com/topics/coursefinder40_m/\" target=\"_blank\" rel=\"noopener\">这样制定计划 让你的效率翻倍</a></p>\n<p><a href=\"https://www.douban.com/note/697771300/\" target=\"_blank\" rel=\"noopener\">【人生规划局 VOL.02】构建你的计划与时间管理系统</a></p>\n</blockquote>\n<ul>\n<li>清楚自己要做什么</li>\n<li>清楚事情的进展情况</li>\n<li>让自己的时间得以有效利用</li>\n</ul>\n<h2 id=\"计划的分类\"><a href=\"#计划的分类\" class=\"headerlink\" title=\"计划的分类\"></a>计划的分类</h2><p>主要分为两大类</p>\n<ol>\n<li><p>固定时间计划</p>\n<p>如日计划，周计划，月计划……</p>\n</li>\n<li><p>关键事务计划</p>\n<p>如项目计划等……</p>\n</li>\n</ol>\n<h2 id=\"制定计划的原则\"><a href=\"#制定计划的原则\" class=\"headerlink\" title=\"制定计划的原则\"></a>制定计划的原则</h2><blockquote>\n<p><a href=\"https://www.jianshu.com/p/2e2de41fea93\" target=\"_blank\" rel=\"noopener\">[方法论] 如何设定目标，如何制定计划？</a></p>\n</blockquote>\n<p>SMART原则：</p>\n<p><strong>Specific</strong>（具体的）</p>\n<p><strong>Measurable</strong>（可度量的）</p>\n<p><strong>Achievable</strong>（可实现的）</p>\n<p><strong>Relevant</strong>（相关的）</p>\n<p><strong>Timeboxed</strong>（时间可控的）</p>\n<h2 id=\"制定计划的流程\"><a href=\"#制定计划的流程\" class=\"headerlink\" title=\"制定计划的流程\"></a>制定计划的流程</h2><ol>\n<li>罗列要做的事情</li>\n<li>确定重点事宜</li>\n<li>分配时间</li>\n</ol>\n<h2 id=\"计划的检查与调整\"><a href=\"#计划的检查与调整\" class=\"headerlink\" title=\"计划的检查与调整\"></a>计划的检查与调整</h2><p>日计划一般中午和晚上各检查一次，周计划则1-2天检查一次</p>\n"},{"title":"Software and Tools","description":"工欲善其事必先利其器","_content":"\n<img src=\"https://cdn.techopedia.com/images/uploads/92c11d5cff6e43f299d55f5e66fc9ebf.jpg?width=360&height=240&mode=crop\" width=\"100%\"/>\n\n<!-- more -->\n\n# Listary\n\n> 一款非常强大的搜索软件\n\n## 配置百度翻译\n\n设置>关键字>+\n\n![](https://i.loli.net/2018/12/23/5c1efe97bccec.jpg)\n\n![](https://i.loli.net/2018/12/23/5c1efec5efec9.jpg)\n\n## \n\n# GUN Wget\n\n> [Wget for windows——优雅地实现批量下载](https://zhuanlan.zhihu.com/p/28826000)\n\n# 在线验证 yaml 格式\n\n[YAML Lint](http://www.yamllint.com/)\n\n# Chrome插件\n\n## Clear Cache\n\nClear your cache and browsing data with a single click of a button.\n\n## SMMS\n\n> 一个简单实用的图床插件\n\n## Vimium\n\n> [像黑客一样！Chrome 完全键盘操作指南（原生快捷键 + Vimium 插件）](https://blog.csdn.net/WPwalter/article/details/80933068)\n\n## Octotree\n\n> [强力推荐！那些你不能错过的 GitHub 插件和工具](http://yifeng.studio/2017/09/06/recommended-extension-tools-about-github/)\n\n## Save to Pocket\n\n> The best way to save articles, videos and more","source":"_posts/Software and Tools.md","raw":"---\ntitle: Software and Tools\ndescription: 工欲善其事必先利其器\ncategories:\n - Software\n - Tools\ntags:\n - Software\n - Tools\n---\n\n<img src=\"https://cdn.techopedia.com/images/uploads/92c11d5cff6e43f299d55f5e66fc9ebf.jpg?width=360&height=240&mode=crop\" width=\"100%\"/>\n\n<!-- more -->\n\n# Listary\n\n> 一款非常强大的搜索软件\n\n## 配置百度翻译\n\n设置>关键字>+\n\n![](https://i.loli.net/2018/12/23/5c1efe97bccec.jpg)\n\n![](https://i.loli.net/2018/12/23/5c1efec5efec9.jpg)\n\n## \n\n# GUN Wget\n\n> [Wget for windows——优雅地实现批量下载](https://zhuanlan.zhihu.com/p/28826000)\n\n# 在线验证 yaml 格式\n\n[YAML Lint](http://www.yamllint.com/)\n\n# Chrome插件\n\n## Clear Cache\n\nClear your cache and browsing data with a single click of a button.\n\n## SMMS\n\n> 一个简单实用的图床插件\n\n## Vimium\n\n> [像黑客一样！Chrome 完全键盘操作指南（原生快捷键 + Vimium 插件）](https://blog.csdn.net/WPwalter/article/details/80933068)\n\n## Octotree\n\n> [强力推荐！那些你不能错过的 GitHub 插件和工具](http://yifeng.studio/2017/09/06/recommended-extension-tools-about-github/)\n\n## Save to Pocket\n\n> The best way to save articles, videos and more","slug":"Software and Tools","published":1,"date":"2018-12-23T02:21:23.385Z","updated":"2019-01-03T00:19:50.665Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23d9r0007wsw29rmq12sh","content":"<p><img src=\"https://cdn.techopedia.com/images/uploads/92c11d5cff6e43f299d55f5e66fc9ebf.jpg?width=360&height=240&mode=crop\" width=\"100%\"></p>\n<a id=\"more\"></a>\n<h1 id=\"Listary\"><a href=\"#Listary\" class=\"headerlink\" title=\"Listary\"></a>Listary</h1><blockquote>\n<p>一款非常强大的搜索软件</p>\n</blockquote>\n<h2 id=\"配置百度翻译\"><a href=\"#配置百度翻译\" class=\"headerlink\" title=\"配置百度翻译\"></a>配置百度翻译</h2><p>设置&gt;关键字&gt;+</p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1efe97bccec.jpg\" alt=\"\"></p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1efec5efec9.jpg\" alt=\"\"></p>\n<p>## </p>\n<h1 id=\"GUN-Wget\"><a href=\"#GUN-Wget\" class=\"headerlink\" title=\"GUN Wget\"></a>GUN Wget</h1><blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/28826000\" target=\"_blank\" rel=\"noopener\">Wget for windows——优雅地实现批量下载</a></p>\n</blockquote>\n<h1 id=\"在线验证-yaml-格式\"><a href=\"#在线验证-yaml-格式\" class=\"headerlink\" title=\"在线验证 yaml 格式\"></a>在线验证 yaml 格式</h1><p><a href=\"http://www.yamllint.com/\" target=\"_blank\" rel=\"noopener\">YAML Lint</a></p>\n<h1 id=\"Chrome插件\"><a href=\"#Chrome插件\" class=\"headerlink\" title=\"Chrome插件\"></a>Chrome插件</h1><h2 id=\"Clear-Cache\"><a href=\"#Clear-Cache\" class=\"headerlink\" title=\"Clear Cache\"></a>Clear Cache</h2><p>Clear your cache and browsing data with a single click of a button.</p>\n<h2 id=\"SMMS\"><a href=\"#SMMS\" class=\"headerlink\" title=\"SMMS\"></a>SMMS</h2><blockquote>\n<p>一个简单实用的图床插件</p>\n</blockquote>\n<h2 id=\"Vimium\"><a href=\"#Vimium\" class=\"headerlink\" title=\"Vimium\"></a>Vimium</h2><blockquote>\n<p><a href=\"https://blog.csdn.net/WPwalter/article/details/80933068\" target=\"_blank\" rel=\"noopener\">像黑客一样！Chrome 完全键盘操作指南（原生快捷键 + Vimium 插件）</a></p>\n</blockquote>\n<h2 id=\"Octotree\"><a href=\"#Octotree\" class=\"headerlink\" title=\"Octotree\"></a>Octotree</h2><blockquote>\n<p><a href=\"http://yifeng.studio/2017/09/06/recommended-extension-tools-about-github/\" target=\"_blank\" rel=\"noopener\">强力推荐！那些你不能错过的 GitHub 插件和工具</a></p>\n</blockquote>\n<h2 id=\"Save-to-Pocket\"><a href=\"#Save-to-Pocket\" class=\"headerlink\" title=\"Save to Pocket\"></a>Save to Pocket</h2><blockquote>\n<p>The best way to save articles, videos and more</p>\n</blockquote>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"<p><img src=\"https://cdn.techopedia.com/images/uploads/92c11d5cff6e43f299d55f5e66fc9ebf.jpg?width=360&height=240&mode=crop\" width=\"100%\"></p>","more":"<h1 id=\"Listary\"><a href=\"#Listary\" class=\"headerlink\" title=\"Listary\"></a>Listary</h1><blockquote>\n<p>一款非常强大的搜索软件</p>\n</blockquote>\n<h2 id=\"配置百度翻译\"><a href=\"#配置百度翻译\" class=\"headerlink\" title=\"配置百度翻译\"></a>配置百度翻译</h2><p>设置&gt;关键字&gt;+</p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1efe97bccec.jpg\" alt=\"\"></p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1efec5efec9.jpg\" alt=\"\"></p>\n<p>## </p>\n<h1 id=\"GUN-Wget\"><a href=\"#GUN-Wget\" class=\"headerlink\" title=\"GUN Wget\"></a>GUN Wget</h1><blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/28826000\" target=\"_blank\" rel=\"noopener\">Wget for windows——优雅地实现批量下载</a></p>\n</blockquote>\n<h1 id=\"在线验证-yaml-格式\"><a href=\"#在线验证-yaml-格式\" class=\"headerlink\" title=\"在线验证 yaml 格式\"></a>在线验证 yaml 格式</h1><p><a href=\"http://www.yamllint.com/\" target=\"_blank\" rel=\"noopener\">YAML Lint</a></p>\n<h1 id=\"Chrome插件\"><a href=\"#Chrome插件\" class=\"headerlink\" title=\"Chrome插件\"></a>Chrome插件</h1><h2 id=\"Clear-Cache\"><a href=\"#Clear-Cache\" class=\"headerlink\" title=\"Clear Cache\"></a>Clear Cache</h2><p>Clear your cache and browsing data with a single click of a button.</p>\n<h2 id=\"SMMS\"><a href=\"#SMMS\" class=\"headerlink\" title=\"SMMS\"></a>SMMS</h2><blockquote>\n<p>一个简单实用的图床插件</p>\n</blockquote>\n<h2 id=\"Vimium\"><a href=\"#Vimium\" class=\"headerlink\" title=\"Vimium\"></a>Vimium</h2><blockquote>\n<p><a href=\"https://blog.csdn.net/WPwalter/article/details/80933068\" target=\"_blank\" rel=\"noopener\">像黑客一样！Chrome 完全键盘操作指南（原生快捷键 + Vimium 插件）</a></p>\n</blockquote>\n<h2 id=\"Octotree\"><a href=\"#Octotree\" class=\"headerlink\" title=\"Octotree\"></a>Octotree</h2><blockquote>\n<p><a href=\"http://yifeng.studio/2017/09/06/recommended-extension-tools-about-github/\" target=\"_blank\" rel=\"noopener\">强力推荐！那些你不能错过的 GitHub 插件和工具</a></p>\n</blockquote>\n<h2 id=\"Save-to-Pocket\"><a href=\"#Save-to-Pocket\" class=\"headerlink\" title=\"Save to Pocket\"></a>Save to Pocket</h2><blockquote>\n<p>The best way to save articles, videos and more</p>\n</blockquote>"},{"title":"Windows","_content":"\n## 激活\n\n> [win10专业版激活方法——亲测可行！！！](https://blog.csdn.net/AinUser/article/details/79247841)\n\n## 快速打开\n\n### 控制面板\n\n1. `Win + R`\n2. 输入`control.exe`\n3. 回车\n\n### 系统属性\n\n1. `Win + R`\n2. 输入`sysdm.cpl`\n3. 回车\n\n### 计算器\n\n1. Win + R`\n2. 输入`cacl`\n3. 回车\n\n## 自动隐藏任务栏\n\n设置>任务栏>勾选自动隐藏任务栏\n\n![](https://i.loli.net/2018/12/23/5c1f24bb8cc78.jpg)\n\n","source":"_posts/Windows.md","raw":"---\ntitle: Windows\ncategories:\n - Windows\ntags:\n - Windows\n---\n\n## 激活\n\n> [win10专业版激活方法——亲测可行！！！](https://blog.csdn.net/AinUser/article/details/79247841)\n\n## 快速打开\n\n### 控制面板\n\n1. `Win + R`\n2. 输入`control.exe`\n3. 回车\n\n### 系统属性\n\n1. `Win + R`\n2. 输入`sysdm.cpl`\n3. 回车\n\n### 计算器\n\n1. Win + R`\n2. 输入`cacl`\n3. 回车\n\n## 自动隐藏任务栏\n\n设置>任务栏>勾选自动隐藏任务栏\n\n![](https://i.loli.net/2018/12/23/5c1f24bb8cc78.jpg)\n\n","slug":"Windows","published":1,"date":"2018-12-23T02:23:06.155Z","updated":"2019-01-02T23:56:09.660Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23dae0008wsw2get7gwfj","content":"<h2 id=\"激活\"><a href=\"#激活\" class=\"headerlink\" title=\"激活\"></a>激活</h2><blockquote>\n<p><a href=\"https://blog.csdn.net/AinUser/article/details/79247841\" target=\"_blank\" rel=\"noopener\">win10专业版激活方法——亲测可行！！！</a></p>\n</blockquote>\n<h2 id=\"快速打开\"><a href=\"#快速打开\" class=\"headerlink\" title=\"快速打开\"></a>快速打开</h2><h3 id=\"控制面板\"><a href=\"#控制面板\" class=\"headerlink\" title=\"控制面板\"></a>控制面板</h3><ol>\n<li><code>Win + R</code></li>\n<li>输入<code>control.exe</code></li>\n<li>回车</li>\n</ol>\n<h3 id=\"系统属性\"><a href=\"#系统属性\" class=\"headerlink\" title=\"系统属性\"></a>系统属性</h3><ol>\n<li><code>Win + R</code></li>\n<li>输入<code>sysdm.cpl</code></li>\n<li>回车</li>\n</ol>\n<h3 id=\"计算器\"><a href=\"#计算器\" class=\"headerlink\" title=\"计算器\"></a>计算器</h3><ol>\n<li>Win + R`</li>\n<li>输入<code>cacl</code></li>\n<li>回车</li>\n</ol>\n<h2 id=\"自动隐藏任务栏\"><a href=\"#自动隐藏任务栏\" class=\"headerlink\" title=\"自动隐藏任务栏\"></a>自动隐藏任务栏</h2><p>设置&gt;任务栏&gt;勾选自动隐藏任务栏</p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1f24bb8cc78.jpg\" alt=\"\"></p>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":"<h2 id=\"激活\"><a href=\"#激活\" class=\"headerlink\" title=\"激活\"></a>激活</h2><blockquote>\n<p><a href=\"https://blog.csdn.net/AinUser/article/details/79247841\" target=\"_blank\" rel=\"noopener\">win10专业版激活方法——亲测可行！！！</a></p>\n</blockquote>\n<h2 id=\"快速打开\"><a href=\"#快速打开\" class=\"headerlink\" title=\"快速打开\"></a>快速打开</h2><h3 id=\"控制面板\"><a href=\"#控制面板\" class=\"headerlink\" title=\"控制面板\"></a>控制面板</h3><ol>\n<li><code>Win + R</code></li>\n<li>输入<code>control.exe</code></li>\n<li>回车</li>\n</ol>\n<h3 id=\"系统属性\"><a href=\"#系统属性\" class=\"headerlink\" title=\"系统属性\"></a>系统属性</h3><ol>\n<li><code>Win + R</code></li>\n<li>输入<code>sysdm.cpl</code></li>\n<li>回车</li>\n</ol>\n<h3 id=\"计算器\"><a href=\"#计算器\" class=\"headerlink\" title=\"计算器\"></a>计算器</h3><ol>\n<li>Win + R`</li>\n<li>输入<code>cacl</code></li>\n<li>回车</li>\n</ol>\n<h2 id=\"自动隐藏任务栏\"><a href=\"#自动隐藏任务栏\" class=\"headerlink\" title=\"自动隐藏任务栏\"></a>自动隐藏任务栏</h2><p>设置&gt;任务栏&gt;勾选自动隐藏任务栏</p>\n<p><img src=\"https://i.loli.net/2018/12/23/5c1f24bb8cc78.jpg\" alt=\"\"></p>\n"},{"title":"Hello World","_content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","source":"_posts/hello-world.md","raw":"---\ntitle: Hello World\n---\nWelcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/deployment.html)\n","slug":"hello-world","published":1,"date":"2018-12-22T13:33:44.399Z","updated":"2018-12-22T13:33:44.399Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23day0009wsw24hu0je33","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n"},{"title":"GitHub Pages+Hexo+NexT","_content":"\n> 环境：\n>\n> node.js\t10.14.2\n>\n> npm \t6.4.1\n>\n> hexo\t3.8.0\n>\n> NexT\t6.6.0\n\n<!-- more -->\n\n# Hexo常用命令\n\n> [Hexo 最常用的几个命令](http://moxfive.xyz/2015/12/21/common-hexo-commands/)\n>\n> [Hexo命令速记](http://tietang.wang/2016/02/21/%E6%8A%80%E6%9C%AF/Hexo/Hexo%E5%91%BD%E4%BB%A4%E9%80%9F%E8%AE%B0/)\n\n`hexo clean && hexo g && hexo s -s`\n\n# NexT 主题的使用\n\n> [hexo-theme-next](https://github.com/theme-next/hexo-theme-next)\n>\n> [Theme NexT](https://theme-next.org/)\n\n推荐新入坑的兄弟使用[第一种方式](https://theme-next.org/docs/getting-started/installation/#download-next-3)来获取NexT主题。\n\n## 主题配置文件\n\n[Data Files](https://theme-next.org/docs/getting-started/data-files/)\n\n为了以后平滑升级，使用Hexo3.0的Data Files方式\n\n### [NexT-Way](https://theme-next.org/docs/getting-started/data-files/#option-2)\n\n1. 在`hexo/source/_data`目录（没有的话新建一个）下新建`next.yml`文件。\n2. 把**主题配置文件**中的选项全部 copy 到`next.yml`中。\n3. 在`next.yml`文件中设置`override`选项为`true`。\n4. 在**站点配置文件**中修改`theme`选项为`next`\n\n## 主题设置\n\n> [开始使用](https://theme-next.iissnan.com/getting-started.html)\n\n## 主题优化\n\n### 头像旋转\n\n> [Hexo Next 头像圆形并旋转](http://www.iooeo.com/2017/07/20/Hexo-Next-%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E5%B9%B6%E6%97%8B%E8%BD%AC/)\n\n注意[stylus中文版参考文档之注释(Comments)](https://www.zhangxinxu.com/jq/stylus/comments.php)\n\n单行注释使用`//`,多行使用`/* */`\n\n修改`/themes/next/source/css/_common/components/sidebar/sidebar-author.styl`如下：\n\n```stylus\n.site-author-image {\n  display: block;\n  margin: 0 auto;\n  padding: $site-author-image-padding;\n  max-width: $site-author-image-width;\n  height: $site-author-image-height;\n  border: $site-author-image-border-width solid $site-author-image-border-color;\n  opacity: hexo-config('avatar.opacity') is a 'unit' ? hexo-config('avatar.opacity') : 1;\n  // 头像圆形样式\n  /* start */\n  border-radius: 50%\n  webkit-transition: 1.4s all;\n  moz-transition: 1.4s all;\n  ms-transition: 1.4s all;\n  transition: 1.4s all;\n  /* end */\n}\n\nif hexo-config('avatar.rounded') {\n.site-author-image {\n  border-radius: 100%;\n}\n}\n\nif hexo-config('avatar.rotated') {\n.site-author-image {\n  -webkit-transition: -webkit-transform 1.0s ease-out;\n  -moz-transition: -moz-transform 1.0s ease-out;\n  -ms-transition: -ms-transform 1.0s ease-out;\n  transition: transform 1.0s ease-out;\n}\n\n.site-author-image:hover {\n  -webkit-transform: rotateZ(360deg);\n  -moz-transform: rotateZ(360deg);\n  -ms-transform: rotate(360deg);\n  transform: rotateZ(360deg);\n}\n}\n\n.site-author-name {\n  margin: $site-author-name-margin;\n  text-align: $site-author-name-align;\n  color: $site-author-name-color;\n  font-weight: $site-author-name-weight;\n}\n\n.site-description {\n  margin-top: $site-description-margin-top;\n  text-align: $site-description-align;\n  font-size: $site-description-font-size;\n  color: $site-description-color;\n}\n\n// 头像旋转事件\n/* start */\n.site-author-image:hover {\n  background-color: #55DAE1;\n  webkit-transform: rotate(360deg) scale(1.1);\n  moz-transform: rotate(360deg) scale(1.1);\n  ms-transform: rotate(360deg) scale(1.1);\n  transform: rotate(360deg) scale(1.1);\n}\n/* end */\n```\n\n### 文章底部带#号的标签\n\n> [文章底部带#号的标签](https://blog.csdn.net/qq_32454537/article/details/79482896#t11)\n\n修改模板`/themes/next/layout/_macro/post.swig`，搜索 `rel=\"tag\">#`，将`#`换成`<i class=\"fa fa-tag\"></i>`\n\n### 在每篇文章末尾统一添加“本文结束”标记\n\n> [在每篇文章末尾统一添加“本文结束](https://blog.csdn.net/qq_32454537/article/details/79482896#t12)\n\n1. 在路径` \\themes\\next\\layout\\_macro `中新建` passage-end-tag.swig `文件,并添加以下内容：\n\n```html\n<div>\n{% if not is_index %}\n    <div style=\"text-align:center;color: #ccc;font-size:14px;\">-------------本文结束<i class=\"fa fa-paw\"></i>感谢您的阅读-------------</div>\n{% endif %}\n</div>\n```\n\n2. 打开`\\themes\\next\\layout\\_macro\\post.swig`文件，在`END POST BLOCK `之后， 添加以下代码：\n\n```html\n<div>\n\t{% if not is_index %}\n\t\t{% include 'passage-end-tag.swig' %}\n\t{% endif %}\n</div>\n```\n\n3. 打开**主题配置文件**`next.yml`,在末尾添加：\n\n```yaml\n# 文章末尾添加“本文结束”标记\npassage_end_tag:\n  enabled: true\n```\n\n### 主页文章加阴影\n\n>  [主页文章加阴影](https://blog.csdn.net/qq_32454537/article/details/79482896#t14)\n\n打开`\\themes\\next\\source\\css\\_custom\\custom.styl`,向里面加入：\n\n```css\n// 主页文章添加阴影效果\n.post {\nmargin-top: 60px;\nmargin-bottom: 60px;\npadding: 25px;\n-webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);\n-moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);\n}\n```\n\n### 显示文章更新时间\n\n修改**主题配置文件**的\n\n```yaml\npost_meta:\n  updated_at:\n    enabled: true\n```\n\n要想具体显示到时分秒,则修改**站点配置文件**的\n\n```yaml\ndate_format: YYYY-MM-DD HH:mm:ss\n```\n\n### 代码添加复制按钮\n\n> [Hexo NexT主题代码块添加复制功能](http://www.missfli.com/2018/06/19/github-hexo-next-08.html)\n\n1. [下载](https://clipboardjs.com/)`clipboard.js`\n\n2. 保存文件`clipboard.min.js` 到目录`\\themes\\next\\source\\js\\src`\n\n3. 在`.\\themes\\next\\source\\js\\src`目录下，创建`clipboard-use.js`，文件内容如下：\n\n   ```js\n   /*页面载入完成后，创建复制按钮*/\n   !function (e, t, a) { \n     /* code */\n     var initCopyCode = function(){\n       var copyHtml = '';\n       copyHtml += '<button class=\"btn-copy\" data-clipboard-snippet=\"\">';\n       copyHtml += '  <i class=\"fa fa-globe\"></i><span>copy</span>';\n       copyHtml += '</button>';\n       $(\".highlight .code pre\").before(copyHtml);\n       new ClipboardJS('.btn-copy', {\n           target: function(trigger) {\n               return trigger.nextElementSibling;\n           }\n       });\n     }\n     initCopyCode();\n   }(window, document);\n   ```\n\n4. 在`.\\themes\\next\\source\\css\\_custom\\custom.styl`样式文件中添加下面代码：\n\n   ```stylus\n   //代码块复制按钮\n   .highlight{\n     //方便copy代码按钮（btn-copy）的定位\n     position: relative;\n   }\n   .btn-copy {\n       display: inline-block;\n       cursor: pointer;\n       background-color: #eee;\n       background-image: linear-gradient(#fcfcfc,#eee);\n       border: 1px solid #d5d5d5;\n       border-radius: 3px;\n       -webkit-user-select: none;\n       -moz-user-select: none;\n       -ms-user-select: none;\n       user-select: none;\n       -webkit-appearance: none;\n       font-size: 13px;\n       font-weight: 700;\n       line-height: 20px;\n       color: #333;\n       -webkit-transition: opacity .3s ease-in-out;\n       -o-transition: opacity .3s ease-in-out;\n       transition: opacity .3s ease-in-out;\n       padding: 2px 6px;\n       position: absolute;\n       right: 5px;\n       top: 5px;\n       opacity: 0;\n   }\n   .btn-copy span {\n       margin-left: 5px;\n   }\n   .highlight:hover .btn-copy{\n     opacity: 1;\n   }\n   ```\n\n5. 在`.\\themes\\next\\layout\\_layout.swig`文件中，添加引用（注：在 swig 末尾或 body 结束标签（`</body>`）之前添加）：\n\n   ```js\n   <!-- 代码块复制功能 -->\n   <script type=\"text/javascript\" src=\"/js/src/clipboard.min.js\"></script>  \n   <script type=\"text/javascript\" src=\"/js/src/clipboard-use.js\"></script>\n   ```\n\n### 文章加密\n\n> [hexo-blog-encrypt](https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md)\n\n1. `npm install --save hexo-blog-encrypt`\n\n2. 在**站点配置文件**下添加如下配置：\n\n   ```yaml\n   encrypt:\n       enable: true\n   ```\n\n3. 在需要加密的文章的头部添加上对应的字段，如 password, abstract, message\n\n   ```yaml\n   ---\n   password: Mike\n   abstract: Welcome to my blog, enter password to read.\n   message: Welcome to my blog, enter password to read.\n   ---\n   ```\n\n### 二次元看板娘\n\n> [hexo-helper-live2d](https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md)\n\n1. `npm install --save hexo-helper-live2d`\n\n2. `npm install --save live2d-widget-model-wanko`\n\n3. 向**站点配置文件**中添加如下配置：\n\n   ```yaml\n   live2d:\n     enable: true\n     scriptFrom: local\n     pluginRootPath: live2dw/\n     pluginJsPath: lib/\n     pluginModelPath: assets/\n     tagMode: false\n     debug: false\n     model:\n       use: live2d-widget-model-wanko\n     display:\n       position: right\n       width: 150\n       height: 300\n     mobile:\n       show: true\n   ```\n\n   注：在`next.yml`中配置时，`width, height`等参数不起作用。\n\n### 加载条\n\n> [Load bar at the top for NexT](https://github.com/theme-next/theme-next-pace)\n\n1. 将`theme-next-pace`克隆到本地一个空目录里。\n2. 删掉`pace`目录下的`.git`文件夹\n3. 将`pace`目录 copy 到`themes/next/source/lib`目录下\n4. 修改**主题配置文件**`next.yml`的`pace`属性值为`true`\n\n### 显示文章浏览进度百分比\n\n在**主题配置文件**中修改属性`sidebar`下`scrollpercent`的值为`true`\n\n### 文章预览\n\n在文章中使用截断标记`<!-- more -->`手动指定文章预览的内容。\n\n### 评论系统\n\n#### Gitalk\n\n> [在hexo next主题上使用gitalk](https://github.com/gitalk/gitalk/wiki/%E5%9C%A8hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8A%E4%BD%BF%E7%94%A8gitalk)\n>\n> [Hexo NexT主题中集成gitalk评论系统](https://asdfv1929.github.io/2018/01/20/gitalk/)\n\n1. Click here to sign up for a [new OAuth Application](https://github.com/settings/applications/new)\n\n   Application name： # 应用名称，随意，如`gitalk`\n   Homepage URL： # 网站URL，如`https://username.github.io`,`username`是 GitHub 账户名\n   Application description # 描述，随意，如`Comment System for Blog`\n   Authorization callback URL：# 网站URL，`https://username.github.io`,`username`是 GitHub 账户名\n\n2. 修改**主题配置文件**中的如下属性\n\n   ```yaml\n   # Gitalk \n   # Demo: https://gitalk.github.io\n   # Reference: https://asdfv1929.github.io/2018/01/20/gitalk/, https://liujunzhou.cn/2018/8/10/gitalk-error/#more\n   gitalk:\n     enable: true\n     github_id: username # Github repo owner\n     repo: gitalk # Repository name to store issues.\n     client_id: ****** # Github Application Client ID\n     client_secret: ****** # Github Application Client Secret\n     admin_user: gzhennaxia # GitHub repo owner and collaborators, only these guys can initialize github issues\n     distraction_free_mode: true # Facebook-like distraction free mode\n   ```\n\n#### Valine\n\n> [Comment Systems Valine](https://theme-next.org/docs/third-party-services/comments-and-widgets/#Valine)\n\n1. Create an account or log into [LeanCloud](https://leancloud.cn/dashboard/login.html#/signin), and then click on the bottom left corner to [create the application](https://leancloud.cn/dashboard/applist.html#/newapp) in [dashboard](https://leancloud.cn/dashboard/applist.html#/apps).\n\n2. Go to the application you just created, select `Settings -> Apply Key` in the lower left corner, and you will see your `APP ID` and `APP Key`.\n\n3. Set the value `enable` to `true`, add the obtained APP ID (`appid`) and APP Key (`appkey`), and edit other configurations in `valine` section in the theme config file as following:\n\n   ```yaml\n   # Valine.\n   # You can get your appid and appkey from https://leancloud.cn\n   # more info please open https://valine.js.org\n   valine:\n     enable: true # When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.\n     appid: ****** # your leancloud application appid\n     appkey: ****** # your leancloud application appkey\n     notify: false # mail notifier , https://github.com/xCss/Valine/wiki\n     verify: false # Verification code\n     placeholder: Just go go # comment box placeholder\n     avatar: mm # gravatar style\n     guest_info: nick,mail,link # custom comment header\n     pageSize: 10 # pagination size\n     visitor: false # leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html\n   ```\n\n#### Gitalk + Valine双评论系统\n\n在完成各自配置后对`themes\\next\\layout\\_partials\\comments.swig`做如下修改：\n\n**Before**\n\n```html\n{% elseif theme.valine.enable and theme.valine.appid and theme.valine.appkey %}\n\t<div class=\"comments\" id=\"comments\">\n\t</div>\n\n{% elseif theme.gitalk.enable %}\n\t<div id=\"gitalk-container\">\n\t</div>\n```\n\n**After**\n\n```html\n{% elseif theme.gitalk.enable %}\n    <div id=\"gitalk-container\">\n    </div>\n\t{% if theme.valine.enable and theme.valine.appid and theme.valine.appkey %}\n\t\t<div class=\"comments\" id=\"comments\">\n\t\t</div>\n\t{% endif %}\n```\n\n### 自动部署\n\n> [Continuous Integration](https://theme-next.org/docs/getting-started/deployment/#Continuous-Integration)\n\n\n\n# 踩坑记录\n\n## npm install warnings\n\n> [npm install warnings](https://github.com/Zulko/eagle.js/issues/35)\n\n```shell\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/hexo-cli/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n```\n\n### 解决方法\n\n忽略就好\n\n## Hexo g error\n\n```shell\nERROR ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'\nError: ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'\n    at Object.openSync (fs.js:439:3)\n    at Object.readFileSync (fs.js:344:35)\n    at Object.ret.load (F:\\Hexo\\node_modules\\swig-templates\\lib\\loaders\\filesystem.js:59:15)\n    at exports.Swig.compileFile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:740:31)\n    at Object.eval [as tpl] (eval at precompile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:537:13), <anonymous>:7:18)\n    at compiled (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:664:18)\n    at Theme._View.View._compiled.locals [as _compiled] (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:125:48)\n    at Theme._View.View.View.render (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:30:15)\n    at route.set (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\index.js:394:29)\n    at tryCatcher (F:\\Hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)\n    at F:\\Hexo\\node_modules\\bluebird\\js\\release\\method.js:15:34\n    at RouteStream._read (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\router.js:134:3)\n    at RouteStream.Readable.read (_stream_readable.js:452:10)\n    at resume_ (_stream_readable.js:899:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)\n```\n\n### 场景再现\n\n从[releases](https://github.com/theme-next/hexo-theme-next/releases/tag/v6.6.0)下载的 NexT 主题，然后再通过修改目录名为`next`的方式使用该主题的时候，生成文件的时候报的错。\n\n### 报错原因\n\n未知\n\n### 解决方法\n\n> [Wget for windows——优雅地实现批量下载](https://zhuanlan.zhihu.com/p/28826000)\n\n换用[命令行](https://theme-next.org/docs/getting-started/installation/#download-next-3)下载的方式就不会报这个错了。\n","source":"_posts/GitHub Pages+Hexo+NexT.md","raw":"---\ntitle: GitHub Pages+Hexo+NexT\ncategories:\n - Blog\ntags:\n - GitHub Pages\n - Hexo\n - NexT\n---\n\n> 环境：\n>\n> node.js\t10.14.2\n>\n> npm \t6.4.1\n>\n> hexo\t3.8.0\n>\n> NexT\t6.6.0\n\n<!-- more -->\n\n# Hexo常用命令\n\n> [Hexo 最常用的几个命令](http://moxfive.xyz/2015/12/21/common-hexo-commands/)\n>\n> [Hexo命令速记](http://tietang.wang/2016/02/21/%E6%8A%80%E6%9C%AF/Hexo/Hexo%E5%91%BD%E4%BB%A4%E9%80%9F%E8%AE%B0/)\n\n`hexo clean && hexo g && hexo s -s`\n\n# NexT 主题的使用\n\n> [hexo-theme-next](https://github.com/theme-next/hexo-theme-next)\n>\n> [Theme NexT](https://theme-next.org/)\n\n推荐新入坑的兄弟使用[第一种方式](https://theme-next.org/docs/getting-started/installation/#download-next-3)来获取NexT主题。\n\n## 主题配置文件\n\n[Data Files](https://theme-next.org/docs/getting-started/data-files/)\n\n为了以后平滑升级，使用Hexo3.0的Data Files方式\n\n### [NexT-Way](https://theme-next.org/docs/getting-started/data-files/#option-2)\n\n1. 在`hexo/source/_data`目录（没有的话新建一个）下新建`next.yml`文件。\n2. 把**主题配置文件**中的选项全部 copy 到`next.yml`中。\n3. 在`next.yml`文件中设置`override`选项为`true`。\n4. 在**站点配置文件**中修改`theme`选项为`next`\n\n## 主题设置\n\n> [开始使用](https://theme-next.iissnan.com/getting-started.html)\n\n## 主题优化\n\n### 头像旋转\n\n> [Hexo Next 头像圆形并旋转](http://www.iooeo.com/2017/07/20/Hexo-Next-%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E5%B9%B6%E6%97%8B%E8%BD%AC/)\n\n注意[stylus中文版参考文档之注释(Comments)](https://www.zhangxinxu.com/jq/stylus/comments.php)\n\n单行注释使用`//`,多行使用`/* */`\n\n修改`/themes/next/source/css/_common/components/sidebar/sidebar-author.styl`如下：\n\n```stylus\n.site-author-image {\n  display: block;\n  margin: 0 auto;\n  padding: $site-author-image-padding;\n  max-width: $site-author-image-width;\n  height: $site-author-image-height;\n  border: $site-author-image-border-width solid $site-author-image-border-color;\n  opacity: hexo-config('avatar.opacity') is a 'unit' ? hexo-config('avatar.opacity') : 1;\n  // 头像圆形样式\n  /* start */\n  border-radius: 50%\n  webkit-transition: 1.4s all;\n  moz-transition: 1.4s all;\n  ms-transition: 1.4s all;\n  transition: 1.4s all;\n  /* end */\n}\n\nif hexo-config('avatar.rounded') {\n.site-author-image {\n  border-radius: 100%;\n}\n}\n\nif hexo-config('avatar.rotated') {\n.site-author-image {\n  -webkit-transition: -webkit-transform 1.0s ease-out;\n  -moz-transition: -moz-transform 1.0s ease-out;\n  -ms-transition: -ms-transform 1.0s ease-out;\n  transition: transform 1.0s ease-out;\n}\n\n.site-author-image:hover {\n  -webkit-transform: rotateZ(360deg);\n  -moz-transform: rotateZ(360deg);\n  -ms-transform: rotate(360deg);\n  transform: rotateZ(360deg);\n}\n}\n\n.site-author-name {\n  margin: $site-author-name-margin;\n  text-align: $site-author-name-align;\n  color: $site-author-name-color;\n  font-weight: $site-author-name-weight;\n}\n\n.site-description {\n  margin-top: $site-description-margin-top;\n  text-align: $site-description-align;\n  font-size: $site-description-font-size;\n  color: $site-description-color;\n}\n\n// 头像旋转事件\n/* start */\n.site-author-image:hover {\n  background-color: #55DAE1;\n  webkit-transform: rotate(360deg) scale(1.1);\n  moz-transform: rotate(360deg) scale(1.1);\n  ms-transform: rotate(360deg) scale(1.1);\n  transform: rotate(360deg) scale(1.1);\n}\n/* end */\n```\n\n### 文章底部带#号的标签\n\n> [文章底部带#号的标签](https://blog.csdn.net/qq_32454537/article/details/79482896#t11)\n\n修改模板`/themes/next/layout/_macro/post.swig`，搜索 `rel=\"tag\">#`，将`#`换成`<i class=\"fa fa-tag\"></i>`\n\n### 在每篇文章末尾统一添加“本文结束”标记\n\n> [在每篇文章末尾统一添加“本文结束](https://blog.csdn.net/qq_32454537/article/details/79482896#t12)\n\n1. 在路径` \\themes\\next\\layout\\_macro `中新建` passage-end-tag.swig `文件,并添加以下内容：\n\n```html\n<div>\n{% if not is_index %}\n    <div style=\"text-align:center;color: #ccc;font-size:14px;\">-------------本文结束<i class=\"fa fa-paw\"></i>感谢您的阅读-------------</div>\n{% endif %}\n</div>\n```\n\n2. 打开`\\themes\\next\\layout\\_macro\\post.swig`文件，在`END POST BLOCK `之后， 添加以下代码：\n\n```html\n<div>\n\t{% if not is_index %}\n\t\t{% include 'passage-end-tag.swig' %}\n\t{% endif %}\n</div>\n```\n\n3. 打开**主题配置文件**`next.yml`,在末尾添加：\n\n```yaml\n# 文章末尾添加“本文结束”标记\npassage_end_tag:\n  enabled: true\n```\n\n### 主页文章加阴影\n\n>  [主页文章加阴影](https://blog.csdn.net/qq_32454537/article/details/79482896#t14)\n\n打开`\\themes\\next\\source\\css\\_custom\\custom.styl`,向里面加入：\n\n```css\n// 主页文章添加阴影效果\n.post {\nmargin-top: 60px;\nmargin-bottom: 60px;\npadding: 25px;\n-webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5);\n-moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5);\n}\n```\n\n### 显示文章更新时间\n\n修改**主题配置文件**的\n\n```yaml\npost_meta:\n  updated_at:\n    enabled: true\n```\n\n要想具体显示到时分秒,则修改**站点配置文件**的\n\n```yaml\ndate_format: YYYY-MM-DD HH:mm:ss\n```\n\n### 代码添加复制按钮\n\n> [Hexo NexT主题代码块添加复制功能](http://www.missfli.com/2018/06/19/github-hexo-next-08.html)\n\n1. [下载](https://clipboardjs.com/)`clipboard.js`\n\n2. 保存文件`clipboard.min.js` 到目录`\\themes\\next\\source\\js\\src`\n\n3. 在`.\\themes\\next\\source\\js\\src`目录下，创建`clipboard-use.js`，文件内容如下：\n\n   ```js\n   /*页面载入完成后，创建复制按钮*/\n   !function (e, t, a) { \n     /* code */\n     var initCopyCode = function(){\n       var copyHtml = '';\n       copyHtml += '<button class=\"btn-copy\" data-clipboard-snippet=\"\">';\n       copyHtml += '  <i class=\"fa fa-globe\"></i><span>copy</span>';\n       copyHtml += '</button>';\n       $(\".highlight .code pre\").before(copyHtml);\n       new ClipboardJS('.btn-copy', {\n           target: function(trigger) {\n               return trigger.nextElementSibling;\n           }\n       });\n     }\n     initCopyCode();\n   }(window, document);\n   ```\n\n4. 在`.\\themes\\next\\source\\css\\_custom\\custom.styl`样式文件中添加下面代码：\n\n   ```stylus\n   //代码块复制按钮\n   .highlight{\n     //方便copy代码按钮（btn-copy）的定位\n     position: relative;\n   }\n   .btn-copy {\n       display: inline-block;\n       cursor: pointer;\n       background-color: #eee;\n       background-image: linear-gradient(#fcfcfc,#eee);\n       border: 1px solid #d5d5d5;\n       border-radius: 3px;\n       -webkit-user-select: none;\n       -moz-user-select: none;\n       -ms-user-select: none;\n       user-select: none;\n       -webkit-appearance: none;\n       font-size: 13px;\n       font-weight: 700;\n       line-height: 20px;\n       color: #333;\n       -webkit-transition: opacity .3s ease-in-out;\n       -o-transition: opacity .3s ease-in-out;\n       transition: opacity .3s ease-in-out;\n       padding: 2px 6px;\n       position: absolute;\n       right: 5px;\n       top: 5px;\n       opacity: 0;\n   }\n   .btn-copy span {\n       margin-left: 5px;\n   }\n   .highlight:hover .btn-copy{\n     opacity: 1;\n   }\n   ```\n\n5. 在`.\\themes\\next\\layout\\_layout.swig`文件中，添加引用（注：在 swig 末尾或 body 结束标签（`</body>`）之前添加）：\n\n   ```js\n   <!-- 代码块复制功能 -->\n   <script type=\"text/javascript\" src=\"/js/src/clipboard.min.js\"></script>  \n   <script type=\"text/javascript\" src=\"/js/src/clipboard-use.js\"></script>\n   ```\n\n### 文章加密\n\n> [hexo-blog-encrypt](https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md)\n\n1. `npm install --save hexo-blog-encrypt`\n\n2. 在**站点配置文件**下添加如下配置：\n\n   ```yaml\n   encrypt:\n       enable: true\n   ```\n\n3. 在需要加密的文章的头部添加上对应的字段，如 password, abstract, message\n\n   ```yaml\n   ---\n   password: Mike\n   abstract: Welcome to my blog, enter password to read.\n   message: Welcome to my blog, enter password to read.\n   ---\n   ```\n\n### 二次元看板娘\n\n> [hexo-helper-live2d](https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md)\n\n1. `npm install --save hexo-helper-live2d`\n\n2. `npm install --save live2d-widget-model-wanko`\n\n3. 向**站点配置文件**中添加如下配置：\n\n   ```yaml\n   live2d:\n     enable: true\n     scriptFrom: local\n     pluginRootPath: live2dw/\n     pluginJsPath: lib/\n     pluginModelPath: assets/\n     tagMode: false\n     debug: false\n     model:\n       use: live2d-widget-model-wanko\n     display:\n       position: right\n       width: 150\n       height: 300\n     mobile:\n       show: true\n   ```\n\n   注：在`next.yml`中配置时，`width, height`等参数不起作用。\n\n### 加载条\n\n> [Load bar at the top for NexT](https://github.com/theme-next/theme-next-pace)\n\n1. 将`theme-next-pace`克隆到本地一个空目录里。\n2. 删掉`pace`目录下的`.git`文件夹\n3. 将`pace`目录 copy 到`themes/next/source/lib`目录下\n4. 修改**主题配置文件**`next.yml`的`pace`属性值为`true`\n\n### 显示文章浏览进度百分比\n\n在**主题配置文件**中修改属性`sidebar`下`scrollpercent`的值为`true`\n\n### 文章预览\n\n在文章中使用截断标记`<!-- more -->`手动指定文章预览的内容。\n\n### 评论系统\n\n#### Gitalk\n\n> [在hexo next主题上使用gitalk](https://github.com/gitalk/gitalk/wiki/%E5%9C%A8hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8A%E4%BD%BF%E7%94%A8gitalk)\n>\n> [Hexo NexT主题中集成gitalk评论系统](https://asdfv1929.github.io/2018/01/20/gitalk/)\n\n1. Click here to sign up for a [new OAuth Application](https://github.com/settings/applications/new)\n\n   Application name： # 应用名称，随意，如`gitalk`\n   Homepage URL： # 网站URL，如`https://username.github.io`,`username`是 GitHub 账户名\n   Application description # 描述，随意，如`Comment System for Blog`\n   Authorization callback URL：# 网站URL，`https://username.github.io`,`username`是 GitHub 账户名\n\n2. 修改**主题配置文件**中的如下属性\n\n   ```yaml\n   # Gitalk \n   # Demo: https://gitalk.github.io\n   # Reference: https://asdfv1929.github.io/2018/01/20/gitalk/, https://liujunzhou.cn/2018/8/10/gitalk-error/#more\n   gitalk:\n     enable: true\n     github_id: username # Github repo owner\n     repo: gitalk # Repository name to store issues.\n     client_id: ****** # Github Application Client ID\n     client_secret: ****** # Github Application Client Secret\n     admin_user: gzhennaxia # GitHub repo owner and collaborators, only these guys can initialize github issues\n     distraction_free_mode: true # Facebook-like distraction free mode\n   ```\n\n#### Valine\n\n> [Comment Systems Valine](https://theme-next.org/docs/third-party-services/comments-and-widgets/#Valine)\n\n1. Create an account or log into [LeanCloud](https://leancloud.cn/dashboard/login.html#/signin), and then click on the bottom left corner to [create the application](https://leancloud.cn/dashboard/applist.html#/newapp) in [dashboard](https://leancloud.cn/dashboard/applist.html#/apps).\n\n2. Go to the application you just created, select `Settings -> Apply Key` in the lower left corner, and you will see your `APP ID` and `APP Key`.\n\n3. Set the value `enable` to `true`, add the obtained APP ID (`appid`) and APP Key (`appkey`), and edit other configurations in `valine` section in the theme config file as following:\n\n   ```yaml\n   # Valine.\n   # You can get your appid and appkey from https://leancloud.cn\n   # more info please open https://valine.js.org\n   valine:\n     enable: true # When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.\n     appid: ****** # your leancloud application appid\n     appkey: ****** # your leancloud application appkey\n     notify: false # mail notifier , https://github.com/xCss/Valine/wiki\n     verify: false # Verification code\n     placeholder: Just go go # comment box placeholder\n     avatar: mm # gravatar style\n     guest_info: nick,mail,link # custom comment header\n     pageSize: 10 # pagination size\n     visitor: false # leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html\n   ```\n\n#### Gitalk + Valine双评论系统\n\n在完成各自配置后对`themes\\next\\layout\\_partials\\comments.swig`做如下修改：\n\n**Before**\n\n```html\n{% elseif theme.valine.enable and theme.valine.appid and theme.valine.appkey %}\n\t<div class=\"comments\" id=\"comments\">\n\t</div>\n\n{% elseif theme.gitalk.enable %}\n\t<div id=\"gitalk-container\">\n\t</div>\n```\n\n**After**\n\n```html\n{% elseif theme.gitalk.enable %}\n    <div id=\"gitalk-container\">\n    </div>\n\t{% if theme.valine.enable and theme.valine.appid and theme.valine.appkey %}\n\t\t<div class=\"comments\" id=\"comments\">\n\t\t</div>\n\t{% endif %}\n```\n\n### 自动部署\n\n> [Continuous Integration](https://theme-next.org/docs/getting-started/deployment/#Continuous-Integration)\n\n\n\n# 踩坑记录\n\n## npm install warnings\n\n> [npm install warnings](https://github.com/Zulko/eagle.js/issues/35)\n\n```shell\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/hexo-cli/node_modules/fsevents):\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted {\"os\":\"darwin\",\"arch\":\"any\"} (current: {\"os\":\"linux\",\"arch\":\"x64\"})\n```\n\n### 解决方法\n\n忽略就好\n\n## Hexo g error\n\n```shell\nERROR ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'\nError: ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'\n    at Object.openSync (fs.js:439:3)\n    at Object.readFileSync (fs.js:344:35)\n    at Object.ret.load (F:\\Hexo\\node_modules\\swig-templates\\lib\\loaders\\filesystem.js:59:15)\n    at exports.Swig.compileFile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:740:31)\n    at Object.eval [as tpl] (eval at precompile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:537:13), <anonymous>:7:18)\n    at compiled (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:664:18)\n    at Theme._View.View._compiled.locals [as _compiled] (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:125:48)\n    at Theme._View.View.View.render (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:30:15)\n    at route.set (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\index.js:394:29)\n    at tryCatcher (F:\\Hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)\n    at F:\\Hexo\\node_modules\\bluebird\\js\\release\\method.js:15:34\n    at RouteStream._read (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\router.js:134:3)\n    at RouteStream.Readable.read (_stream_readable.js:452:10)\n    at resume_ (_stream_readable.js:899:12)\n    at process._tickCallback (internal/process/next_tick.js:63:19)\n```\n\n### 场景再现\n\n从[releases](https://github.com/theme-next/hexo-theme-next/releases/tag/v6.6.0)下载的 NexT 主题，然后再通过修改目录名为`next`的方式使用该主题的时候，生成文件的时候报的错。\n\n### 报错原因\n\n未知\n\n### 解决方法\n\n> [Wget for windows——优雅地实现批量下载](https://zhuanlan.zhihu.com/p/28826000)\n\n换用[命令行](https://theme-next.org/docs/getting-started/installation/#download-next-3)下载的方式就不会报这个错了。\n","slug":"GitHub Pages+Hexo+NexT","published":1,"date":"2018-12-23T06:21:32.050Z","updated":"2018-12-25T15:37:15.838Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23dlq000owsw2thcwki1e","content":"<blockquote>\n<p>环境：</p>\n<p>node.js    10.14.2</p>\n<p>npm     6.4.1</p>\n<p>hexo    3.8.0</p>\n<p>NexT    6.6.0</p>\n</blockquote>\n<a id=\"more\"></a>\n<h1 id=\"Hexo常用命令\"><a href=\"#Hexo常用命令\" class=\"headerlink\" title=\"Hexo常用命令\"></a>Hexo常用命令</h1><blockquote>\n<p><a href=\"http://moxfive.xyz/2015/12/21/common-hexo-commands/\" target=\"_blank\" rel=\"noopener\">Hexo 最常用的几个命令</a></p>\n<p><a href=\"http://tietang.wang/2016/02/21/%E6%8A%80%E6%9C%AF/Hexo/Hexo%E5%91%BD%E4%BB%A4%E9%80%9F%E8%AE%B0/\" target=\"_blank\" rel=\"noopener\">Hexo命令速记</a></p>\n</blockquote>\n<p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s -s</code></p>\n<h1 id=\"NexT-主题的使用\"><a href=\"#NexT-主题的使用\" class=\"headerlink\" title=\"NexT 主题的使用\"></a>NexT 主题的使用</h1><blockquote>\n<p><a href=\"https://github.com/theme-next/hexo-theme-next\" target=\"_blank\" rel=\"noopener\">hexo-theme-next</a></p>\n<p><a href=\"https://theme-next.org/\" target=\"_blank\" rel=\"noopener\">Theme NexT</a></p>\n</blockquote>\n<p>推荐新入坑的兄弟使用<a href=\"https://theme-next.org/docs/getting-started/installation/#download-next-3\" target=\"_blank\" rel=\"noopener\">第一种方式</a>来获取NexT主题。</p>\n<h2 id=\"主题配置文件\"><a href=\"#主题配置文件\" class=\"headerlink\" title=\"主题配置文件\"></a>主题配置文件</h2><p><a href=\"https://theme-next.org/docs/getting-started/data-files/\" target=\"_blank\" rel=\"noopener\">Data Files</a></p>\n<p>为了以后平滑升级，使用Hexo3.0的Data Files方式</p>\n<h3 id=\"NexT-Way\"><a href=\"#NexT-Way\" class=\"headerlink\" title=\"NexT-Way\"></a><a href=\"https://theme-next.org/docs/getting-started/data-files/#option-2\" target=\"_blank\" rel=\"noopener\">NexT-Way</a></h3><ol>\n<li>在<code>hexo/source/_data</code>目录（没有的话新建一个）下新建<code>next.yml</code>文件。</li>\n<li>把<strong>主题配置文件</strong>中的选项全部 copy 到<code>next.yml</code>中。</li>\n<li>在<code>next.yml</code>文件中设置<code>override</code>选项为<code>true</code>。</li>\n<li>在<strong>站点配置文件</strong>中修改<code>theme</code>选项为<code>next</code></li>\n</ol>\n<h2 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h2><blockquote>\n<p><a href=\"https://theme-next.iissnan.com/getting-started.html\" target=\"_blank\" rel=\"noopener\">开始使用</a></p>\n</blockquote>\n<h2 id=\"主题优化\"><a href=\"#主题优化\" class=\"headerlink\" title=\"主题优化\"></a>主题优化</h2><h3 id=\"头像旋转\"><a href=\"#头像旋转\" class=\"headerlink\" title=\"头像旋转\"></a>头像旋转</h3><blockquote>\n<p><a href=\"http://www.iooeo.com/2017/07/20/Hexo-Next-%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E5%B9%B6%E6%97%8B%E8%BD%AC/\" target=\"_blank\" rel=\"noopener\">Hexo Next 头像圆形并旋转</a></p>\n</blockquote>\n<p>注意<a href=\"https://www.zhangxinxu.com/jq/stylus/comments.php\" target=\"_blank\" rel=\"noopener\">stylus中文版参考文档之注释(Comments)</a></p>\n<p>单行注释使用<code>//</code>,多行使用<code>/* */</code></p>\n<p>修改<code>/themes/next/source/css/_common/components/sidebar/sidebar-author.styl</code>如下：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"variable\">$site</span>-author-image-padding;</span><br><span class=\"line\">  <span class=\"attribute\">max-width</span>: <span class=\"variable\">$site</span>-author-image-width;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"variable\">$site</span>-author-image-height;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"variable\">$site</span>-author-image-border-width solid <span class=\"variable\">$site</span>-author-image-border-color;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: hexo-config(<span class=\"string\">'avatar.opacity'</span>) is a <span class=\"string\">'unit'</span> ? hexo-config(<span class=\"string\">'avatar.opacity'</span>) : <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 头像圆形样式</span></span><br><span class=\"line\">  <span class=\"comment\">/* start */</span></span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span></span><br><span class=\"line\">  webkit-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  moz-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  ms-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  <span class=\"comment\">/* end */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> hexo-config(<span class=\"string\">'avatar.rounded'</span>) &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> hexo-config(<span class=\"string\">'avatar.rotated'</span>) &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transition</span>: -webkit-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  -moz-<span class=\"attribute\">transition</span>: -moz-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  -ms-<span class=\"attribute\">transition</span>: -ms-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span>:hover &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  -moz-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  -ms-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-name</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"variable\">$site</span>-author-name-margin;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: <span class=\"variable\">$site</span>-author-name-align;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$site</span>-author-name-color;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"variable\">$site</span>-author-name-weight;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-description</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"variable\">$site</span>-description-margin-top;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: <span class=\"variable\">$site</span>-description-align;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"variable\">$site</span>-description-font-size;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$site</span>-description-color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 头像旋转事件</span></span><br><span class=\"line\"><span class=\"comment\">/* start */</span></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span>:hover &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#55DAE1</span>;</span><br><span class=\"line\">  webkit-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  moz-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  ms-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* end */</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"文章底部带-号的标签\"><a href=\"#文章底部带-号的标签\" class=\"headerlink\" title=\"文章底部带#号的标签\"></a>文章底部带#号的标签</h3><blockquote>\n<p><a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t11\" target=\"_blank\" rel=\"noopener\">文章底部带#号的标签</a></p>\n</blockquote>\n<p>修改模板<code>/themes/next/layout/_macro/post.swig</code>，搜索 <code>rel=&quot;tag&quot;&gt;#</code>，将<code>#</code>换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>\n<h3 id=\"在每篇文章末尾统一添加“本文结束”标记\"><a href=\"#在每篇文章末尾统一添加“本文结束”标记\" class=\"headerlink\" title=\"在每篇文章末尾统一添加“本文结束”标记\"></a>在每篇文章末尾统一添加“本文结束”标记</h3><blockquote>\n<p><a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t12\" target=\"_blank\" rel=\"noopener\">在每篇文章末尾统一添加“本文结束</a></p>\n</blockquote>\n<ol>\n<li>在路径<code>\\themes\\next\\layout\\_macro</code>中新建<code>passage-end-tag.swig</code>文件,并添加以下内容：</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% if not is_index %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"text-align:center;color: #ccc;font-size:14px;\"</span>&gt;</span>-------------本文结束<span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-paw\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span>感谢您的阅读-------------<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>打开<code>\\themes\\next\\layout\\_macro\\post.swig</code>文件，在<code>END POST BLOCK</code>之后， 添加以下代码：</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% if not is_index %&#125;</span><br><span class=\"line\">\t\t&#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class=\"line\">\t&#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>打开<strong>主题配置文件</strong><code>next.yml</code>,在末尾添加：</li>\n</ol>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 文章末尾添加“本文结束”标记</span></span><br><span class=\"line\"><span class=\"attr\">passage_end_tag:</span></span><br><span class=\"line\"><span class=\"attr\">  enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"主页文章加阴影\"><a href=\"#主页文章加阴影\" class=\"headerlink\" title=\"主页文章加阴影\"></a>主页文章加阴影</h3><blockquote>\n<p> <a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t14\" target=\"_blank\" rel=\"noopener\">主页文章加阴影</a></p>\n</blockquote>\n<p>打开<code>\\themes\\next\\source\\css\\_custom\\custom.styl</code>,向里面加入：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 主页文章添加阴影效果</span><br><span class=\"line\"><span class=\"selector-class\">.post</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">margin-top</span>: <span class=\"number\">60px</span>;</span><br><span class=\"line\"><span class=\"attribute\">margin-bottom</span>: <span class=\"number\">60px</span>;</span><br><span class=\"line\"><span class=\"attribute\">padding</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\"><span class=\"attribute\">-webkit-box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"built_in\">rgba</span>(202, 203, 203, .5);</span><br><span class=\"line\"><span class=\"attribute\">-moz-box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"built_in\">rgba</span>(202, 203, 204, .5);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"显示文章更新时间\"><a href=\"#显示文章更新时间\" class=\"headerlink\" title=\"显示文章更新时间\"></a>显示文章更新时间</h3><p>修改<strong>主题配置文件</strong>的</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_meta:</span></span><br><span class=\"line\"><span class=\"attr\">  updated_at:</span></span><br><span class=\"line\"><span class=\"attr\">    enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>要想具体显示到时分秒,则修改<strong>站点配置文件</strong>的</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">date_format:</span> <span class=\"string\">YYYY-MM-DD</span> <span class=\"attr\">HH:mm:ss</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"代码添加复制按钮\"><a href=\"#代码添加复制按钮\" class=\"headerlink\" title=\"代码添加复制按钮\"></a>代码添加复制按钮</h3><blockquote>\n<p><a href=\"http://www.missfli.com/2018/06/19/github-hexo-next-08.html\" target=\"_blank\" rel=\"noopener\">Hexo NexT主题代码块添加复制功能</a></p>\n</blockquote>\n<ol>\n<li><p><a href=\"https://clipboardjs.com/\" target=\"_blank\" rel=\"noopener\">下载</a><code>clipboard.js</code></p>\n</li>\n<li><p>保存文件<code>clipboard.min.js</code> 到目录<code>\\themes\\next\\source\\js\\src</code></p>\n</li>\n<li><p>在<code>.\\themes\\next\\source\\js\\src</code>目录下，创建<code>clipboard-use.js</code>，文件内容如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*页面载入完成后，创建复制按钮*/</span></span><br><span class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> initCopyCode = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">''</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'&lt;button class=\"btn-copy\" data-clipboard-snippet=\"\"&gt;'</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'  &lt;i class=\"fa fa-globe\"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'&lt;/button&gt;'</span>;</span><br><span class=\"line\">    $(<span class=\"string\">\".highlight .code pre\"</span>).before(copyHtml);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ClipboardJS(<span class=\"string\">'.btn-copy'</span>, &#123;</span><br><span class=\"line\">        target: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">trigger</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> trigger.nextElementSibling;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initCopyCode();</span><br><span class=\"line\">&#125;(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>.\\themes\\next\\source\\css\\_custom\\custom.styl</code>样式文件中添加下面代码：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//代码块复制按钮</span></span><br><span class=\"line\">.highlight&#123;</span><br><span class=\"line\">  <span class=\"comment\">//方便copy代码按钮（btn-copy）的定位</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">    <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: linear-gradient(<span class=\"number\">#fcfcfc</span>,<span class=\"number\">#eee</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d5d5d5</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    -webkit-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -moz-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -ms-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -webkit-appearance: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">    -webkit-transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    -o-transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span>:hover .btn-copy&#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>.\\themes\\next\\layout\\_layout.swig</code>文件中，添加引用（注：在 swig 末尾或 body 结束标签（<code>&lt;/body&gt;</code>）之前添加）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 代码块复制功能 --&gt;</span><br><span class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"/js/src/clipboard.min.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span>  </span><br><span class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"/js/src/clipboard-use.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"文章加密\"><a href=\"#文章加密\" class=\"headerlink\" title=\"文章加密\"></a>文章加密</h3><blockquote>\n<p><a href=\"https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md\" target=\"_blank\" rel=\"noopener\">hexo-blog-encrypt</a></p>\n</blockquote>\n<ol>\n<li><p><code>npm install --save hexo-blog-encrypt</code></p>\n</li>\n<li><p>在<strong>站点配置文件</strong>下添加如下配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">encrypt:</span></span><br><span class=\"line\"><span class=\"attr\">    enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在需要加密的文章的头部添加上对应的字段，如 password, abstract, message</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">password:</span> <span class=\"string\">Mike</span></span><br><span class=\"line\"><span class=\"attr\">abstract:</span> <span class=\"string\">Welcome</span> <span class=\"string\">to</span> <span class=\"string\">my</span> <span class=\"string\">blog,</span> <span class=\"string\">enter</span> <span class=\"string\">password</span> <span class=\"string\">to</span> <span class=\"string\">read.</span></span><br><span class=\"line\"><span class=\"attr\">message:</span> <span class=\"string\">Welcome</span> <span class=\"string\">to</span> <span class=\"string\">my</span> <span class=\"string\">blog,</span> <span class=\"string\">enter</span> <span class=\"string\">password</span> <span class=\"string\">to</span> <span class=\"string\">read.</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"二次元看板娘\"><a href=\"#二次元看板娘\" class=\"headerlink\" title=\"二次元看板娘\"></a>二次元看板娘</h3><blockquote>\n<p><a href=\"https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md\" target=\"_blank\" rel=\"noopener\">hexo-helper-live2d</a></p>\n</blockquote>\n<ol>\n<li><p><code>npm install --save hexo-helper-live2d</code></p>\n</li>\n<li><p><code>npm install --save live2d-widget-model-wanko</code></p>\n</li>\n<li><p>向<strong>站点配置文件</strong>中添加如下配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">live2d:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">  scriptFrom:</span> <span class=\"string\">local</span></span><br><span class=\"line\"><span class=\"attr\">  pluginRootPath:</span> <span class=\"string\">live2dw/</span></span><br><span class=\"line\"><span class=\"attr\">  pluginJsPath:</span> <span class=\"string\">lib/</span></span><br><span class=\"line\"><span class=\"attr\">  pluginModelPath:</span> <span class=\"string\">assets/</span></span><br><span class=\"line\"><span class=\"attr\">  tagMode:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  debug:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  model:</span></span><br><span class=\"line\"><span class=\"attr\">    use:</span> <span class=\"string\">live2d-widget-model-wanko</span></span><br><span class=\"line\"><span class=\"attr\">  display:</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">right</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">150</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">300</span></span><br><span class=\"line\"><span class=\"attr\">  mobile:</span></span><br><span class=\"line\"><span class=\"attr\">    show:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>注：在<code>next.yml</code>中配置时，<code>width, height</code>等参数不起作用。</p>\n</li>\n</ol>\n<h3 id=\"加载条\"><a href=\"#加载条\" class=\"headerlink\" title=\"加载条\"></a>加载条</h3><blockquote>\n<p><a href=\"https://github.com/theme-next/theme-next-pace\" target=\"_blank\" rel=\"noopener\">Load bar at the top for NexT</a></p>\n</blockquote>\n<ol>\n<li>将<code>theme-next-pace</code>克隆到本地一个空目录里。</li>\n<li>删掉<code>pace</code>目录下的<code>.git</code>文件夹</li>\n<li>将<code>pace</code>目录 copy 到<code>themes/next/source/lib</code>目录下</li>\n<li>修改<strong>主题配置文件</strong><code>next.yml</code>的<code>pace</code>属性值为<code>true</code></li>\n</ol>\n<h3 id=\"显示文章浏览进度百分比\"><a href=\"#显示文章浏览进度百分比\" class=\"headerlink\" title=\"显示文章浏览进度百分比\"></a>显示文章浏览进度百分比</h3><p>在<strong>主题配置文件</strong>中修改属性<code>sidebar</code>下<code>scrollpercent</code>的值为<code>true</code></p>\n<h3 id=\"文章预览\"><a href=\"#文章预览\" class=\"headerlink\" title=\"文章预览\"></a>文章预览</h3><p>在文章中使用截断标记<code>&lt;!-- more --&gt;</code>手动指定文章预览的内容。</p>\n<h3 id=\"评论系统\"><a href=\"#评论系统\" class=\"headerlink\" title=\"评论系统\"></a>评论系统</h3><h4 id=\"Gitalk\"><a href=\"#Gitalk\" class=\"headerlink\" title=\"Gitalk\"></a>Gitalk</h4><blockquote>\n<p><a href=\"https://github.com/gitalk/gitalk/wiki/%E5%9C%A8hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8A%E4%BD%BF%E7%94%A8gitalk\" target=\"_blank\" rel=\"noopener\">在hexo next主题上使用gitalk</a></p>\n<p><a href=\"https://asdfv1929.github.io/2018/01/20/gitalk/\" target=\"_blank\" rel=\"noopener\">Hexo NexT主题中集成gitalk评论系统</a></p>\n</blockquote>\n<ol>\n<li><p>Click here to sign up for a <a href=\"https://github.com/settings/applications/new\" target=\"_blank\" rel=\"noopener\">new OAuth Application</a></p>\n<p>Application name： # 应用名称，随意，如<code>gitalk</code><br>Homepage URL： # 网站URL，如<code>https://username.github.io</code>,<code>username</code>是 GitHub 账户名<br>Application description # 描述，随意，如<code>Comment System for Blog</code><br>Authorization callback URL：# 网站URL，<code>https://username.github.io</code>,<code>username</code>是 GitHub 账户名</p>\n</li>\n<li><p>修改<strong>主题配置文件</strong>中的如下属性</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Gitalk </span></span><br><span class=\"line\"><span class=\"comment\"># Demo: https://gitalk.github.io</span></span><br><span class=\"line\"><span class=\"comment\"># Reference: https://asdfv1929.github.io/2018/01/20/gitalk/, https://liujunzhou.cn/2018/8/10/gitalk-error/#more</span></span><br><span class=\"line\"><span class=\"attr\">gitalk:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">  github_id:</span> <span class=\"string\">username</span> <span class=\"comment\"># Github repo owner</span></span><br><span class=\"line\"><span class=\"attr\">  repo:</span> <span class=\"string\">gitalk</span> <span class=\"comment\"># Repository name to store issues.</span></span><br><span class=\"line\"><span class=\"attr\">  client_id:</span> <span class=\"string\">******</span> <span class=\"comment\"># Github Application Client ID</span></span><br><span class=\"line\"><span class=\"attr\">  client_secret:</span> <span class=\"string\">******</span> <span class=\"comment\"># Github Application Client Secret</span></span><br><span class=\"line\"><span class=\"attr\">  admin_user:</span> <span class=\"string\">gzhennaxia</span> <span class=\"comment\"># GitHub repo owner and collaborators, only these guys can initialize github issues</span></span><br><span class=\"line\"><span class=\"attr\">  distraction_free_mode:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Facebook-like distraction free mode</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"Valine\"><a href=\"#Valine\" class=\"headerlink\" title=\"Valine\"></a>Valine</h4><blockquote>\n<p><a href=\"https://theme-next.org/docs/third-party-services/comments-and-widgets/#Valine\" target=\"_blank\" rel=\"noopener\">Comment Systems Valine</a></p>\n</blockquote>\n<ol>\n<li><p>Create an account or log into <a href=\"https://leancloud.cn/dashboard/login.html#/signin\" target=\"_blank\" rel=\"noopener\">LeanCloud</a>, and then click on the bottom left corner to <a href=\"https://leancloud.cn/dashboard/applist.html#/newapp\" target=\"_blank\" rel=\"noopener\">create the application</a> in <a href=\"https://leancloud.cn/dashboard/applist.html#/apps\" target=\"_blank\" rel=\"noopener\">dashboard</a>.</p>\n</li>\n<li><p>Go to the application you just created, select <code>Settings -&gt; Apply Key</code> in the lower left corner, and you will see your <code>APP ID</code> and <code>APP Key</code>.</p>\n</li>\n<li><p>Set the value <code>enable</code> to <code>true</code>, add the obtained APP ID (<code>appid</code>) and APP Key (<code>appkey</code>), and edit other configurations in <code>valine</code> section in the theme config file as following:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Valine.</span></span><br><span class=\"line\"><span class=\"comment\"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class=\"line\"><span class=\"comment\"># more info please open https://valine.js.org</span></span><br><span class=\"line\"><span class=\"attr\">valine:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.</span></span><br><span class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">******</span> <span class=\"comment\"># your leancloud application appid</span></span><br><span class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">******</span> <span class=\"comment\"># your leancloud application appkey</span></span><br><span class=\"line\"><span class=\"attr\">  notify:</span> <span class=\"literal\">false</span> <span class=\"comment\"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class=\"line\"><span class=\"attr\">  verify:</span> <span class=\"literal\">false</span> <span class=\"comment\"># Verification code</span></span><br><span class=\"line\"><span class=\"attr\">  placeholder:</span> <span class=\"string\">Just</span> <span class=\"string\">go</span> <span class=\"string\">go</span> <span class=\"comment\"># comment box placeholder</span></span><br><span class=\"line\"><span class=\"attr\">  avatar:</span> <span class=\"string\">mm</span> <span class=\"comment\"># gravatar style</span></span><br><span class=\"line\"><span class=\"attr\">  guest_info:</span> <span class=\"string\">nick,mail,link</span> <span class=\"comment\"># custom comment header</span></span><br><span class=\"line\"><span class=\"attr\">  pageSize:</span> <span class=\"number\">10</span> <span class=\"comment\"># pagination size</span></span><br><span class=\"line\"><span class=\"attr\">  visitor:</span> <span class=\"literal\">false</span> <span class=\"comment\"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"Gitalk-Valine双评论系统\"><a href=\"#Gitalk-Valine双评论系统\" class=\"headerlink\" title=\"Gitalk + Valine双评论系统\"></a>Gitalk + Valine双评论系统</h4><p>在完成各自配置后对<code>themes\\next\\layout\\_partials\\comments.swig</code>做如下修改：</p>\n<p><strong>Before</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"comments\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"comments\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"gitalk-container\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>After</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"gitalk-container\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% if theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"comments\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"comments\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"自动部署\"><a href=\"#自动部署\" class=\"headerlink\" title=\"自动部署\"></a>自动部署</h3><blockquote>\n<p><a href=\"https://theme-next.org/docs/getting-started/deployment/#Continuous-Integration\" target=\"_blank\" rel=\"noopener\">Continuous Integration</a></p>\n</blockquote>\n<h1 id=\"踩坑记录\"><a href=\"#踩坑记录\" class=\"headerlink\" title=\"踩坑记录\"></a>踩坑记录</h1><h2 id=\"npm-install-warnings\"><a href=\"#npm-install-warnings\" class=\"headerlink\" title=\"npm install warnings\"></a>npm install warnings</h2><blockquote>\n<p><a href=\"https://github.com/Zulko/eagle.js/issues/35\" target=\"_blank\" rel=\"noopener\">npm install warnings</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/hexo-cli/node_modules/fsevents):</span><br><span class=\"line\">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted &#123;\"os\":\"darwin\",\"arch\":\"any\"&#125; (current: &#123;\"os\":\"linux\",\"arch\":\"x64\"&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>忽略就好</p>\n<h2 id=\"Hexo-g-error\"><a href=\"#Hexo-g-error\" class=\"headerlink\" title=\"Hexo g error\"></a>Hexo g error</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ERROR ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'</span><br><span class=\"line\">Error: ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'</span><br><span class=\"line\">    at Object.openSync (fs.js:439:3)</span><br><span class=\"line\">    at Object.readFileSync (fs.js:344:35)</span><br><span class=\"line\">    at Object.ret.load (F:\\Hexo\\node_modules\\swig-templates\\lib\\loaders\\filesystem.js:59:15)</span><br><span class=\"line\">    at exports.Swig.compileFile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:740:31)</span><br><span class=\"line\">    at Object.eval [as tpl] (eval at precompile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:537:13), &lt;anonymous&gt;:7:18)</span><br><span class=\"line\">    at compiled (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:664:18)</span><br><span class=\"line\">    at Theme._View.View._compiled.locals [as _compiled] (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:125:48)</span><br><span class=\"line\">    at Theme._View.View.View.render (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:30:15)</span><br><span class=\"line\">    at route.set (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\index.js:394:29)</span><br><span class=\"line\">    at tryCatcher (F:\\Hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)</span><br><span class=\"line\">    at F:\\Hexo\\node_modules\\bluebird\\js\\release\\method.js:15:34</span><br><span class=\"line\">    at RouteStream._read (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\router.js:134:3)</span><br><span class=\"line\">    at RouteStream.Readable.read (_stream_readable.js:452:10)</span><br><span class=\"line\">    at resume_ (_stream_readable.js:899:12)</span><br><span class=\"line\">    at process._tickCallback (internal/process/next_tick.js:63:19)</span><br></pre></td></tr></table></figure>\n<h3 id=\"场景再现\"><a href=\"#场景再现\" class=\"headerlink\" title=\"场景再现\"></a>场景再现</h3><p>从<a href=\"https://github.com/theme-next/hexo-theme-next/releases/tag/v6.6.0\" target=\"_blank\" rel=\"noopener\">releases</a>下载的 NexT 主题，然后再通过修改目录名为<code>next</code>的方式使用该主题的时候，生成文件的时候报的错。</p>\n<h3 id=\"报错原因\"><a href=\"#报错原因\" class=\"headerlink\" title=\"报错原因\"></a>报错原因</h3><p>未知</p>\n<h3 id=\"解决方法-1\"><a href=\"#解决方法-1\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/28826000\" target=\"_blank\" rel=\"noopener\">Wget for windows——优雅地实现批量下载</a></p>\n</blockquote>\n<p>换用<a href=\"https://theme-next.org/docs/getting-started/installation/#download-next-3\" target=\"_blank\" rel=\"noopener\">命令行</a>下载的方式就不会报这个错了。</p>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"<blockquote>\n<p>环境：</p>\n<p>node.js    10.14.2</p>\n<p>npm     6.4.1</p>\n<p>hexo    3.8.0</p>\n<p>NexT    6.6.0</p>\n</blockquote>","more":"<h1 id=\"Hexo常用命令\"><a href=\"#Hexo常用命令\" class=\"headerlink\" title=\"Hexo常用命令\"></a>Hexo常用命令</h1><blockquote>\n<p><a href=\"http://moxfive.xyz/2015/12/21/common-hexo-commands/\" target=\"_blank\" rel=\"noopener\">Hexo 最常用的几个命令</a></p>\n<p><a href=\"http://tietang.wang/2016/02/21/%E6%8A%80%E6%9C%AF/Hexo/Hexo%E5%91%BD%E4%BB%A4%E9%80%9F%E8%AE%B0/\" target=\"_blank\" rel=\"noopener\">Hexo命令速记</a></p>\n</blockquote>\n<p><code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s -s</code></p>\n<h1 id=\"NexT-主题的使用\"><a href=\"#NexT-主题的使用\" class=\"headerlink\" title=\"NexT 主题的使用\"></a>NexT 主题的使用</h1><blockquote>\n<p><a href=\"https://github.com/theme-next/hexo-theme-next\" target=\"_blank\" rel=\"noopener\">hexo-theme-next</a></p>\n<p><a href=\"https://theme-next.org/\" target=\"_blank\" rel=\"noopener\">Theme NexT</a></p>\n</blockquote>\n<p>推荐新入坑的兄弟使用<a href=\"https://theme-next.org/docs/getting-started/installation/#download-next-3\" target=\"_blank\" rel=\"noopener\">第一种方式</a>来获取NexT主题。</p>\n<h2 id=\"主题配置文件\"><a href=\"#主题配置文件\" class=\"headerlink\" title=\"主题配置文件\"></a>主题配置文件</h2><p><a href=\"https://theme-next.org/docs/getting-started/data-files/\" target=\"_blank\" rel=\"noopener\">Data Files</a></p>\n<p>为了以后平滑升级，使用Hexo3.0的Data Files方式</p>\n<h3 id=\"NexT-Way\"><a href=\"#NexT-Way\" class=\"headerlink\" title=\"NexT-Way\"></a><a href=\"https://theme-next.org/docs/getting-started/data-files/#option-2\" target=\"_blank\" rel=\"noopener\">NexT-Way</a></h3><ol>\n<li>在<code>hexo/source/_data</code>目录（没有的话新建一个）下新建<code>next.yml</code>文件。</li>\n<li>把<strong>主题配置文件</strong>中的选项全部 copy 到<code>next.yml</code>中。</li>\n<li>在<code>next.yml</code>文件中设置<code>override</code>选项为<code>true</code>。</li>\n<li>在<strong>站点配置文件</strong>中修改<code>theme</code>选项为<code>next</code></li>\n</ol>\n<h2 id=\"主题设置\"><a href=\"#主题设置\" class=\"headerlink\" title=\"主题设置\"></a>主题设置</h2><blockquote>\n<p><a href=\"https://theme-next.iissnan.com/getting-started.html\" target=\"_blank\" rel=\"noopener\">开始使用</a></p>\n</blockquote>\n<h2 id=\"主题优化\"><a href=\"#主题优化\" class=\"headerlink\" title=\"主题优化\"></a>主题优化</h2><h3 id=\"头像旋转\"><a href=\"#头像旋转\" class=\"headerlink\" title=\"头像旋转\"></a>头像旋转</h3><blockquote>\n<p><a href=\"http://www.iooeo.com/2017/07/20/Hexo-Next-%E5%A4%B4%E5%83%8F%E5%9C%86%E5%BD%A2%E5%B9%B6%E6%97%8B%E8%BD%AC/\" target=\"_blank\" rel=\"noopener\">Hexo Next 头像圆形并旋转</a></p>\n</blockquote>\n<p>注意<a href=\"https://www.zhangxinxu.com/jq/stylus/comments.php\" target=\"_blank\" rel=\"noopener\">stylus中文版参考文档之注释(Comments)</a></p>\n<p>单行注释使用<code>//</code>,多行使用<code>/* */</code></p>\n<p>修改<code>/themes/next/source/css/_common/components/sidebar/sidebar-author.styl</code>如下：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">0</span> auto;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"variable\">$site</span>-author-image-padding;</span><br><span class=\"line\">  <span class=\"attribute\">max-width</span>: <span class=\"variable\">$site</span>-author-image-width;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"variable\">$site</span>-author-image-height;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"variable\">$site</span>-author-image-border-width solid <span class=\"variable\">$site</span>-author-image-border-color;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: hexo-config(<span class=\"string\">'avatar.opacity'</span>) is a <span class=\"string\">'unit'</span> ? hexo-config(<span class=\"string\">'avatar.opacity'</span>) : <span class=\"number\">1</span>;</span><br><span class=\"line\">  <span class=\"comment\">// 头像圆形样式</span></span><br><span class=\"line\">  <span class=\"comment\">/* start */</span></span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">50%</span></span><br><span class=\"line\">  webkit-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  moz-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  ms-<span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: <span class=\"number\">1.4s</span> all;</span><br><span class=\"line\">  <span class=\"comment\">/* end */</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> hexo-config(<span class=\"string\">'avatar.rounded'</span>) &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">100%</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">if</span> hexo-config(<span class=\"string\">'avatar.rotated'</span>) &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span> &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transition</span>: -webkit-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  -moz-<span class=\"attribute\">transition</span>: -moz-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  -ms-<span class=\"attribute\">transition</span>: -ms-transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">  <span class=\"attribute\">transition</span>: transform <span class=\"number\">1.0s</span> ease-out;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span>:hover &#123;</span><br><span class=\"line\">  -webkit-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  -moz-<span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  -ms-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: rotateZ(<span class=\"number\">360deg</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-name</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"variable\">$site</span>-author-name-margin;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: <span class=\"variable\">$site</span>-author-name-align;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$site</span>-author-name-color;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: <span class=\"variable\">$site</span>-author-name-weight;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.site-description</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">margin-top</span>: <span class=\"variable\">$site</span>-description-margin-top;</span><br><span class=\"line\">  <span class=\"attribute\">text-align</span>: <span class=\"variable\">$site</span>-description-align;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"variable\">$site</span>-description-font-size;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"variable\">$site</span>-description-color;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// 头像旋转事件</span></span><br><span class=\"line\"><span class=\"comment\">/* start */</span></span><br><span class=\"line\"><span class=\"selector-class\">.site-author-image</span>:hover &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#55DAE1</span>;</span><br><span class=\"line\">  webkit-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  moz-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  ms-<span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">  <span class=\"attribute\">transform</span>: rotate(<span class=\"number\">360deg</span>) scale(<span class=\"number\">1.1</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/* end */</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"文章底部带-号的标签\"><a href=\"#文章底部带-号的标签\" class=\"headerlink\" title=\"文章底部带#号的标签\"></a>文章底部带#号的标签</h3><blockquote>\n<p><a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t11\" target=\"_blank\" rel=\"noopener\">文章底部带#号的标签</a></p>\n</blockquote>\n<p>修改模板<code>/themes/next/layout/_macro/post.swig</code>，搜索 <code>rel=&quot;tag&quot;&gt;#</code>，将<code>#</code>换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p>\n<h3 id=\"在每篇文章末尾统一添加“本文结束”标记\"><a href=\"#在每篇文章末尾统一添加“本文结束”标记\" class=\"headerlink\" title=\"在每篇文章末尾统一添加“本文结束”标记\"></a>在每篇文章末尾统一添加“本文结束”标记</h3><blockquote>\n<p><a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t12\" target=\"_blank\" rel=\"noopener\">在每篇文章末尾统一添加“本文结束</a></p>\n</blockquote>\n<ol>\n<li>在路径<code>\\themes\\next\\layout\\_macro</code>中新建<code>passage-end-tag.swig</code>文件,并添加以下内容：</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% if not is_index %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">style</span>=<span class=\"string\">\"text-align:center;color: #ccc;font-size:14px;\"</span>&gt;</span>-------------本文结束<span class=\"tag\">&lt;<span class=\"name\">i</span> <span class=\"attr\">class</span>=<span class=\"string\">\"fa fa-paw\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">i</span>&gt;</span>感谢您的阅读-------------<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">&#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li>打开<code>\\themes\\next\\layout\\_macro\\post.swig</code>文件，在<code>END POST BLOCK</code>之后， 添加以下代码：</li>\n</ol>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% if not is_index %&#125;</span><br><span class=\"line\">\t\t&#123;% include 'passage-end-tag.swig' %&#125;</span><br><span class=\"line\">\t&#123;% endif %&#125;</span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"3\">\n<li>打开<strong>主题配置文件</strong><code>next.yml</code>,在末尾添加：</li>\n</ol>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 文章末尾添加“本文结束”标记</span></span><br><span class=\"line\"><span class=\"attr\">passage_end_tag:</span></span><br><span class=\"line\"><span class=\"attr\">  enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"主页文章加阴影\"><a href=\"#主页文章加阴影\" class=\"headerlink\" title=\"主页文章加阴影\"></a>主页文章加阴影</h3><blockquote>\n<p> <a href=\"https://blog.csdn.net/qq_32454537/article/details/79482896#t14\" target=\"_blank\" rel=\"noopener\">主页文章加阴影</a></p>\n</blockquote>\n<p>打开<code>\\themes\\next\\source\\css\\_custom\\custom.styl</code>,向里面加入：</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">// 主页文章添加阴影效果</span><br><span class=\"line\"><span class=\"selector-class\">.post</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">margin-top</span>: <span class=\"number\">60px</span>;</span><br><span class=\"line\"><span class=\"attribute\">margin-bottom</span>: <span class=\"number\">60px</span>;</span><br><span class=\"line\"><span class=\"attribute\">padding</span>: <span class=\"number\">25px</span>;</span><br><span class=\"line\"><span class=\"attribute\">-webkit-box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"built_in\">rgba</span>(202, 203, 203, .5);</span><br><span class=\"line\"><span class=\"attribute\">-moz-box-shadow</span>: <span class=\"number\">0</span> <span class=\"number\">0</span> <span class=\"number\">5px</span> <span class=\"built_in\">rgba</span>(202, 203, 204, .5);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"显示文章更新时间\"><a href=\"#显示文章更新时间\" class=\"headerlink\" title=\"显示文章更新时间\"></a>显示文章更新时间</h3><p>修改<strong>主题配置文件</strong>的</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">post_meta:</span></span><br><span class=\"line\"><span class=\"attr\">  updated_at:</span></span><br><span class=\"line\"><span class=\"attr\">    enabled:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>要想具体显示到时分秒,则修改<strong>站点配置文件</strong>的</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">date_format:</span> <span class=\"string\">YYYY-MM-DD</span> <span class=\"attr\">HH:mm:ss</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"代码添加复制按钮\"><a href=\"#代码添加复制按钮\" class=\"headerlink\" title=\"代码添加复制按钮\"></a>代码添加复制按钮</h3><blockquote>\n<p><a href=\"http://www.missfli.com/2018/06/19/github-hexo-next-08.html\" target=\"_blank\" rel=\"noopener\">Hexo NexT主题代码块添加复制功能</a></p>\n</blockquote>\n<ol>\n<li><p><a href=\"https://clipboardjs.com/\" target=\"_blank\" rel=\"noopener\">下载</a><code>clipboard.js</code></p>\n</li>\n<li><p>保存文件<code>clipboard.min.js</code> 到目录<code>\\themes\\next\\source\\js\\src</code></p>\n</li>\n<li><p>在<code>.\\themes\\next\\source\\js\\src</code>目录下，创建<code>clipboard-use.js</code>，文件内容如下：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*页面载入完成后，创建复制按钮*/</span></span><br><span class=\"line\">!<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">e, t, a</span>) </span>&#123; </span><br><span class=\"line\">  <span class=\"comment\">/* code */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> initCopyCode = <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">var</span> copyHtml = <span class=\"string\">''</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'&lt;button class=\"btn-copy\" data-clipboard-snippet=\"\"&gt;'</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'  &lt;i class=\"fa fa-globe\"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'</span>;</span><br><span class=\"line\">    copyHtml += <span class=\"string\">'&lt;/button&gt;'</span>;</span><br><span class=\"line\">    $(<span class=\"string\">\".highlight .code pre\"</span>).before(copyHtml);</span><br><span class=\"line\">    <span class=\"keyword\">new</span> ClipboardJS(<span class=\"string\">'.btn-copy'</span>, &#123;</span><br><span class=\"line\">        target: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">trigger</span>) </span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> trigger.nextElementSibling;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  initCopyCode();</span><br><span class=\"line\">&#125;(<span class=\"built_in\">window</span>, <span class=\"built_in\">document</span>);</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>.\\themes\\next\\source\\css\\_custom\\custom.styl</code>样式文件中添加下面代码：</p>\n<figure class=\"highlight stylus\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">//代码块复制按钮</span></span><br><span class=\"line\">.highlight&#123;</span><br><span class=\"line\">  <span class=\"comment\">//方便copy代码按钮（btn-copy）的定位</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: relative;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">    <span class=\"attribute\">cursor</span>: pointer;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">    <span class=\"attribute\">background-image</span>: linear-gradient(<span class=\"number\">#fcfcfc</span>,<span class=\"number\">#eee</span>);</span><br><span class=\"line\">    <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#d5d5d5</span>;</span><br><span class=\"line\">    <span class=\"attribute\">border-radius</span>: <span class=\"number\">3px</span>;</span><br><span class=\"line\">    -webkit-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -moz-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -ms-user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    user-select: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    -webkit-appearance: <span class=\"attribute\">none</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">13px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-weight</span>: <span class=\"number\">700</span>;</span><br><span class=\"line\">    <span class=\"attribute\">line-height</span>: <span class=\"number\">20px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#333</span>;</span><br><span class=\"line\">    -webkit-transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    -o-transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    transition: opacity .3s ease-in-out;</span><br><span class=\"line\">    <span class=\"attribute\">padding</span>: <span class=\"number\">2px</span> <span class=\"number\">6px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">    <span class=\"attribute\">right</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">top</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">    <span class=\"attribute\">opacity</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.btn-copy</span> <span class=\"selector-tag\">span</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-left</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.highlight</span>:hover .btn-copy&#123;</span><br><span class=\"line\">  <span class=\"attribute\">opacity</span>: <span class=\"number\">1</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在<code>.\\themes\\next\\layout\\_layout.swig</code>文件中，添加引用（注：在 swig 末尾或 body 结束标签（<code>&lt;/body&gt;</code>）之前添加）：</p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&lt;!-- 代码块复制功能 --&gt;</span><br><span class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"/js/src/clipboard.min.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span>  </span><br><span class=\"line\">&lt;script type=<span class=\"string\">\"text/javascript\"</span> src=<span class=\"string\">\"/js/src/clipboard-use.js\"</span>&gt;<span class=\"xml\"><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"文章加密\"><a href=\"#文章加密\" class=\"headerlink\" title=\"文章加密\"></a>文章加密</h3><blockquote>\n<p><a href=\"https://github.com/MikeCoder/hexo-blog-encrypt/blob/master/ReadMe.zh.md\" target=\"_blank\" rel=\"noopener\">hexo-blog-encrypt</a></p>\n</blockquote>\n<ol>\n<li><p><code>npm install --save hexo-blog-encrypt</code></p>\n</li>\n<li><p>在<strong>站点配置文件</strong>下添加如下配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">encrypt:</span></span><br><span class=\"line\"><span class=\"attr\">    enable:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n</li>\n<li><p>在需要加密的文章的头部添加上对应的字段，如 password, abstract, message</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">---</span></span><br><span class=\"line\"><span class=\"attr\">password:</span> <span class=\"string\">Mike</span></span><br><span class=\"line\"><span class=\"attr\">abstract:</span> <span class=\"string\">Welcome</span> <span class=\"string\">to</span> <span class=\"string\">my</span> <span class=\"string\">blog,</span> <span class=\"string\">enter</span> <span class=\"string\">password</span> <span class=\"string\">to</span> <span class=\"string\">read.</span></span><br><span class=\"line\"><span class=\"attr\">message:</span> <span class=\"string\">Welcome</span> <span class=\"string\">to</span> <span class=\"string\">my</span> <span class=\"string\">blog,</span> <span class=\"string\">enter</span> <span class=\"string\">password</span> <span class=\"string\">to</span> <span class=\"string\">read.</span></span><br><span class=\"line\"><span class=\"meta\">---</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"二次元看板娘\"><a href=\"#二次元看板娘\" class=\"headerlink\" title=\"二次元看板娘\"></a>二次元看板娘</h3><blockquote>\n<p><a href=\"https://github.com/EYHN/hexo-helper-live2d/blob/master/README.zh-CN.md\" target=\"_blank\" rel=\"noopener\">hexo-helper-live2d</a></p>\n</blockquote>\n<ol>\n<li><p><code>npm install --save hexo-helper-live2d</code></p>\n</li>\n<li><p><code>npm install --save live2d-widget-model-wanko</code></p>\n</li>\n<li><p>向<strong>站点配置文件</strong>中添加如下配置：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">live2d:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">  scriptFrom:</span> <span class=\"string\">local</span></span><br><span class=\"line\"><span class=\"attr\">  pluginRootPath:</span> <span class=\"string\">live2dw/</span></span><br><span class=\"line\"><span class=\"attr\">  pluginJsPath:</span> <span class=\"string\">lib/</span></span><br><span class=\"line\"><span class=\"attr\">  pluginModelPath:</span> <span class=\"string\">assets/</span></span><br><span class=\"line\"><span class=\"attr\">  tagMode:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  debug:</span> <span class=\"literal\">false</span></span><br><span class=\"line\"><span class=\"attr\">  model:</span></span><br><span class=\"line\"><span class=\"attr\">    use:</span> <span class=\"string\">live2d-widget-model-wanko</span></span><br><span class=\"line\"><span class=\"attr\">  display:</span></span><br><span class=\"line\"><span class=\"attr\">    position:</span> <span class=\"string\">right</span></span><br><span class=\"line\"><span class=\"attr\">    width:</span> <span class=\"number\">150</span></span><br><span class=\"line\"><span class=\"attr\">    height:</span> <span class=\"number\">300</span></span><br><span class=\"line\"><span class=\"attr\">  mobile:</span></span><br><span class=\"line\"><span class=\"attr\">    show:</span> <span class=\"literal\">true</span></span><br></pre></td></tr></table></figure>\n<p>注：在<code>next.yml</code>中配置时，<code>width, height</code>等参数不起作用。</p>\n</li>\n</ol>\n<h3 id=\"加载条\"><a href=\"#加载条\" class=\"headerlink\" title=\"加载条\"></a>加载条</h3><blockquote>\n<p><a href=\"https://github.com/theme-next/theme-next-pace\" target=\"_blank\" rel=\"noopener\">Load bar at the top for NexT</a></p>\n</blockquote>\n<ol>\n<li>将<code>theme-next-pace</code>克隆到本地一个空目录里。</li>\n<li>删掉<code>pace</code>目录下的<code>.git</code>文件夹</li>\n<li>将<code>pace</code>目录 copy 到<code>themes/next/source/lib</code>目录下</li>\n<li>修改<strong>主题配置文件</strong><code>next.yml</code>的<code>pace</code>属性值为<code>true</code></li>\n</ol>\n<h3 id=\"显示文章浏览进度百分比\"><a href=\"#显示文章浏览进度百分比\" class=\"headerlink\" title=\"显示文章浏览进度百分比\"></a>显示文章浏览进度百分比</h3><p>在<strong>主题配置文件</strong>中修改属性<code>sidebar</code>下<code>scrollpercent</code>的值为<code>true</code></p>\n<h3 id=\"文章预览\"><a href=\"#文章预览\" class=\"headerlink\" title=\"文章预览\"></a>文章预览</h3><p>在文章中使用截断标记<code>&lt;!-- more --&gt;</code>手动指定文章预览的内容。</p>\n<h3 id=\"评论系统\"><a href=\"#评论系统\" class=\"headerlink\" title=\"评论系统\"></a>评论系统</h3><h4 id=\"Gitalk\"><a href=\"#Gitalk\" class=\"headerlink\" title=\"Gitalk\"></a>Gitalk</h4><blockquote>\n<p><a href=\"https://github.com/gitalk/gitalk/wiki/%E5%9C%A8hexo-next%E4%B8%BB%E9%A2%98%E4%B8%8A%E4%BD%BF%E7%94%A8gitalk\" target=\"_blank\" rel=\"noopener\">在hexo next主题上使用gitalk</a></p>\n<p><a href=\"https://asdfv1929.github.io/2018/01/20/gitalk/\" target=\"_blank\" rel=\"noopener\">Hexo NexT主题中集成gitalk评论系统</a></p>\n</blockquote>\n<ol>\n<li><p>Click here to sign up for a <a href=\"https://github.com/settings/applications/new\" target=\"_blank\" rel=\"noopener\">new OAuth Application</a></p>\n<p>Application name： # 应用名称，随意，如<code>gitalk</code><br>Homepage URL： # 网站URL，如<code>https://username.github.io</code>,<code>username</code>是 GitHub 账户名<br>Application description # 描述，随意，如<code>Comment System for Blog</code><br>Authorization callback URL：# 网站URL，<code>https://username.github.io</code>,<code>username</code>是 GitHub 账户名</p>\n</li>\n<li><p>修改<strong>主题配置文件</strong>中的如下属性</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Gitalk </span></span><br><span class=\"line\"><span class=\"comment\"># Demo: https://gitalk.github.io</span></span><br><span class=\"line\"><span class=\"comment\"># Reference: https://asdfv1929.github.io/2018/01/20/gitalk/, https://liujunzhou.cn/2018/8/10/gitalk-error/#more</span></span><br><span class=\"line\"><span class=\"attr\">gitalk:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\"><span class=\"attr\">  github_id:</span> <span class=\"string\">username</span> <span class=\"comment\"># Github repo owner</span></span><br><span class=\"line\"><span class=\"attr\">  repo:</span> <span class=\"string\">gitalk</span> <span class=\"comment\"># Repository name to store issues.</span></span><br><span class=\"line\"><span class=\"attr\">  client_id:</span> <span class=\"string\">******</span> <span class=\"comment\"># Github Application Client ID</span></span><br><span class=\"line\"><span class=\"attr\">  client_secret:</span> <span class=\"string\">******</span> <span class=\"comment\"># Github Application Client Secret</span></span><br><span class=\"line\"><span class=\"attr\">  admin_user:</span> <span class=\"string\">gzhennaxia</span> <span class=\"comment\"># GitHub repo owner and collaborators, only these guys can initialize github issues</span></span><br><span class=\"line\"><span class=\"attr\">  distraction_free_mode:</span> <span class=\"literal\">true</span> <span class=\"comment\"># Facebook-like distraction free mode</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"Valine\"><a href=\"#Valine\" class=\"headerlink\" title=\"Valine\"></a>Valine</h4><blockquote>\n<p><a href=\"https://theme-next.org/docs/third-party-services/comments-and-widgets/#Valine\" target=\"_blank\" rel=\"noopener\">Comment Systems Valine</a></p>\n</blockquote>\n<ol>\n<li><p>Create an account or log into <a href=\"https://leancloud.cn/dashboard/login.html#/signin\" target=\"_blank\" rel=\"noopener\">LeanCloud</a>, and then click on the bottom left corner to <a href=\"https://leancloud.cn/dashboard/applist.html#/newapp\" target=\"_blank\" rel=\"noopener\">create the application</a> in <a href=\"https://leancloud.cn/dashboard/applist.html#/apps\" target=\"_blank\" rel=\"noopener\">dashboard</a>.</p>\n</li>\n<li><p>Go to the application you just created, select <code>Settings -&gt; Apply Key</code> in the lower left corner, and you will see your <code>APP ID</code> and <code>APP Key</code>.</p>\n</li>\n<li><p>Set the value <code>enable</code> to <code>true</code>, add the obtained APP ID (<code>appid</code>) and APP Key (<code>appkey</code>), and edit other configurations in <code>valine</code> section in the theme config file as following:</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Valine.</span></span><br><span class=\"line\"><span class=\"comment\"># You can get your appid and appkey from https://leancloud.cn</span></span><br><span class=\"line\"><span class=\"comment\"># more info please open https://valine.js.org</span></span><br><span class=\"line\"><span class=\"attr\">valine:</span></span><br><span class=\"line\"><span class=\"attr\">  enable:</span> <span class=\"literal\">true</span> <span class=\"comment\"># When enable is set to be true, leancloud_visitors is recommended to be closed for the re-initialization problem within different leancloud adk version.</span></span><br><span class=\"line\"><span class=\"attr\">  appid:</span> <span class=\"string\">******</span> <span class=\"comment\"># your leancloud application appid</span></span><br><span class=\"line\"><span class=\"attr\">  appkey:</span> <span class=\"string\">******</span> <span class=\"comment\"># your leancloud application appkey</span></span><br><span class=\"line\"><span class=\"attr\">  notify:</span> <span class=\"literal\">false</span> <span class=\"comment\"># mail notifier , https://github.com/xCss/Valine/wiki</span></span><br><span class=\"line\"><span class=\"attr\">  verify:</span> <span class=\"literal\">false</span> <span class=\"comment\"># Verification code</span></span><br><span class=\"line\"><span class=\"attr\">  placeholder:</span> <span class=\"string\">Just</span> <span class=\"string\">go</span> <span class=\"string\">go</span> <span class=\"comment\"># comment box placeholder</span></span><br><span class=\"line\"><span class=\"attr\">  avatar:</span> <span class=\"string\">mm</span> <span class=\"comment\"># gravatar style</span></span><br><span class=\"line\"><span class=\"attr\">  guest_info:</span> <span class=\"string\">nick,mail,link</span> <span class=\"comment\"># custom comment header</span></span><br><span class=\"line\"><span class=\"attr\">  pageSize:</span> <span class=\"number\">10</span> <span class=\"comment\"># pagination size</span></span><br><span class=\"line\"><span class=\"attr\">  visitor:</span> <span class=\"literal\">false</span> <span class=\"comment\"># leancloud-counter-security is not supported for now. When visitor is set to be true, appid and appkey are recommended to be the same as leancloud_visitors' for counter compatibility. Article reading statistic https://valine.js.org/visitor.html</span></span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"Gitalk-Valine双评论系统\"><a href=\"#Gitalk-Valine双评论系统\" class=\"headerlink\" title=\"Gitalk + Valine双评论系统\"></a>Gitalk + Valine双评论系统</h4><p>在完成各自配置后对<code>themes\\next\\layout\\_partials\\comments.swig</code>做如下修改：</p>\n<p><strong>Before</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"comments\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"comments\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"></span><br><span class=\"line\">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class=\"line\">\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"gitalk-container\"</span>&gt;</span></span><br><span class=\"line\">\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<p><strong>After</strong></p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;% elseif theme.gitalk.enable %&#125;</span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"gitalk-container\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% if theme.valine.enable and theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"comments\"</span> <span class=\"attr\">id</span>=<span class=\"string\">\"comments\"</span>&gt;</span></span><br><span class=\"line\">\t\t<span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">\t&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"自动部署\"><a href=\"#自动部署\" class=\"headerlink\" title=\"自动部署\"></a>自动部署</h3><blockquote>\n<p><a href=\"https://theme-next.org/docs/getting-started/deployment/#Continuous-Integration\" target=\"_blank\" rel=\"noopener\">Continuous Integration</a></p>\n</blockquote>\n<h1 id=\"踩坑记录\"><a href=\"#踩坑记录\" class=\"headerlink\" title=\"踩坑记录\"></a>踩坑记录</h1><h2 id=\"npm-install-warnings\"><a href=\"#npm-install-warnings\" class=\"headerlink\" title=\"npm install warnings\"></a>npm install warnings</h2><blockquote>\n<p><a href=\"https://github.com/Zulko/eagle.js/issues/35\" target=\"_blank\" rel=\"noopener\">npm install warnings</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/hexo-cli/node_modules/fsevents):</span><br><span class=\"line\">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted &#123;\"os\":\"darwin\",\"arch\":\"any\"&#125; (current: &#123;\"os\":\"linux\",\"arch\":\"x64\"&#125;)</span><br></pre></td></tr></table></figure>\n<h3 id=\"解决方法\"><a href=\"#解决方法\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><p>忽略就好</p>\n<h2 id=\"Hexo-g-error\"><a href=\"#Hexo-g-error\" class=\"headerlink\" title=\"Hexo g error\"></a>Hexo g error</h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ERROR ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'</span><br><span class=\"line\">Error: ENOENT: no such file or directory, open 'F:\\Hexo\\themes\\next\\layout\\menu.swig'</span><br><span class=\"line\">    at Object.openSync (fs.js:439:3)</span><br><span class=\"line\">    at Object.readFileSync (fs.js:344:35)</span><br><span class=\"line\">    at Object.ret.load (F:\\Hexo\\node_modules\\swig-templates\\lib\\loaders\\filesystem.js:59:15)</span><br><span class=\"line\">    at exports.Swig.compileFile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:740:31)</span><br><span class=\"line\">    at Object.eval [as tpl] (eval at precompile (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:537:13), &lt;anonymous&gt;:7:18)</span><br><span class=\"line\">    at compiled (F:\\Hexo\\node_modules\\swig-templates\\lib\\swig.js:664:18)</span><br><span class=\"line\">    at Theme._View.View._compiled.locals [as _compiled] (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:125:48)</span><br><span class=\"line\">    at Theme._View.View.View.render (F:\\Hexo\\node_modules\\hexo\\lib\\theme\\view.js:30:15)</span><br><span class=\"line\">    at route.set (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\index.js:394:29)</span><br><span class=\"line\">    at tryCatcher (F:\\Hexo\\node_modules\\bluebird\\js\\release\\util.js:16:23)</span><br><span class=\"line\">    at F:\\Hexo\\node_modules\\bluebird\\js\\release\\method.js:15:34</span><br><span class=\"line\">    at RouteStream._read (F:\\Hexo\\node_modules\\hexo\\lib\\hexo\\router.js:134:3)</span><br><span class=\"line\">    at RouteStream.Readable.read (_stream_readable.js:452:10)</span><br><span class=\"line\">    at resume_ (_stream_readable.js:899:12)</span><br><span class=\"line\">    at process._tickCallback (internal/process/next_tick.js:63:19)</span><br></pre></td></tr></table></figure>\n<h3 id=\"场景再现\"><a href=\"#场景再现\" class=\"headerlink\" title=\"场景再现\"></a>场景再现</h3><p>从<a href=\"https://github.com/theme-next/hexo-theme-next/releases/tag/v6.6.0\" target=\"_blank\" rel=\"noopener\">releases</a>下载的 NexT 主题，然后再通过修改目录名为<code>next</code>的方式使用该主题的时候，生成文件的时候报的错。</p>\n<h3 id=\"报错原因\"><a href=\"#报错原因\" class=\"headerlink\" title=\"报错原因\"></a>报错原因</h3><p>未知</p>\n<h3 id=\"解决方法-1\"><a href=\"#解决方法-1\" class=\"headerlink\" title=\"解决方法\"></a>解决方法</h3><blockquote>\n<p><a href=\"https://zhuanlan.zhihu.com/p/28826000\" target=\"_blank\" rel=\"noopener\">Wget for windows——优雅地实现批量下载</a></p>\n</blockquote>\n<p>换用<a href=\"https://theme-next.org/docs/getting-started/installation/#download-next-3\" target=\"_blank\" rel=\"noopener\">命令行</a>下载的方式就不会报这个错了。</p>"},{"title":"Redis学习笔记","date":"2018-12-25T15:27:15.000Z","_content":"\n\n# 简介\n\n> [Redis-GitHbu](https://github.com/antirez/redis)\n\n## 什么是Redis\n\n## 有哪些公司在使用Redis\n\nGitHub, Twitter, Stackoverflow, Alibaba, 百度，微博，美团，搜狐\n\n## Redis的八大特性\n\n1. 速度快\n2. 支持持久化\n3. 存在多种数据结构\n4. 支持多种语言\n5. 功能丰富\n6. 简单（代码量小，使用方便）\n7. 主从复制\n8. 高可用，分布式\n\n### 速度快\n\n官方给的指标是10w OPS（每秒十万次读写）\n\n这么快的原因：\n\n- 数据存放在内存中\n- 使用C语言编写（大约五万行代码），C语言离操作系统较近\n\n- 线程模型为单线程\n\n### 持久化\n\nRedis所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。\n\n### 多种数据结构\n\n五大数据结构：\n\n1. Strings\n2. Hash Tables\n3. Linked Lists\n4. Sets\n5. Sorted Sets\n\n其他新结构：\n\n6. BitMaps: 位图（本质是字符串，可以实现类似[布隆过滤器](https://china.googleblog.com/2007/07/bloom-filter_7469.html)的功能）\n7. HyperLogLog：超小内存唯一值计数（本质是字符串）\n8. GEO：地理信息定位（本质是有序集合，Redis-3.2后提供）\n\n### 支持多种客户端语言\n\nJava，PHP，python，Ruby，Lua，nodejs\n\n### 功能丰富\n\n1. 发布订阅模式\n2. Lua脚本\n3. 事务\n4. pipeline（提高客户端并发效率）\n\n## 典型应用场景\n\n- 缓存系统\n- 计数器（微博的转发数，评论数以及视频网站的播放数等）\n- 消息队列系统 \n- 排行榜\n- 社交网络（粉丝数，关注数，共同关注数）\n- 实时系统（垃圾邮件处理系统，布隆过滤器）\n\n# 安装Redis\n\n## Redis安装\n\n### Linux系统下安装Redis\n\n```shell\n# 1. 下载\n$ wget http://download.redis.io/releases/redis-5.0.3.tar.gz\n# 2. 解压缩\n$ tar xzf redis-5.0.3.tar.gz\n# 3. 建立一个软连接\n$ In -s redis-5.0.3 redis\n$ cd redis-5.0.3\n# 4. 编译\n$ make\n# 5. 安装\n$ make install\n```\n\n\n\n## 可执行文件说明\n\n| 可执行文件       | 说明                      |\n| ---------------- | ------------------------- |\n| redis-server     | Redis服务器               |\n| redis-cli        | Redis命令行客户端         |\n| redis-benchmark  | Redis性能测试工具         |\n| redis-check-aof  | AOF文件修复工具           |\n| redis-check-dump | RDB文件修复工具           |\n| redis-sentinel   | Sentinel服务器（2.8以后） |\n\n\n\n## 三种启动方法\n\n### 最简启动\n\n直接使用`redis-server`\n\n### 动态参数启动\n\n```shell\nredis-server --port 6380 # 默认端口是6379\n```\n\n### 配置文件启动\n\n```shell\nredis-server configPath\n```\n\n### 验证方法\n\n```shell\nps -ef|grep redis\nnetstat -antpl|grep redis\nredis-cli -h ip -p port ping\n```\n\n### 比较\n\n- 生产环境推荐配置启动\n- 单机多实例配置文件可以用端口区分开\n\n## 简单的客户端连接\n\n### 连接\n\n```shell\nredis-cli -h 10.10.79.150 -p 6384\nping\nset hello world\nget hello\n```\n\n### 返回值\n\n1. 状态回复（如`ping`返回`PONG`）\n2. 错误回复（如`(error) WRONGTYPE Operation against`）\n3. 整数回复（如`incr hello`回复`(integer) 1`）\n4. 字符串回复（如`get hello`回复`\"world\"`）\n5. 多行字符串回复（如`mget hello foo`返回`\"world\" \"bar\"`）\n\n## Redis常用配置\n\n| 属性      | 说明                                                         |\n| --------- | ------------------------------------------------------------ |\n| daemonize | 是否是守护进程（no默认\\|yes推荐）                            |\n| port      | Redis对外端口号，默认为6379<br />7379对应手机按键上MERZ对应的号码，MERZ取自意大利歌女Alessia Merz的名字 |\n| logfile   | Redis系统日志                                                |\n| dir       | Redis工作目录                                                |\n\n# Redis API\n\n## 通用命令\n\n1. keys\n\n   eg：`keys *` 遍历所有的key\n\n   怎么用：\n\n   ​\t热备从节点\n\n   ​\tscan\n\n2. dbsize\n\n   计算key的总数\n\n3. exists key\n\n   检查key是否存在，存在返回1，否则返回0\n\n4. del key [key ...]\n\n   删除指定key-value，成功返回1，否则返回0\n\n5. expire key seconds\n\n   `ttl key`查看key剩余的过期时间\n\n   `persist key`去掉key的过期时间\n\n6. type key\n\n   返回key的类型（string，hash，list，set，zset，none）\n\n| 命令   | 时间复杂度 |\n| ------ | ---------- |\n| keys   | O(n)       |\n| dbsize | O(1)       |\n| del    | O(1)       |\n| exists | O(1)       |\n| expire | O(1)       |\n| type   | O(1)       |\n\n## 数据结构和内部编码\n\n### 内部编码\n\n![Redis 内部编码](https://i.loli.net/2018/12/25/5c2240654f22b.png)\n\n### 字符串键值结构\n\n| key     | value                                                        |\n| ------- | ------------------------------------------------------------ |\n| hello   | world                                                        |\n| counter | 1                                                            |\n| bits    | \\|1\\|0\\|1\\|1\\|1\\|0\\|1\\|                                      |\n|         | {<br />\"prodduct\":{<br />\"id\": \"3242\"<br />\"name\": \"test423\"<br />}<br />} |\n\nValue up to 512MB，up to 100k is recommended\n\n#### 场景\n\n- 缓存\n- 计数器\n- 分布式锁\n\n#### 命令\n\n```shell\n# 1. 获取key对应的value O(1)\nget key\n# 2. 设置key-value O(1)\nset key value\n# 3. 删除key-value O(1)\ndel key\n```\n\n```shell\n# 1. key自增1，如果key不存在，自增后get（key）=1 O(1)\nincr key\n# 2. key自减1，如果key不存在，自减后get（key）=-1 O(1)\ndecr key\n# 3. key自增k，如果key不存在，自增后get（key）=k O(1)\nincrby key k\n# 4. key自减k，如果key不存在，自减后get（key）=-k O(1)\ndecrby key k\n```\n\n```shell\n# 1. 不管key是否存在，都设置 O(1)\nset key value\n# 2. key不存在，才设置 O(1)\nsetnx key value\n# 3. key存在，才设置 O(1)\nset key value xx\n```\n\n```shell\n# 1. 批量获取key，原子操作 O(n)\nmget key1 key2 key3...\n# 2. 批量设置key-value O(n)\nmset key1 value1 key2 vlaue2 key3 value3\n```\n\nn次get = n次网络时间 + n次命令时间\n\n1次mget = 1次网络时间 + n次命令时间\n\n```shell\n# 1. set key newvalue并返回旧的value O(1)\ngetset key newvalue\n# 2. 将value追加到旧的value O(1)\nappend key value\n# 3. 返回字符串的长度（注意中文） O(1)\nstrlen key\n```\n\n```shell\n# 1. 增加key对应的值3.5 O(1)\nincrbyfloat key 3.5\n# 2. 获取字符串指定下标范围内的值 O(1)\ngetrange key start end\n# 3. 设置指定下标范围内对应的值 O(1)\nsetrange key index value\n```\n\n##### 复杂度总结\n\n| 命令          | 含义                         | 复杂度 |\n| ------------- | ---------------------------- | ------ |\n| set key value | 是指key-value                | O(1)   |\n| get key       | 获取key-value                | O(1)   |\n| del key       | 删除key-value                | O(1)   |\n| setnx setxx   | 根据key是否存在设置key-value | O(1)   |\n| Incr decr     | 计数                         | O(1)   |\n| mget mset     | 批量操作key-value            | O(n)   |\n\n\n\n#### 实战\n\n1. 记录网站每个用户个人主页的访问量？\n\n   ```shell\n   incr userid:pageview\n   ```\n\n2. 缓存视频的基本信息（数据源在MySQL中）伪代码\n\n   ```java\n   public VideoInfo get(long id){\n       String redisKey = redisPrefix + id;\n       VideoInfo videoInfo = redis.get(redisKey);\n       if(videoInfo == null){\n           videoInfo = mysql.get(id);\n           if(videoInfo != null){\n               //序列化\n               redis.set(redisKey, serialize(videoInfo));\n           }\n       }\n       return videoInfo;\n   }\n   ```\n\n3. 分布式计数器\n\n   incr id (原子操作)\n\n### Hash键值结构\n\n| key         | field                   | value                    |\n| ----------- | ----------------------- | ------------------------ |\n| user:1:info | name<br />age<br />Date | Ronaldo<br />32<br />239 |\n\n#### 特点\n\n1. 是一个`value`为`Map`的`Map`\n\n2. `field`不能相同，`value`可以相同\n\n#### API\n\n所有以哈希为结构的命令都是以`H`开头的。\n\n```shell\n# 1. 获取hash key对应的field的value O(1)\nhget key field\n# 2. 设置hash key对应field的value O(1)\nhset key field value\n# 3. 删除hash key对应field的value O(1)\nhdel key field\n```\n\n```shell\n# 1. 判断hash key是否有field O(1)\nhexists key field\n# 2. 获取hash key field的数量 O(1)\nhlen key\n```\n\n```shell\n# 1. 批量获取hash key的一批field对应的值 O(n)\nhmget key field1 field2... fieldN\n# 2. 批量设置hash key的一批field value O(n)\nhmset key field1 value1 field2 value2...fieldN valueN\n```\n\n```shell\n# 1. 返回hash key对应所有的field和value O(n)\nhgetall key\n# 2. 返回hash key对应所有field的value O(n)\nhvals key\n# 3. 返回hash key对应多有field O(n)\nhkeys key\n```\n\n```shell\n# 1. 设置hash key对应field的value（若field已存在，则失败） O(1)\nhsetnx key field value\n# 2. hash key对应的filed的value自增intCounter O(1)\nhincrby key field intCounter\n# 3. hincrby浮点数版 O(1)\nhincrbyfloat key field floatCounter\n```\n\n##### 复杂度总结\n\n| 命令                | 复杂度 |\n| ------------------- | ------ |\n| hget hset hdel      | O(1)   |\n| hexists             | O(1)   |\n| hincrby             | O(1)   |\n| hgetall hvals hkeys | O(n)   |\n| hmget hmset         | O(n)   |\n\n### 列表\n\n#### 特点\n\n1. 有序（根据插入顺序得到遍历顺序）\n2. 可以重复\n3. 左右两边都可以插入和弹出\n\n#### API\n\n列表的API都以`L`开头\n\n##### 增\n\n```shell\n# 1. 从列表右端插入值 O(1)\nrpush key value1 value2 ... valueN\n# 2. 从列表左端插入值 O(1)\nlpush key value1 value2 ... valueN\n# 3. 在list指定的值前|后插入newValue O(n)\nlinsert key before|after value newValue\n```\n\n##### 删\n\n```shell\n# 1. 从列表左侧弹出一个item O(1)\nlpop key\n# 2. 从列表右侧弹出一个item O(1)\nrpop key\n```\n\n```shell\n# 3. 根据count值，从列表中删除所有value相等的项 O(n)\n# （1）count>0，从左到右，删除最多count个value相等的项\n# （2）count<0，从右到左，删除最多Math。abs（count）个value相等的项\n# （3）count=0，删除所有value相等的项\nlrem key count value\n```\n\n```shell\n# 4. 按照索引范围修剪列表 O(n)\n# \t 如ltrime listkey 1 4 是指删除除了下标为1-4（包括1和4）其他项\nltrim key start end\n```\n\n##### 查\n\n```shell\n# 1. 获取列表指定索引范围所有item O(n)\n#  \t 如lrange listKey 0 2获取的是下标0-2（包括0和2）的项\n#  \t 再如lrange listKey 1 -1获取的是下标1-（len-1）的项\nlrange key start end\n```\n\n```shell\n# 2. 获取列表指定索引的item O(n)\n#    如lindex listkye -1 取到的是最后一个元素\nlindex key index\n```\n\n```shell\n# 3. 获取列表长度 O(1)\nllen key\n```\n\n##### 改\n\n```shell\n# 1. 设置列表指定索引值为newValue O(n)\nlset key index newValue\n```\n\n##### 其他\n\n```shell\n# 1. lpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)\nblpop key timeout\n# 2. rpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)\nbrpop key timeout\n```\n\n##### TIPS\n\n1. LPUSH + LPOP = Stack\n2. LPUSH + RPOP = Queue\n3. LPUSH + LTRIM = Capped Collection\n4. LPUSH + BRPOP = Message Queue\n\n#### 实战\n\n1. TimeLine\n\n#### 实战\n\n1. 记录网站每个用户个人主页的访问量\n\n   ```shell\n   hincrby user:1:info pageview count\n   ```\n\n2. 缓存视频的基本信息（数据源在mysql中）伪代码\n\n   ```java\n   public VideoInfo get(long id){\n       String redisKey = redisPrefix + id;\n       Map<String, String> hashMap = redis.hgetAll(redisKey);\n       VideoInfo videoInfo = transferMapToVideo(hashMap);\n       if(videoInfo == null){\n           videoInfo = mysql.get(id);\n           if(videoInfo != null){\n               redis.hmset(redisKey, transferVideoToMap(videoInfo));\n           }\n       }\n       return videoInfo;\n   }\n   ```\n\n\n## 单线程架构\n\nRedis在同一时刻只会执行一条命令\n\n### 单线程为什么这么快\n\n1. 纯内存\n\n2. 非阻塞IO\n\n3. 避免线程切换和竞态消耗\n\n4. 拒绝长（慢）命令\n\n   ​\tkeys, flushall, flushdb, slow lua script, mutil/exec, operate big value(collection)\n\n5. 其实不是单线程\n\n   fysnc file descriptor\n\n   close file descriptor\n\n# Redis客户端\n\n## Java客户端：Jedis\n\n### 获取Jedis\n\n1. 添加`Maven`依赖\n\n```xml\n<!-- https://mvnrepository.com/artifact/redis.clients/jedis -->\n<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>2.9.0</version>\n</dependency>\n```\n\n2. Jedis直连（TCP连接）\n\n   ```java\n   Jedis jedis = new Jedis(\"127.0.0.1\", 6379);\n   jedis.set(\"hello\",\"world\");\n   String value = jedis.get(\"hello\");\n   ```\n\n   `Jedis(String host, int port, int connectionTimeout, int soTimeout)`\n\n   - host : Redis节点所在机器的IP\n   - port : Redis节点的端口\n   - connectionTimeout : 客户端连接超时时间（内部使用socket技术）\n   - soTimeout : 客户端读写超时时间\n\n### Jedis基本使用\n\n### Jedis连接池使用\n\n#### 简单使用\n\n```java\n// 初始化Jedis连接池，通常来讲JedisPool是单例的。\nGenericObjectPoolConfig poolConfig = new GenericObjectPoolConfig();\nJedisPool jedisPool = new JedisPool(poolConfig, \"127.0.0.1\", 6379);\n\nJedis jedis = null;\ntry{\n    // 1. 从连接池获取jedis对象\n    jedis = jedisPool.getResource();\n    // 2. 执行操作\n    jedis.set(\"hello\", \"world\");\n} catch (Exception e){\n    e.printStackTrance();\n} finally {\n    if(jedis != null){\n        // 如果使用JedisPool，close操作不是关闭连接，二十代表归还连接池。\n        jedis.close();\n    }\n}\n```\n\n\n\n|        | 优点                                                         | 缺点                                                         |\n| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| 直连   | - 简单方便<br />- 适用于少量长期连接的场景                   | - 存在每次新建/关闭TCP开销<br />- 资源无法控制，存在连接泄露的可能<br />- Jedis对象线程不安全 |\n| 连接池 | - Jedis预先生成，降低开销使用<br />- 连接池的形式保护和控制资源的使用 | 相对于直连，使用相对麻烦，尤其在资源的管理上需要很多参数来保证，一旦规划不合理也会出现问题。 |\n\n\n\n## python客户端：redis-py\n\n### 源码安装\n\n> [Redis-clients-python](https://redis.io/clients#python)\n\n```shell\nwget https://github.com/andymccurdy/redis-py/archive/3.0.0.zip\nunzip redis-3.0.0.zip\ncd redis-3.0.0\n# 安装redis-py\nsudo python setup.py install\n```\n\n### 简单使用\n\n```python\nimport redis\nclient = redis.StrictRedis(host='127.0.0.1', port=6379)\nkey = \"hello\"\nsetResult = client.set(key, \"python-redis\")\nprint setResult\nvalue = client.get(key)\nprint \"key:\" + key + \", value:\" + value\n```\n\n## Go客户端\n\n ```go\nc,err := redis.Dial(\"tcp\", \"127.0.0.1:6379\")\nif err != nil{\n    fmt.Println(err)\n    return\n}\ndefer c.Close()\nv, err := c.Do(\"SET\", \"hello\", \"world\")\nif err != nil{\n    fmt.Println(err)\n    return\n}\nfmt.Println(v)\nv, err = redis.String(c.Do(\"GET\", \"hello\"))\nif err != nil {\n    fmt.Println(err)\n    return\n}\n ```\n\n# 瑞士军刀Redis\n\n## 慢查询\n\n### 生命周期\n\n![](https://i.loli.net/2018/12/27/5c2419d644e00.png)\n\n1. 慢查询发生在第三阶段\n2. 客户端超时不一定是慢查询导致的，慢查询只是导致客户端超时的一个可能因素\n\n### 两个配置\n\n#### slowlog-max-len\n\n1. 先进先出队列\n2. 固定长度\n3. 保存在内存内\n\n#### slowlog-log-slower-than\n\n1. 慢查询阈值（单位：微妙，1毫秒等于1000微秒）\n2. slowlog-log-slower-than=0，记录所有命令\n3. slowlog-log-slower-than<0，不记录任何命令\n\n#### 配置方法\n\n1. 默认值\n   - config get slowlog-max-len = 128\n   - config get slowlog-log-slower-than = 10000\n2. 修改配置文件后重启（适用于未启动时）\n3. 动态配置\n   - config set slowlog-max-len 1000\n   - config set slowlog-log-slower-than 1000\n\n### 三个命令\n\n1. slowlog get [n] ：获取慢查询队列\n2. slowlog len ：获取慢查询队列长度\n3. slowlog reset ：清空慢查询队列\n\n### 运维经验\n\n1. slowlog-max-len不要是指过大，默认10ms，通常是指1ms\n2. slowlog-log-slower-than不要设置太小，通常设置1000左右\n3. 理解命令生命周期\n4. 定期持久化慢查询\n\n## pipeline\n\n### 什么是流水线\n\n流水线就是一次网络连接里传输一批命令，节省网络传输时间\n\n| 命令   | N个命令操作       | 1次pipeline       |\n| ------ | ----------------- | ----------------- |\n| 时间   | n次网络 + n次命令 | 1次网络 + n次命令 |\n| 数据量 | 1条命令           | n条命令           |\n\n注意：\n\n1. Redis的命令时间是微秒级别。\n2. pipeline每次条数要控制（网络）。\n\n### 客户端实现 pipeline-Jedis\n\n```java\n// before pipeline\nJedis jedis = new jedis(\"127.0.0.1\", 6379);\nfor (int i = 0; i < 10000; i++){\n    jedis.hset(\"hashkey:\" + i, \"field\" + i, \"value\" + i);\n}\n```\n\n```java\n// after pipeline\nJedis jedis = new jedis(\"127.0.0.1\", 6379);\nfor (int i = 0; i < 100; i++){\n    Pipeline pipeline = jedis.pipelined();\n    for(int j = i*100; j < (i+1)*100; j++){\n        pipeline.hset(\"hashkey:\" + j, \"field\" + j, \"value\" + j);\n    }\n    pipeline.syncAndReturnAll();\n}\n```\n\n\n\n### 与原生M操作做对比\n\nM操作是原子操作，pipeline是非原子操作。\n\n### 使用建议\n\n1. 注意每次pipeline携带数据量\n2. pipeline每次只能作用在一个Redis节点上\n3. M操作与pipeline区别\n\n## 发布订阅\n\n### 角色\n\n- 发布者（publisher）\n- 订阅者（subscriber）\n- 频道（channel）\n\n### 模型 \n\nRedis server中有各个频道。\n\n发布者向频道中发布消息\n\n订阅者收到其所订阅频道的消息，只能收到订阅时刻之后的消息，之前的收不到。\n\n![](https://upload-images.jianshu.io/upload_images/7432257-f91184b81f782b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)\n\n需要注意的是，redis没有消息堆积的能力。\n\n### API\n\n#### publish\n\n```shell\npublish channel message\n```\n\neg:\n\n```shell\nredis> publish sohu:tv \"hello world\"\n(integer) 3 # 订阅者个数\n```\n\n#### subscribe\n\n```shell\nsubscribe [channel] # 一个或多个\n```\n\n#### unsubscribe\n\n```shell\nunsubcribe [channle] # 一个或多个\n```\n\n#### 其他\n\n ```shell\n# 1. 订阅模式\npsubscribe [pattern]\n# 2. 推定指定的模式\npunsubscribe [pattern]\n# 3. 列出至少有一个订阅者的频道\npubsub channels\n# 4. 列出给定频道的订阅者数量\npubsub numsub [channel]\n# 5. 列出被订阅模式的数量\npubsub numpat\n ```\n\n### 发布订阅与消息队列   \n\n发布订阅是所有订阅者可以收到所有的消息\n\n消息队列是订阅者要进行消息抢夺，一条消息只有一个订阅者能够抢到。\n\n## Bitmap\n\n### 位图\n\n| b        | i        | g        |\n| -------- | -------- | -------- |\n| 01100010 | 01101001 | 01100111 |\n\n### 相关命令\n\n```shell\n# 1. 给位图指定索引设置值\nsetbit key offset value\n# 2. 获取位图指定索引的值\ngetbit key offset\n# 3. 获取位图指定范围（start到end，单位为字节，如果不指定就是获取全部）位值为1的个数\nbitcount key [start end]\n# 4. 做多个Bitmap的and（交集）、or（并集）、not（非）、xor（抑或）操作并将结果保存在destkey中\nbitop op destkey key [key...]\n# 5. 计算位图指定范围（start到end，单位为字节，如果不指定就是取全部）第一个偏移量对应的值等于targetBit的位置\nbitpos key targetBit [start][end]\n```\n\n### 独立用户统计\n\n1. 使用set和Bitmap\n2. 总共1亿用户，每日5千万独立访问。\n\n| 数据类型 | 每个userid只用空间                                           | 需要存储的用户量 | 全部内存量              |\n| -------- | ------------------------------------------------------------ | ---------------- | ----------------------- |\n| set      | 32位<br />（假设userid用的是整型，<br />实际很多网站用的是长整型） | 50，000，000     | 32位*50，000，000=100MB |\n| Bitmap   | 1位                                                          | 100，000，000    | 12.5MB                  |\n\n|        | 一天  | 一个月 | 一年 |\n| ------ | ----- | ------ | ---- |\n| set    | 200M  | 6G     | 72G  |\n| Bitmap | 12.5M | 375M   | 4.5G |\n\n如果只有10万对立用户：\n| 数据类型 | 每个userid占用空间 | 需要存储的用户量 | 全部内存量             |\n| -------- | ------------------ | ---------------- | ---------------------- |\n| set      | 32位               | 1,000,000        | 32位*1,000,000=4MB     |\n| Bitmap   | 1位                | 100,000,000      | 1位*100,000,000=12.5MB |\n\n### 使用经验\n\n1. type=string，最大512MB\n2. 注意setbit时的偏移量，可能有较大耗时\n3. 位图不是绝对好。\n\n## HyperLogLog\n\n### 是否是新的数据结构\n\n1. 基于 HyperLogLog 算法：极小空间完成独立数量统计。\n2. 本质还是字符串\n\n### 三个命令\n\n1. 向 hyperloglog 添加元素\n\n   ```shell\n   pfadd key element [element ...]\n   ```\n\n2. 计算 hyperloglog 的独立总数\n\n   ```shell\n   pfcount key [key ...]\n   ```\n\n3. 合并多个 hyperloglog\n\n   ```shell\n   pfmerge destkey sourcekey [sourcekey ...]\n   ```\n\n### 内存消耗\n\n### 使用经验\n\n1. 存在错误率（0.81%）\n2. 无法取出单条数据\n\n## GEO\n\n### GEO是什么\n\nGEO(地理信息定位)：存储经纬度，计算两地距离，范围计算等。\n\n### 5个城市经纬度\n\n| 城市   | 经度   | 纬度  |\n| ------ | ------ | ----- |\n| 北京   | 116.28 | 39.55 |\n| 天津   | 117.12 | 39.08 |\n| 石家庄 | 114.29 | 38.02 |\n| 唐山   | 118.01 | 39.38 |\n| 保定   | 115.29 | 38.51 |\n\n### 相关命令\n\n```shell\n# 1. 添加地理位置信息\ngeo key longitude latitude member [longitude latitude member ...]\n# 2. 获取地理位置信息\ngeopos key member [member ...]\n# 3. 获取两个地理位置的距离\n#    unit: m(米)、km(千米)、mi(英里)、ft(尺)\ngeodist key member1 member2 [unit]\n# 4. 获取指定位置范围内的地理位置信息集合\ngeoradius\n```\n\n### 相关说明\n\n1. since 3.2+\n2. type geoKey = zset\n3. 没有删除 API：zrem key member\n\n## 持久化\n\n## 持久化的作用\n\n（1）什么是持久化\n\nredis 所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。\n\n（2）持久化的实现方式\n\n1. 快照\n   - MySQL Dump\n   - Redis RDB\n2. 写日志\n   - MySQL Binlog\n   - Hbase Hlog\n   - Redis AOF\n\n## RDB\n\n（1）什么是RDB\n\n​\tredis 通过命令创建 RDB 文件（二进制）保存在硬盘中。当 redis 重启时通过命令将 RDB 文件载入到内存。实质是一个复制媒介。\n\n（2）触发机制-主要三种方式\n\n 1. save（同步）\n\n    - 新文件将会替换老文件\n    - 复杂度位 O(n)\n\n 2. bgsave（异步）\n\n    - 利用 Linux fork() 异步执行\n\n    - 文件策略及复杂度与 save 相同\n\n      | 命令   | save             | bgsave              |\n      | ------ | ---------------- | ------------------- |\n      | IO类型 | 同步             | 异步                |\n      | 阻塞   | 是               | 是（阻塞发生在fork) |\n      | 复杂度 | O(n)             | O(n)                |\n      | 优点   | 不会消耗额外内存 | 不阻塞客户端命令    |\n      | 缺点   | 阻塞客户端命令   | 需要fork，消耗内存  |\n\n 3. 自动\n\n    redis 提供了 save 配置\n\n    | 配置 | seconds | changes |\n    | ---- | ------- | ------- |\n    | save | 900     | 1       |\n    | save | 300     | 10      |\n    | save | 60      | 10000   |\n\n    满足任意一个条件，redis 会自动创建（bgsave）RDB 文件\n\n    默认配置：\n\n    ```shell\n    save 900 1\n    save 300 10\n    save 60 10000\n    dbfiename dump.rdb\n    dir ./\n    stop-writes-on-bgsave-error yes\n    rdbcompression yes\n    rdbcheksum yes\n    ```\n\n    最佳配置：\n\n    ```shell\n    dbfilename dump-${port}.rdb\n    dir /bigdiskpath\n    stop-writes-on-bgsave-error yes\n    rdbcompression yes\n    rdbcheksum yes\n    ```\n\n（3）触发机制-不容忽视方式\n\n \t1. 全量复制\n \t2. debug reload\n \t3. shutdown \n\n（4）总结\n\n \t1. RDB是 Redis 内存到硬盘的快照，用于持久化。\n \t2. save 通常会阻塞 Redis\n \t3. bgsave 不会阻塞 Redis，但是会 fork 新进程。\n \t4. save 自动配置满足任意一个条件就会被执行。\n\n## AOF\n\n### RDB 现存问题\n\n- 耗时，耗性能\n\n  - O(n): 耗时\n\n  - fork(): 消耗内存，copy-on-write 策略\n  - Disk I/O: IO 性能\n\n- 不可控，丢失数据\n\n### 什么是 AOF\n\n每执行一条命令，就将该命令写入到 AOF 日志文件中。\n\n### AOF 三种策略\n\n（1）always\n\n​\t每条写命令都会出发刷新，将缓冲区的命令日志刷新到 AOF 文件中。\n\n（2）everysec\n\n​\t每秒（默认值）刷新一次\n\n（3）no\n\n​\t由操作系统决定什么时候刷新。\n\n| 命令 | always                                  | everysec                          | no     |\n| ---- | --------------------------------------- | --------------------------------- | ------ |\n| 优点 | 不丢失数据                              | 每秒一次 fsync <br />丢失一秒数据 | 不用管 |\n| 缺点 | IO 开销较大，一般的 sata 盘只有几百 TPS | 丢失1秒数据                       | 不可控 |\n\n### AOF 重写\n\n| 原生 AOF                                                     | AOF 重写                                                  |\n| ------------------------------------------------------------ | --------------------------------------------------------- |\n| set hello world<br />set hello java<br />set hello hehe<br />incr counter<br />incr counter<br />rpush mylist a<br />rpush mylist b<br />rpush mylist c<br />过期数据 | set hello hehe<br />set counter 2<br />rpush mylist a b c |\n\nAOF 重写的作用：\n\n1. 减少磁盘占用量\n2. 加速恢复速度\n\nAOF 重写的两种实现方式\n\n1. berewriteaof\n\n2. AOF 重写配置\n\n   | 配置名                      | 含义                   |\n   | --------------------------- | ---------------------- |\n   | autoaof-rewrite-min-size    | AOF 文件重写需要的尺寸 |\n   | auto-aof-rewrite-percentage | AOF 文件增长率         |\n\n   | 统计名           | 含义                                   |\n   | ---------------- | -------------------------------------- |\n   | aof_current_size | AOF 当前尺寸（单位：字节）             |\n   | aof_base_size    | AOF 上次启动和重写的尺寸（单位：字节） |\n\n   自动触发时机：\n\n   - aof_current_size > auto-aof-rewrite-min-size\n   - aof_current_size - aof_base_size / aof_base_size > auto-aof-rewrite-percentage\n\n   AOF 重写流程\n\n   ![](data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIQEBIQEhASFRUWFhcWFRYXFhUXGhgXFRUXGBUYFhcbHSggGB0oHxgWIzEhJikrLi4uGCAzODMtNygtMCsBCgoKDg0OFQ8PGisZFR0rLS0rLSstLS03LSstLTcrLSstLS0tNy03LS0tNy0rNzcrLSsrLSsrKysrKysrKysrLf/AABEIAOoA2AMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYCAwQBB//EAFMQAAIBAwIDAwQOBQgGCgMAAAECAwAEERIhBQYxEyJBMlFhcRQVFlJUVYGRkpOUscHTI1Oh0dIkNUJigoTC1AdFZHLE4yUzQ0R0oqOks8M0Y4P/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oADAMBAAIRAxEAPwD7jSlKBSlKBVdi47czDtLeyWWJs6HM6xlgDgkoU23B8anrjOhsdcH7qhuRP5ssf/DxZ9egZ/bmgx9tb74sPyXMP44r323vPiuT5J7f+KpSe+VJY4m2MgYqdsdwoCPWdYx8tbhMvvl646jr5vX6KCF9uLz4rl+vtv4689t734sf5bi3/fU6sgO4IPqNc11xGOPdm284BYDcAZIBxnIxnrQRftrffFvz3MX4A09s7/4tT7Un8FTnajzjrjqOvm9dcvEOIiJchTIxdYwilcl28CSQF23OfAUEb7Z3/wAWr8l0n4oK2Jxx40aS6tnt0DRqGLxyhmlkEagCMkjvMvUY3qaU5AOMejzVAc6DMVuD5Ps2zyPP/KE0/wDm0n5KCwUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSg8bpUFyJ/N1qPARgD0qpIU/KADU1PEHVkOcMCDg4OCMbHwNQY5elQBIOITwxKqpHEsduyoqKFABaMseniTQOZuDyXLxFFiIWOVCXJyjSNFpkQAHLKEbHTqNxVd4fwE3BkX9EeziKBwGIM8kbAzYKj9LnBPiMrvkVYxwa7H+tJj64bb8ErL2qvPjJ/lgg/dQQtryxdRaWjMAOVJUlgo7NmKKoVAADrOcAYx4kk0bkj9GqARZDOWbcFwZo3XJH9VGGOgzUx7TXnjxSX5ILcfeprkhtrh55bccUudUSoznsLbT+k1aQD2e57p+cUEW/KN0ImQGBj3sEnB1aCqyeRgN3jk41f1q77HllxJE8iRfo5FYkEkyMO2JlO3lEyL1z0O/Su/2ku/jW4+qtfy6e0d38a3H1Vr+VQWCq5z7tao3it3Ykek+zYBj5ia2Dg12P9aTH1w234IK2R8Ekcr7JumnVJElRezSPDpnSW0+UMkHHnUGgm6UpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKr/C2xxO/Xzx2rfOJl/wANWCqXY8bhPHrm3DntDbQrp0ts0TTO2+MY0yJv03xQWq3vQ8ssQUjs9GSeh1gnb1Y/bXVXJbWxWWZyRh9BA8RpXSc110ClKUClKUClKUClKUClKUClKUClKUClKUClKUClKUCoF+aEydFtdyr4SRRa0bHXSwO++R8lTU5IViOuDj142qG5EA9rLI+e3iY+lmQFj85NBj7qV8bPiH2WQ/dWDc3RjracR+xXJ+5KsVarq5WJGkc4VRkn0D0eJ9FBADnGI/8AdeI/YbsffHUbHeWovm4gLLiHbNCICfYc47oYtndep2HqUVa7e/V2dQHygBJKkA6hnAPQkY3XqPEbiua047FLMIV1atGs5GMbIcMDupw42I8DQcnuoX4FxD7M4++vPdR/sPEPqD/FW5uZrcSGLv6g4jxoJyxKDYdcd9d8dMkZAJqaoK/7qB42PEB/dyfuNdNlzFFJrLJPCFKAm4hkgUmRgqBXcBWJYgYBO5HnqXqvc7LqhgQ+S15ZhvULmNgPpBaCw0pSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSg8YZGKguRP5utR72MJ9Alc/sqanQsrKG0kggMPAkYz8lV+14Ze20aQW8tp2MaIidpHKXwqgZdlkAJJydh40FkrTdxF0ZV0ZPv11L8q5GfnqGK8U9/YH+xOP8Zr3/AKU/2D/16D3h3BJYUkg7VHicMRrjJcM/l6zq0uu+wwCBgb4rksOW3gnVgtu6hdOsqVddlUaVwRsFx1HU7V0gcU99YD+zOf8AEKwhk4i+Ss3DzglThJjhlOGB/SdQfCrUjli5SZHVo5UUJM0qhlZ9RYYyw1qB58KAM1axUDo4n+ssPqp/zKdnxT9bYfVT/mUVP1XefDi1jf3t3ZN/72EfjWZXinv7A/2Jx/jNYycNurnQt01uESWKbEXaHWYm1qra+g1BG2z5OKgm/ZKa+y1rrxq0ZGrSSQDp642O/ordVR595IXinsdxM0EsDkrKmdWllOVyCD5QU9fA+eu/gfGyXFndJ2Nyo2XJKTKu3aQOfLHnU95fHwJCfpSuCHiqvK0SpKdLFGfQdAYKGI1ePUdPGg76VXuZ+KkK1vCziXXaqzAHuJcz9mWBx10rJ6tjXZY8MS2Yubi4bIxiad3Xz5AY7HAO/mzQStKhYuGJFMrm8uCxYlY3nyrE52CHqB4D0UueGK8+r2ZcKxIYRLMAuFxnCYzjbf10E1SoriHDFuCJBc3CDGB2MuhTvnO3U+ml/YJLGga4mRU/ppMyFsDB1sD3qCVpUS1lGIBbm5mAO4ft2EpGrO0mdRG4H7KyhtRZwSsJJ5cKz/pJGkburnCk+rpQSlK4OASyPaW7zEGRoo2kIGAXZAWwPAZJpQd9KUoFKUoFKUoFKUoFV3kXe2lbxN3eE/apR+FWKq7ySNME6+9vLsfPcyMPvoLFSoLh085udDvqxGzTAAaI3Zl7JEbAJOnXnOdsHbIqdoFKUoFcHGOEQ3cfZzJqGcqQSrIw6PG43Rh5wa76UFW9sZ+HHTeMZrbYLdgd6P0XSgYx/wDtXb3wHU5twxpJQ8cTRkzdo0yzllZPHQoP9IYGCoAznJIFWR1BBBAIOxB8R6aq0tpLwsmS2RpbTOZLdd3gHUvbDqy+eL6PvSG7iEr2XaSjMhka1hQuRqZnnZWHdA6CTI9VdHM3BjdqoR1BXUO9kjvjSTgeOCRn0+k1IQywXkKupSaJxqU7MCCMZHp3IrTwzgFrbMXgt4o2I0kooBIznH7BQcFzy6HltJNQ/Q7NglRjRj9Go8nLAeI2z1zXJ7mZlvTdLOpysq47ylRJkjHlA7kb+jpUvbct2kcvbpbxrJktrAOctnJ6+k11RcLhSZ7hY1ErjSz+JAxgH5h81WpEDwzlZoYGhN0zgqFUHVpXBB1adW5yM+asL/lmSS1S3MsWU1b4de01f0nwdmO5Jwdyal7flqzjl7dLaJZcltYXvZbOTn05Pz0uuW7SWXt5LaJpMg6yuTlcaTn0YFKRCTcos8kUrSqCiRAKS0ijsiTgZwcHberZcTBEZ2IAVSxJ6AAZJPorh4pwC1umDT28cjAYBZckDOcCts/CIJFjR4lZY/IU9B3dOMeIxtg0qx5wG9a4tbed4+zaSJJGTrpLqGK/Jmva7VGBgUqD2lKUClKUClKhrzmi0hdo5JsMux7khH0gpH7aCZpVfPOvDx1ukHrDj7xXnu34b8Oh+VsUFgJqlf6OOPx3bX6RrKNF1Ix1rpx2h8jr5QKtkekVK+7fhvw6D6VcPC+YOE27TtFcxgzymaTGo5dlVSdh/VH7aCeseCwwkFBJkFjlpJG3bOokFsE71I1Ae7Ox+EA+pJT9y092Vj+vP1U38FBP0qCi5xsGdUF1GGYhVVtSkljgAagNyanAaD2lKUClK1zTqm7Mqj0kD76CucQ4XLaSNd2K6gx1XFpkBZfPJDnZJv2P0ODgia4RxSK6iWaFtSnIOxDKw2ZHU7qwOxU7itovYj/2sf0l/fXBDwyBbpruOTQzrplVWXRKRjQ7r79QMBhg4ODnAwEvSsO1X3w+cV4Z198vzig2UrSbuMf9on0h++sTfRfrY/pr++g6KVze2EP66P6a/vrZHcI3kup9RBoNtKUoFKUoFKUoFQHIg/kETeLmWRv96SaR3/axqfqB5HP8iRfeSTofXHcSKfuoJ6lKUHLBfxvJJEpYtHjX3H0gkZwHI0k7jIBJGRmtkdyrM6A95Mahg7ahkb+O3mqlXnDrxWuOy9k6mZ2gIfCgtJJ2hbBA8gR6dXj0wc1IWPD5obzLds0BCBO8zHtezwWmOSzp1AzsDuc5BWotdKUqKVXuQB/0dbt4uHlb/emkeRx9JjVhqi8q8HnktY3i4lcwAdpGY0S2dQYppEOntImIyQc70F6pVb9z12evGbz5IrEf8PXo4Bdr5PGLo+h4bNvuhBoLHmqxNbR3XE5Ypo0kjitoWVJFDrrlkmywVsgHEYGfTUHzFyhxOeeFouKMmkHVOFCMBnZBFGAJQdz3iAKmeCWskPEZElmeZjZw/pHVFLaJp87IoA8oeFBItylw89eH2Z//AIRfw1qPJXDD/q2y+zxfw1PUoK7JybwpRluHWIHnMEIHz4ovJ3CsBva6xwRkHsIcEecHFdPM9i80DKmtiRpCL2YGWIGslxkAAknB3Gdj0rl45waV0SOIkqoYHLKGw2BhMpjYZA3Ub0RkvKvCwoYWFjpbGk9jDg56YON81vj5Y4ed1sLPHogh/hqGk4FLLb2iGOROyJ1Ru0ZJJjYZ1KxGnJx5znzZzPctWTwWyRSKgZc6ihyGLHUzdBjJJqjH3L2PwC0+oi/hrWOUOHhg44faBlIKsIIgQQcgghdjU3SoqD5OneW2MruWLz3LDJJ0p7IkVFGfAKAK8rXyLtaFfFLm7U/JdzY/ZilBYaUpQKUpQeN6Kq3DYr+ziS3jtYJgoy0puDGXdyXkbR2Tae+zf0jU/f8AEUh0BslnOlEUFmYgZIAHmAySdhWA4rF2AuCSIzjcg5yzBQCOudRxQR44jxDx4dF8l2PyqHid/wDFyfak/gqXvryOCN5pXVERSzsxwAB1JqJ5Vu5rlZLuQlY5mzbRkYKwLsjt46pPLwegKjqDQY+2XEPi6L7WPyq89sOI/F0P2v8A5NWClBX/AGx4j8XQfbP+TQcR4j8XQfbP+TXnOLtCkN4pOLaVZJQDgGFgY5s+cKra/wCxU+rAgEHIoIWLiN8WUNYIASAWFyrYHicaBmunlvhrWtrDA7BnVcuw6NI5LyMM+BZmNSIYHoRt1r3NB7SlKBVdvY7iG8ku1t2nDRRwokbRqyhWkeR27RlG5KjAJ6VYqUFf9vrn4pu/rLP86nuguPim9+lafn1YKUFdPMVxkAcJvvpWg/8AvrL2/ufim8+nZ/n1YKr/AB9yL3hi5IBmmyAeuLaXGfP40Hnt9c/FN39ZZ/n09vrr4ou/rLP86rBSgr/t/dfFN39ZZ/n1nDx6YsFbhl4oJA1E2pAyep0zE4qepQRPK/D3t7fTLjtHkmlkwcgNNK8mAfEDUB8lKlqUClKUClKUEZxqIuqr2Uki76uzk7Nx5h5S5U7573m2PhF23Bplt1Qu+FdSkGpGVY1mVkUuVySqj32Nsb9TZ6qn+kS4vlto4+HKxuJZkUMAMIgy7s5OwXCgH/e23oPbge2N72XW1tHDSeaa6G6R/wBZYwQx/rlfemrSBUXyxww2lpDAdOpF75UsQzk5diW3YliSSdySTUrQKUpQa54VdWRgCrAqwPQgjBBqs8vT9nb3FjNIwNpmPXkhjbsuYJQwyc6O6W99G1WqqDz9dXdpe2V3bRKY3ZLa5frhJJk06kx4d7S2di523FB28GDwXLrCltKXhUkRMyLGI27odu9rd+0dtRwToO22azsJYWvV0ToSjzdo5dS8sr5HYDHVIxkHwBRQNw1WxEA6AD1DFEQDoAPUMdetBlSlKBSlKBSlKBVc5oyLnhbf7Wyn1NaXP4gVY6ov+k7i01s3DjHb9rm7QL3sYlKsiKdjswdt/DT0oLLxyeZQiwxudZId00ExqB1VWIBY9ATsOpz0PLyUmm0C6JF78p/SMHZtUrnJbUxPXG/mqeFFUDYDFB7SlKBSlKBUPxLjwhm7BLe4nfQJGEQj7isWVS2t16lWxjPkmpiq3Zuq8VvmbAxaWhJPgoku8/J1oNp5kfx4bf8A0IT90tPdK/xdf/VxD75a6BzJbdz9Iw1HG8cg0+TvICuYwdS4LYB1DHWs+Xr17iETsyFXJaMKrLpTOwYknUduoA9VBxnmSXw4Xfn+zbD75qyTmXG81nd26eMkqxaF8BqKSNjJwOnjThnNEEkQZ30NoZ2BSQDSoJZlyO8uAe8Njg4qK43xBriynk1IYvZMUaKFYHEd2iPqYnDasZ2AxnxoLkTUCvNUbANHb3ciHdZI4GdHU9GRh1B8DUrxUkQTFTg9m+D5jpOKh+WuIQQ2HD0LhNdtAIwc9OzjAyfAZZRk7ZYDqRQZ+6pPG0v/ALLMfuFYnm6L4NxD7FdfwVnNzEkhhS3ljLSuVGsMO6iFyVXYtkacMNiGzuOsne8SigKCVwpckLsTnHXoNgPEnYUESObYvgvEPsVz/BR+aIyMew78j/wk34rUja8at5R3JVPTbcHvEhdiMjONvPUfc832qJ2glRlGcknR9EuAG32ODtVGQ5nHwO/+zP8AjXvumHwO/wDs7fvqSseIxT6uykD6Tg4z5yMjzjIOCNjg+auG35hhM00DuFZJRGoOrvalhxg4wW1SqMAkjUpOM1B5a8yJJIsfse8Qt0L20yoMDPefTpUbdSalbW5SVFkjdXRwGVlIIZTuCCOoqBn4yZ/ZS28kRSKA5IJL9o6MV6HCgYHUZOfDG+nhfMdhaWlrFLeW0JFvCQjyxqwUxrpOknNB08F5iE8jI0lsN5QEWUmT9HIV3BAHhkgdMit9zxeRJUXsxoeZYVyTrfKamdBjGlRn16W8wzB+3fD3ZDccX4dKseoovaQLkspXMn6QhtmIwAo3zjzbra8tGlM0fFbTSMLEsbW+I0GNSKdRG5G5AB6DwFBbqrcHGLy47R7WC2MSyyxAyyyIxaGRo3OFjYY1K2N+mKHnvhyzm3e7jjcYwXOlGB8UlPcbzdc1nyFIGszjG1xdjI8cXc3ez456/LQPZXFfgdh9rm/y1a534lJp12Fg2lg65u5dmXow/k3UV3cV5ihtpBE5OoqW2xsAVA1EkAZ1eJrVccfYTGFI1bUdETF8BnGDKGGk6VUMN9ySGGBgZo0m64r4Wdh8t3N/lqyW44qettYD+8zn/hxW3hnG3lmeJkjTsx38OzHUpIbA0AacjYkgnPQVtTmCEwvP3tCMV6Y1HVpGgnZsnzH14oVzmbin6iwPo7ecft7Gsrbi1xG8aXkMMbTSCOLsZWlBbs5JG1ao0KgCM9M9akuGcQS4TWhOMsu4IPdJG4PTpmojmL/83hef18wHr9hz7/sPz1BYqUpQKqulH4pfIX0arO2QsGCkEyXfkk9CAc/KKtVcHEeC21yQZ7aCYjoZI0cjPXGoHFBD2vLUaMzC6Y6ypcfo+8qFGVcgbbp18Qx9dd8TPCiRRGB0RQoZ5SrHG24VCP21obkjhh/1bZ/URfw1D3nLNinELSBbCzEbw3DOvseHdozDoOdOdtTfPVI6n5YiKafZjhuz7HXmHPZaSugDTj+kTnrWfNEaR8PkRZAxaZCu4Pflu1ZRt/WbArvHJ/Dvi6y+zw/w1na8qWEUiyx2NqjqcqyQxqQfOCBSiQ4hIqxSM5woRix8yhSSfmqocG5ca54bw5XmeMraW6OgHgoicg9MHuAb5q6yIGBVgCCCCCMgg9QR4ioa45SsJHaR7OEsxJZtIySepNQeWXBGiKv2naOg0qMaFKrGERTjVjpkt5z0A2rdNYPOQZlVAEkQaJC+RKuls5RcYxt1rnHJth4WkY9WofcaHk6xO3sZfpSfxUHLHyhpC6bqVWBBLAISSn/VklgScb9Sc58wAHUvLMYjSJXYBC5XofLZWwfVprz3F8P+BxfMf309xfD/AIFD81WpHvDeEPZ6+xIl1nftJCmlQWKgEIxPlttsB4AZOdEvLbSO0rTFWMglRQFZUcNA3UgGQfoR5vLb0EbvcXw/4FB9GnuL4f8AAofo0pGdrwxbS2lDyl17LvuwA2SPSzHGwyBmsOVLFWsLMyxIXFvCG1KpIxGu24rZDynZIQy2yjrtliCCCCCpOCME7EVNAY2FRWlbOMdI0HqVf3Vpl4Tbt5VvC3rjQ/eK7aUFfj5MsBcG6NrG0m2nUAVTH6tPJQ+OQM+mtfIQ/ksm3dN3elfSpvJsH1VZKgbjlG1dtWJ08NMVzcxIMeZI5Ao+QUHdfcHhmftHTvhSgbJyAc9B08T4Vrbl+3J1CIB9TP2i5V9TtqY6xv1/Zt0rg9xdt4S3w/v97+bQ8m256zX5/v15+EtBL2vDo4lZUBGryjqbJOMaixOdXp65rRDwSJFZFDaGIJQsWXOrUSA2cEnr58nzmo73FWv6y9+3Xv5te+4q19/e/br382gm7O0SJdKAAZJ6AeUxPh66heZgPZXC/feynI9XsO4DH5jXnuKtfCS9H9+vfza7eG8vQwOHBmdhnSZppZimRhtBkY6cjriglqUpQKVjLIFBZiAACST0AG5JNQo5w4d8PtfrU/fQTlV/i23EeHnzrdL86Rt/hroHNdgf+/Wv10f76pvNRsrniXD7scSt1SFm7ZRcIAQoLRHGrfvbH0Gg+lUqD92HD/h9t9an76yi5tsGIUX1sSdgO1Tc/PQTVKZpQKUpQKUpQKVi7gAkkADqTtWMUyuMqysOmQQRnzbUGylaY7pGZkV0LL5ShgSvrA6VuoFKUoFKUoFV7mBj7N4YMnBmmz6SLaXGfP41YarnNGRc8LYfC2U+prS5/ECgsdKUoFKUoFKUoK/z5/N8499oQnzB5UVj8xNTbQIeqL8wqE5//m25PmQH5nU11cas5pChibAAbUutk1E6dO49TfPQdUkMAOGWIHBbBC50jqfUMjetUc1qdIVrc6/IwY+9vju+ffzVAz8v3L6GJjbT2SkNqLNGkY1oZM9GfV1G+d6kOHcKkF1JcsNAYbRroPowxx12B7pxk+NVE2IlH9FfmFYyQIRuin1qDUBb2d0PZKtrzLqMbh0IQaQApXbD7eUARv6K7uX7CWESiSQuC+VyMYGhRsc9Nv2VFc/Ichfhto5Jy8Suc9cv3iPkJxU/Va5Pn7PhUD6HfTGe4gyx0sw0qPE1A8E/0mm5u5rc8MvUEaBsdmWlyWx3owO4Ou+TQfQ6VXhzWvwPiA/usn4V6ea4/G14h9kn/BaCwUquNzhCOttxD7FdH7krwc62/wCo4h9gvPyqCQ5mjV7WRHcIrFAWZC6jvr5Sjqp6HO2DvUfwuaUCUIIXhVv+sRGjLLoBfs1QESMOgIxnYdQa992dt+qvvsF7+VXnu0tf1d79hvvyaDl4FEI7qMROkidiyEJEyCBAdS94k5ZjgEMSTpztg5t1Vv3a2vvL37Dffk0PO1p728H9xvfyaCyUqtrzxZ/7UPXZ3g++KsxzrZfrJR67e5H3x0FhpVfHOlh8JA9aSD71r33a8O8b2EetsffQT9V/m0d/h5817H/5opl/xVj7uuF/GVp9cn76i+PczWVw1lHBe20r+zIDojlRmxlsnSDnG9BdqUpQKUpQKUpQRfM3DWurWSBCoL6PKzgqsisy7dMqCud8Zzg9K4fbDifjw61+S+b8bYVYqUFePEuJeHDYftm3/wAP4VieI8U8OHWvy3zf5arHSgrns/inxdafbn/yterxDiX9Lh1v61vC33wLVipQRvLnDTa2kFuzBmjjVWYbBmx3yB5ic1IaBnOBnGM+OPNmsqUClKUClKUClKUClKUClKUClKUGJQHqB81YC3TOdC58+BW2lApSlApSlApSlB//2Q==)\n\n   常用配置：\n\n   ```shell\n   appendonly yes\n   appendfilename \"appendonly-${port}.aof\"\n   appendfsync everysec\n   dir /bigdiskpath\n   no-appendfsync-on-rewrite yes\n   auto-aof-rewrite-percentage 100\n   auto-aof-rewrite-min-size 64mb\n   ```\n\n## RDB 和 AOF 的抉择\n\n### RDB 和 AOF 比较\n\n| 命令       | RDB    | AOF          |\n| ---------- | ------ | ------------ |\n| 启动优先级 | 低     | 高           |\n| 体积       | 小     | 大           |\n| 恢复速度   | 快     | 慢           |\n| 数据安全性 | 丢数据 | 根据策略决定 |\n| 轻重       | 重     | 轻           |\n\n### RDB 最佳策略\n\n1. “关”\n2. 集中管理\n3. 主从，从开\n\n### AOF 最佳策略\n\n1. ”开“：缓存和存储\n2. AOF 重写集中管理\n3. everysec\n\n### 最佳策略\n\n1. 小分片\n2. 缓存或者存储\n3. 监控（硬盘、内存、负载、网络）\n4. 足够的内存\n\n## 开发运维常见问题\n\n### fork 操作\n\n1. 同步操作\n2. 与内存量息息相关：内存越大，耗时越长（与机器类型有关）\n3. info: latest_fork_usec 查询上一次 fork 的时间\n\n如何改善fork\n\n1. 优先使用物理机或者高效支持 fork 操作的虚拟化技术\n2. 控制 Redis 实例最大可用内存：maxmemory\n3. 合理配置 Linux 内存分配策略：vm.overcommit_memory = 1\n4. 降低 fork 频率：例如放宽 AOF 重写自动触发时机，不必要的全量复制\n\n### 进程外开销\n\n子进程开销和优化\n\n1. CPU：\n   - 开销：RDB 和 AOF 文件生成，属于 CPU 密集型\n   - 优化：不做 CPU 绑定，不和 CPU 密集型部署\n2. 内存：\n   - 开销：fork 内存开销，copy-on-write。\n   - 优化：echo never > /sys/kernel/mm/transparent_hugepage/enabled\n3. 硬盘\n   - 开销：AOF 和 RDB 文件写入，可以结合 iostat，iotop 分析\n   - 优化：\n     - 不要和高硬盘负责服务部署在一起：存储服务、消息队列等\n     - no-appendfsync-on-rewrite = yes\n     - 根据写入量决定磁盘类型：例如 ssd\n     - 单机多实例持久化文件目录可以考虑分盘\n\n### AOF追加阻塞\n\n![](https://upload-images.jianshu.io/upload_images/12588973-ed80e9c29a4d1ef2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700)\n\nAOF 阻塞定位\n\n​\tReids 日志：\n\n​\tAsynchronous AOF fsync is taking too long (disk is busy?).\n\n​\tWriting the AOF buffer without waiting for fsync to complete,this may slow down Redis.\n\n​\tinfo Persistence:\n\n​\t...\n\n​\taof_delayed_fsync: 100\n\n​\t...\n\n### 单机多实例部署\n\n## Redis 复制的原理与优化\n\n### 什么是主从复制\n\n（1）单机有什么问题？\n\n​\t机器故障\n\n​\t容量瓶颈\n\n​\tQPS 瓶颈\n\n（2）作用\n\n​\t数据副本\n\n​\t扩展读性能\n\n### 复制的配置\n\n两种实现方式\n\n1. slaveof 命令\n\n2. 配置\n\n   ```shell\n   slaveof ip port\n   slave-read-only yes\n   ```\n\n### 全量复制和部分复制\n\n查看 run_id\n\n```shell\nredis-cli -p 6379 info server | grep run\n```\n\n查看偏移量\n\n```shell\nredis-cli -p 6379 info replication\n```\n\n全量复制开销：\n\n1. bgsave 时间\n2. RDB文件网络传输时间\n3. 从节点清空数据时间\n4. 从节点加载 RDB 的时间\n5. 可能的 AOF 重写时间\n\n### 故障处理\n\n### 开发运维常见问题\n\n1. 读写分离\n\n   将读流量分摊到从节点\n\n   可能遇到的问题：\n\n   - 复制数据延迟\n   - 读到过期数据\n   - 从节点故障\n\n2. 主从配置不一致\n\n3. 规避全量复制\n\n   - 第一次不可避免\n   - 系欸但运行 ID  不匹配\n     - 主节点重启\n     - 故障转移\n   - 复制积压缓冲区不足\n     - 网络中断，部分复制无法满足\n     - 增大复制缓冲区配置 rel_backlog_size，网络“增强”。\n\n4. 规避复制风暴\n\n   - 单主节点复制风暴\n     - 问题：主节点重启，多从节点复制\n     - 解决：更换复制拓扑\n   - 单机器复制风暴\n     - 机器宕机后，大量全量复制\n     - 主节点分散多机器\n\n## Redis Sentinel\n\n### 主从复制高可用存在的问题\n\n1. 手动故障转移\n2. 写能力和存储能力受限\n\n### 架构说明\n\n客户端不直接访问 redis，而是通过 sentinel 来访问。由 sentinel 来负责主从节点的管理。\n\n### 安装配置\n\nsentinel 的默认端口为 26379\n\n1. 配置开启主从节点\n2. 配置开启 sentinel 监控主节点（sentinel 是特殊的 redis）\n\n### 客户端连接\n\n请求相应流程\n\njedis\n\n```shell\nJedisSentinelPool sentinelPool = new JedisSentinelPool(masterName, sentinelSet, poolConfig, timeout);\nJedis jedis = null;\ntry {\n    jedis = redisSentinelPool.getResource();\n    // jedis command\n} catch (Exception e){\n    logger.error(e.getMessage(), e);\n} finally {\n    if (jedis != null){\n        jedis.close();\n    }\n}\n```\n\n\n\nredis-py\n\n### 实现原理\n\n### 常见开发运维问题\n\n## Redis Cluster\n\n### 呼唤集群\n\n1. 超高并发量需求\n2. 超大数据量需求\n\n### 数据分布\n\n顺序分布\n\n哈希分布\n\n- 节点取余\n  - 使用多倍扩容降低迁移率\n- 一致性哈希\n  - 顺时针取余\n  - 只影响邻近节点\n  - 扩容后会存在负载不均衡的情况\n- 虚拟槽\n  - 每个槽映射一个数据子集\n  - 良好的哈希函数：例如 CRC16\n  - 服务端管理节点、槽、数据：例如 Redis Cluster\n\n| 分布方式 | 特点                                                         | 典型产品                                     |\n| -------- | ------------------------------------------------------------ | -------------------------------------------- |\n| 哈希分布 | 数据分散度高<br />键值分布业务无关<br />无法顺序访问<br />支持批量操作 | 一致性哈希 Memcache<br />Redis Cluster<br /> |\n| 顺序分布 | 数据分散度易倾斜<br />键值业务相关<br />可顺序访问<br />不支持批量操作 | BigTable<br />HBase                          |\n\n### 搭建集群\n\n### 集群伸缩\n\n### 客户端路由\n\n### 集群原理\n\n### 开发运维常见问题\n\n### Redis Cluster 架构\n\n1. 节点\n2. meet\n3. 指派槽\n4. 复制\n\n### Redis Cluster 特性\n\n1. 复制\n2. 高可用\n3. 分片\n\n### 两种安装方式\n\n#### 原生命令安装\n\n1. 配置开启节点\n\n   ```shell\n   port ${port}\n   daemonize yes\n   dir \"/opt/redis/data\"\n   dbfilename \"dump-${port}.rdb\"\n   logfile \"${port}.log\"\n   cluster-enabled yes\n   cluster-config-file nodes-${port}.conf\n   ```\n\n2. meet\n\n   ```shell\n   cluster meet ip port\n   ```\n\n3. 指派槽\n\n   ```shell\n   cluster addslots slot [slot ...]\n   ```\n\n4. 分配主从关系\n\n   ```shell\n   cluster replicate node-id\n   ```\n\n####  官方工具安装\n\n\n\n> 链接：https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww \n> 提取码：5r0v\n\n","source":"_posts/Redis学习笔记.md","raw":"---\ntitle: Redis学习笔记\ntags:\n  - Redis\ncategories:\n  - Cache\n  - Redis\ndate: 2018-12-25 23:27:15\n---\n\n\n# 简介\n\n> [Redis-GitHbu](https://github.com/antirez/redis)\n\n## 什么是Redis\n\n## 有哪些公司在使用Redis\n\nGitHub, Twitter, Stackoverflow, Alibaba, 百度，微博，美团，搜狐\n\n## Redis的八大特性\n\n1. 速度快\n2. 支持持久化\n3. 存在多种数据结构\n4. 支持多种语言\n5. 功能丰富\n6. 简单（代码量小，使用方便）\n7. 主从复制\n8. 高可用，分布式\n\n### 速度快\n\n官方给的指标是10w OPS（每秒十万次读写）\n\n这么快的原因：\n\n- 数据存放在内存中\n- 使用C语言编写（大约五万行代码），C语言离操作系统较近\n\n- 线程模型为单线程\n\n### 持久化\n\nRedis所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。\n\n### 多种数据结构\n\n五大数据结构：\n\n1. Strings\n2. Hash Tables\n3. Linked Lists\n4. Sets\n5. Sorted Sets\n\n其他新结构：\n\n6. BitMaps: 位图（本质是字符串，可以实现类似[布隆过滤器](https://china.googleblog.com/2007/07/bloom-filter_7469.html)的功能）\n7. HyperLogLog：超小内存唯一值计数（本质是字符串）\n8. GEO：地理信息定位（本质是有序集合，Redis-3.2后提供）\n\n### 支持多种客户端语言\n\nJava，PHP，python，Ruby，Lua，nodejs\n\n### 功能丰富\n\n1. 发布订阅模式\n2. Lua脚本\n3. 事务\n4. pipeline（提高客户端并发效率）\n\n## 典型应用场景\n\n- 缓存系统\n- 计数器（微博的转发数，评论数以及视频网站的播放数等）\n- 消息队列系统 \n- 排行榜\n- 社交网络（粉丝数，关注数，共同关注数）\n- 实时系统（垃圾邮件处理系统，布隆过滤器）\n\n# 安装Redis\n\n## Redis安装\n\n### Linux系统下安装Redis\n\n```shell\n# 1. 下载\n$ wget http://download.redis.io/releases/redis-5.0.3.tar.gz\n# 2. 解压缩\n$ tar xzf redis-5.0.3.tar.gz\n# 3. 建立一个软连接\n$ In -s redis-5.0.3 redis\n$ cd redis-5.0.3\n# 4. 编译\n$ make\n# 5. 安装\n$ make install\n```\n\n\n\n## 可执行文件说明\n\n| 可执行文件       | 说明                      |\n| ---------------- | ------------------------- |\n| redis-server     | Redis服务器               |\n| redis-cli        | Redis命令行客户端         |\n| redis-benchmark  | Redis性能测试工具         |\n| redis-check-aof  | AOF文件修复工具           |\n| redis-check-dump | RDB文件修复工具           |\n| redis-sentinel   | Sentinel服务器（2.8以后） |\n\n\n\n## 三种启动方法\n\n### 最简启动\n\n直接使用`redis-server`\n\n### 动态参数启动\n\n```shell\nredis-server --port 6380 # 默认端口是6379\n```\n\n### 配置文件启动\n\n```shell\nredis-server configPath\n```\n\n### 验证方法\n\n```shell\nps -ef|grep redis\nnetstat -antpl|grep redis\nredis-cli -h ip -p port ping\n```\n\n### 比较\n\n- 生产环境推荐配置启动\n- 单机多实例配置文件可以用端口区分开\n\n## 简单的客户端连接\n\n### 连接\n\n```shell\nredis-cli -h 10.10.79.150 -p 6384\nping\nset hello world\nget hello\n```\n\n### 返回值\n\n1. 状态回复（如`ping`返回`PONG`）\n2. 错误回复（如`(error) WRONGTYPE Operation against`）\n3. 整数回复（如`incr hello`回复`(integer) 1`）\n4. 字符串回复（如`get hello`回复`\"world\"`）\n5. 多行字符串回复（如`mget hello foo`返回`\"world\" \"bar\"`）\n\n## Redis常用配置\n\n| 属性      | 说明                                                         |\n| --------- | ------------------------------------------------------------ |\n| daemonize | 是否是守护进程（no默认\\|yes推荐）                            |\n| port      | Redis对外端口号，默认为6379<br />7379对应手机按键上MERZ对应的号码，MERZ取自意大利歌女Alessia Merz的名字 |\n| logfile   | Redis系统日志                                                |\n| dir       | Redis工作目录                                                |\n\n# Redis API\n\n## 通用命令\n\n1. keys\n\n   eg：`keys *` 遍历所有的key\n\n   怎么用：\n\n   ​\t热备从节点\n\n   ​\tscan\n\n2. dbsize\n\n   计算key的总数\n\n3. exists key\n\n   检查key是否存在，存在返回1，否则返回0\n\n4. del key [key ...]\n\n   删除指定key-value，成功返回1，否则返回0\n\n5. expire key seconds\n\n   `ttl key`查看key剩余的过期时间\n\n   `persist key`去掉key的过期时间\n\n6. type key\n\n   返回key的类型（string，hash，list，set，zset，none）\n\n| 命令   | 时间复杂度 |\n| ------ | ---------- |\n| keys   | O(n)       |\n| dbsize | O(1)       |\n| del    | O(1)       |\n| exists | O(1)       |\n| expire | O(1)       |\n| type   | O(1)       |\n\n## 数据结构和内部编码\n\n### 内部编码\n\n![Redis 内部编码](https://i.loli.net/2018/12/25/5c2240654f22b.png)\n\n### 字符串键值结构\n\n| key     | value                                                        |\n| ------- | ------------------------------------------------------------ |\n| hello   | world                                                        |\n| counter | 1                                                            |\n| bits    | \\|1\\|0\\|1\\|1\\|1\\|0\\|1\\|                                      |\n|         | {<br />\"prodduct\":{<br />\"id\": \"3242\"<br />\"name\": \"test423\"<br />}<br />} |\n\nValue up to 512MB，up to 100k is recommended\n\n#### 场景\n\n- 缓存\n- 计数器\n- 分布式锁\n\n#### 命令\n\n```shell\n# 1. 获取key对应的value O(1)\nget key\n# 2. 设置key-value O(1)\nset key value\n# 3. 删除key-value O(1)\ndel key\n```\n\n```shell\n# 1. key自增1，如果key不存在，自增后get（key）=1 O(1)\nincr key\n# 2. key自减1，如果key不存在，自减后get（key）=-1 O(1)\ndecr key\n# 3. key自增k，如果key不存在，自增后get（key）=k O(1)\nincrby key k\n# 4. key自减k，如果key不存在，自减后get（key）=-k O(1)\ndecrby key k\n```\n\n```shell\n# 1. 不管key是否存在，都设置 O(1)\nset key value\n# 2. key不存在，才设置 O(1)\nsetnx key value\n# 3. key存在，才设置 O(1)\nset key value xx\n```\n\n```shell\n# 1. 批量获取key，原子操作 O(n)\nmget key1 key2 key3...\n# 2. 批量设置key-value O(n)\nmset key1 value1 key2 vlaue2 key3 value3\n```\n\nn次get = n次网络时间 + n次命令时间\n\n1次mget = 1次网络时间 + n次命令时间\n\n```shell\n# 1. set key newvalue并返回旧的value O(1)\ngetset key newvalue\n# 2. 将value追加到旧的value O(1)\nappend key value\n# 3. 返回字符串的长度（注意中文） O(1)\nstrlen key\n```\n\n```shell\n# 1. 增加key对应的值3.5 O(1)\nincrbyfloat key 3.5\n# 2. 获取字符串指定下标范围内的值 O(1)\ngetrange key start end\n# 3. 设置指定下标范围内对应的值 O(1)\nsetrange key index value\n```\n\n##### 复杂度总结\n\n| 命令          | 含义                         | 复杂度 |\n| ------------- | ---------------------------- | ------ |\n| set key value | 是指key-value                | O(1)   |\n| get key       | 获取key-value                | O(1)   |\n| del key       | 删除key-value                | O(1)   |\n| setnx setxx   | 根据key是否存在设置key-value | O(1)   |\n| Incr decr     | 计数                         | O(1)   |\n| mget mset     | 批量操作key-value            | O(n)   |\n\n\n\n#### 实战\n\n1. 记录网站每个用户个人主页的访问量？\n\n   ```shell\n   incr userid:pageview\n   ```\n\n2. 缓存视频的基本信息（数据源在MySQL中）伪代码\n\n   ```java\n   public VideoInfo get(long id){\n       String redisKey = redisPrefix + id;\n       VideoInfo videoInfo = redis.get(redisKey);\n       if(videoInfo == null){\n           videoInfo = mysql.get(id);\n           if(videoInfo != null){\n               //序列化\n               redis.set(redisKey, serialize(videoInfo));\n           }\n       }\n       return videoInfo;\n   }\n   ```\n\n3. 分布式计数器\n\n   incr id (原子操作)\n\n### Hash键值结构\n\n| key         | field                   | value                    |\n| ----------- | ----------------------- | ------------------------ |\n| user:1:info | name<br />age<br />Date | Ronaldo<br />32<br />239 |\n\n#### 特点\n\n1. 是一个`value`为`Map`的`Map`\n\n2. `field`不能相同，`value`可以相同\n\n#### API\n\n所有以哈希为结构的命令都是以`H`开头的。\n\n```shell\n# 1. 获取hash key对应的field的value O(1)\nhget key field\n# 2. 设置hash key对应field的value O(1)\nhset key field value\n# 3. 删除hash key对应field的value O(1)\nhdel key field\n```\n\n```shell\n# 1. 判断hash key是否有field O(1)\nhexists key field\n# 2. 获取hash key field的数量 O(1)\nhlen key\n```\n\n```shell\n# 1. 批量获取hash key的一批field对应的值 O(n)\nhmget key field1 field2... fieldN\n# 2. 批量设置hash key的一批field value O(n)\nhmset key field1 value1 field2 value2...fieldN valueN\n```\n\n```shell\n# 1. 返回hash key对应所有的field和value O(n)\nhgetall key\n# 2. 返回hash key对应所有field的value O(n)\nhvals key\n# 3. 返回hash key对应多有field O(n)\nhkeys key\n```\n\n```shell\n# 1. 设置hash key对应field的value（若field已存在，则失败） O(1)\nhsetnx key field value\n# 2. hash key对应的filed的value自增intCounter O(1)\nhincrby key field intCounter\n# 3. hincrby浮点数版 O(1)\nhincrbyfloat key field floatCounter\n```\n\n##### 复杂度总结\n\n| 命令                | 复杂度 |\n| ------------------- | ------ |\n| hget hset hdel      | O(1)   |\n| hexists             | O(1)   |\n| hincrby             | O(1)   |\n| hgetall hvals hkeys | O(n)   |\n| hmget hmset         | O(n)   |\n\n### 列表\n\n#### 特点\n\n1. 有序（根据插入顺序得到遍历顺序）\n2. 可以重复\n3. 左右两边都可以插入和弹出\n\n#### API\n\n列表的API都以`L`开头\n\n##### 增\n\n```shell\n# 1. 从列表右端插入值 O(1)\nrpush key value1 value2 ... valueN\n# 2. 从列表左端插入值 O(1)\nlpush key value1 value2 ... valueN\n# 3. 在list指定的值前|后插入newValue O(n)\nlinsert key before|after value newValue\n```\n\n##### 删\n\n```shell\n# 1. 从列表左侧弹出一个item O(1)\nlpop key\n# 2. 从列表右侧弹出一个item O(1)\nrpop key\n```\n\n```shell\n# 3. 根据count值，从列表中删除所有value相等的项 O(n)\n# （1）count>0，从左到右，删除最多count个value相等的项\n# （2）count<0，从右到左，删除最多Math。abs（count）个value相等的项\n# （3）count=0，删除所有value相等的项\nlrem key count value\n```\n\n```shell\n# 4. 按照索引范围修剪列表 O(n)\n# \t 如ltrime listkey 1 4 是指删除除了下标为1-4（包括1和4）其他项\nltrim key start end\n```\n\n##### 查\n\n```shell\n# 1. 获取列表指定索引范围所有item O(n)\n#  \t 如lrange listKey 0 2获取的是下标0-2（包括0和2）的项\n#  \t 再如lrange listKey 1 -1获取的是下标1-（len-1）的项\nlrange key start end\n```\n\n```shell\n# 2. 获取列表指定索引的item O(n)\n#    如lindex listkye -1 取到的是最后一个元素\nlindex key index\n```\n\n```shell\n# 3. 获取列表长度 O(1)\nllen key\n```\n\n##### 改\n\n```shell\n# 1. 设置列表指定索引值为newValue O(n)\nlset key index newValue\n```\n\n##### 其他\n\n```shell\n# 1. lpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)\nblpop key timeout\n# 2. rpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)\nbrpop key timeout\n```\n\n##### TIPS\n\n1. LPUSH + LPOP = Stack\n2. LPUSH + RPOP = Queue\n3. LPUSH + LTRIM = Capped Collection\n4. LPUSH + BRPOP = Message Queue\n\n#### 实战\n\n1. TimeLine\n\n#### 实战\n\n1. 记录网站每个用户个人主页的访问量\n\n   ```shell\n   hincrby user:1:info pageview count\n   ```\n\n2. 缓存视频的基本信息（数据源在mysql中）伪代码\n\n   ```java\n   public VideoInfo get(long id){\n       String redisKey = redisPrefix + id;\n       Map<String, String> hashMap = redis.hgetAll(redisKey);\n       VideoInfo videoInfo = transferMapToVideo(hashMap);\n       if(videoInfo == null){\n           videoInfo = mysql.get(id);\n           if(videoInfo != null){\n               redis.hmset(redisKey, transferVideoToMap(videoInfo));\n           }\n       }\n       return videoInfo;\n   }\n   ```\n\n\n## 单线程架构\n\nRedis在同一时刻只会执行一条命令\n\n### 单线程为什么这么快\n\n1. 纯内存\n\n2. 非阻塞IO\n\n3. 避免线程切换和竞态消耗\n\n4. 拒绝长（慢）命令\n\n   ​\tkeys, flushall, flushdb, slow lua script, mutil/exec, operate big value(collection)\n\n5. 其实不是单线程\n\n   fysnc file descriptor\n\n   close file descriptor\n\n# Redis客户端\n\n## Java客户端：Jedis\n\n### 获取Jedis\n\n1. 添加`Maven`依赖\n\n```xml\n<!-- https://mvnrepository.com/artifact/redis.clients/jedis -->\n<dependency>\n    <groupId>redis.clients</groupId>\n    <artifactId>jedis</artifactId>\n    <version>2.9.0</version>\n</dependency>\n```\n\n2. Jedis直连（TCP连接）\n\n   ```java\n   Jedis jedis = new Jedis(\"127.0.0.1\", 6379);\n   jedis.set(\"hello\",\"world\");\n   String value = jedis.get(\"hello\");\n   ```\n\n   `Jedis(String host, int port, int connectionTimeout, int soTimeout)`\n\n   - host : Redis节点所在机器的IP\n   - port : Redis节点的端口\n   - connectionTimeout : 客户端连接超时时间（内部使用socket技术）\n   - soTimeout : 客户端读写超时时间\n\n### Jedis基本使用\n\n### Jedis连接池使用\n\n#### 简单使用\n\n```java\n// 初始化Jedis连接池，通常来讲JedisPool是单例的。\nGenericObjectPoolConfig poolConfig = new GenericObjectPoolConfig();\nJedisPool jedisPool = new JedisPool(poolConfig, \"127.0.0.1\", 6379);\n\nJedis jedis = null;\ntry{\n    // 1. 从连接池获取jedis对象\n    jedis = jedisPool.getResource();\n    // 2. 执行操作\n    jedis.set(\"hello\", \"world\");\n} catch (Exception e){\n    e.printStackTrance();\n} finally {\n    if(jedis != null){\n        // 如果使用JedisPool，close操作不是关闭连接，二十代表归还连接池。\n        jedis.close();\n    }\n}\n```\n\n\n\n|        | 优点                                                         | 缺点                                                         |\n| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |\n| 直连   | - 简单方便<br />- 适用于少量长期连接的场景                   | - 存在每次新建/关闭TCP开销<br />- 资源无法控制，存在连接泄露的可能<br />- Jedis对象线程不安全 |\n| 连接池 | - Jedis预先生成，降低开销使用<br />- 连接池的形式保护和控制资源的使用 | 相对于直连，使用相对麻烦，尤其在资源的管理上需要很多参数来保证，一旦规划不合理也会出现问题。 |\n\n\n\n## python客户端：redis-py\n\n### 源码安装\n\n> [Redis-clients-python](https://redis.io/clients#python)\n\n```shell\nwget https://github.com/andymccurdy/redis-py/archive/3.0.0.zip\nunzip redis-3.0.0.zip\ncd redis-3.0.0\n# 安装redis-py\nsudo python setup.py install\n```\n\n### 简单使用\n\n```python\nimport redis\nclient = redis.StrictRedis(host='127.0.0.1', port=6379)\nkey = \"hello\"\nsetResult = client.set(key, \"python-redis\")\nprint setResult\nvalue = client.get(key)\nprint \"key:\" + key + \", value:\" + value\n```\n\n## Go客户端\n\n ```go\nc,err := redis.Dial(\"tcp\", \"127.0.0.1:6379\")\nif err != nil{\n    fmt.Println(err)\n    return\n}\ndefer c.Close()\nv, err := c.Do(\"SET\", \"hello\", \"world\")\nif err != nil{\n    fmt.Println(err)\n    return\n}\nfmt.Println(v)\nv, err = redis.String(c.Do(\"GET\", \"hello\"))\nif err != nil {\n    fmt.Println(err)\n    return\n}\n ```\n\n# 瑞士军刀Redis\n\n## 慢查询\n\n### 生命周期\n\n![](https://i.loli.net/2018/12/27/5c2419d644e00.png)\n\n1. 慢查询发生在第三阶段\n2. 客户端超时不一定是慢查询导致的，慢查询只是导致客户端超时的一个可能因素\n\n### 两个配置\n\n#### slowlog-max-len\n\n1. 先进先出队列\n2. 固定长度\n3. 保存在内存内\n\n#### slowlog-log-slower-than\n\n1. 慢查询阈值（单位：微妙，1毫秒等于1000微秒）\n2. slowlog-log-slower-than=0，记录所有命令\n3. slowlog-log-slower-than<0，不记录任何命令\n\n#### 配置方法\n\n1. 默认值\n   - config get slowlog-max-len = 128\n   - config get slowlog-log-slower-than = 10000\n2. 修改配置文件后重启（适用于未启动时）\n3. 动态配置\n   - config set slowlog-max-len 1000\n   - config set slowlog-log-slower-than 1000\n\n### 三个命令\n\n1. slowlog get [n] ：获取慢查询队列\n2. slowlog len ：获取慢查询队列长度\n3. slowlog reset ：清空慢查询队列\n\n### 运维经验\n\n1. slowlog-max-len不要是指过大，默认10ms，通常是指1ms\n2. slowlog-log-slower-than不要设置太小，通常设置1000左右\n3. 理解命令生命周期\n4. 定期持久化慢查询\n\n## pipeline\n\n### 什么是流水线\n\n流水线就是一次网络连接里传输一批命令，节省网络传输时间\n\n| 命令   | N个命令操作       | 1次pipeline       |\n| ------ | ----------------- | ----------------- |\n| 时间   | n次网络 + n次命令 | 1次网络 + n次命令 |\n| 数据量 | 1条命令           | n条命令           |\n\n注意：\n\n1. Redis的命令时间是微秒级别。\n2. pipeline每次条数要控制（网络）。\n\n### 客户端实现 pipeline-Jedis\n\n```java\n// before pipeline\nJedis jedis = new jedis(\"127.0.0.1\", 6379);\nfor (int i = 0; i < 10000; i++){\n    jedis.hset(\"hashkey:\" + i, \"field\" + i, \"value\" + i);\n}\n```\n\n```java\n// after pipeline\nJedis jedis = new jedis(\"127.0.0.1\", 6379);\nfor (int i = 0; i < 100; i++){\n    Pipeline pipeline = jedis.pipelined();\n    for(int j = i*100; j < (i+1)*100; j++){\n        pipeline.hset(\"hashkey:\" + j, \"field\" + j, \"value\" + j);\n    }\n    pipeline.syncAndReturnAll();\n}\n```\n\n\n\n### 与原生M操作做对比\n\nM操作是原子操作，pipeline是非原子操作。\n\n### 使用建议\n\n1. 注意每次pipeline携带数据量\n2. pipeline每次只能作用在一个Redis节点上\n3. M操作与pipeline区别\n\n## 发布订阅\n\n### 角色\n\n- 发布者（publisher）\n- 订阅者（subscriber）\n- 频道（channel）\n\n### 模型 \n\nRedis server中有各个频道。\n\n发布者向频道中发布消息\n\n订阅者收到其所订阅频道的消息，只能收到订阅时刻之后的消息，之前的收不到。\n\n![](https://upload-images.jianshu.io/upload_images/7432257-f91184b81f782b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp)\n\n需要注意的是，redis没有消息堆积的能力。\n\n### API\n\n#### publish\n\n```shell\npublish channel message\n```\n\neg:\n\n```shell\nredis> publish sohu:tv \"hello world\"\n(integer) 3 # 订阅者个数\n```\n\n#### subscribe\n\n```shell\nsubscribe [channel] # 一个或多个\n```\n\n#### unsubscribe\n\n```shell\nunsubcribe [channle] # 一个或多个\n```\n\n#### 其他\n\n ```shell\n# 1. 订阅模式\npsubscribe [pattern]\n# 2. 推定指定的模式\npunsubscribe [pattern]\n# 3. 列出至少有一个订阅者的频道\npubsub channels\n# 4. 列出给定频道的订阅者数量\npubsub numsub [channel]\n# 5. 列出被订阅模式的数量\npubsub numpat\n ```\n\n### 发布订阅与消息队列   \n\n发布订阅是所有订阅者可以收到所有的消息\n\n消息队列是订阅者要进行消息抢夺，一条消息只有一个订阅者能够抢到。\n\n## Bitmap\n\n### 位图\n\n| b        | i        | g        |\n| -------- | -------- | -------- |\n| 01100010 | 01101001 | 01100111 |\n\n### 相关命令\n\n```shell\n# 1. 给位图指定索引设置值\nsetbit key offset value\n# 2. 获取位图指定索引的值\ngetbit key offset\n# 3. 获取位图指定范围（start到end，单位为字节，如果不指定就是获取全部）位值为1的个数\nbitcount key [start end]\n# 4. 做多个Bitmap的and（交集）、or（并集）、not（非）、xor（抑或）操作并将结果保存在destkey中\nbitop op destkey key [key...]\n# 5. 计算位图指定范围（start到end，单位为字节，如果不指定就是取全部）第一个偏移量对应的值等于targetBit的位置\nbitpos key targetBit [start][end]\n```\n\n### 独立用户统计\n\n1. 使用set和Bitmap\n2. 总共1亿用户，每日5千万独立访问。\n\n| 数据类型 | 每个userid只用空间                                           | 需要存储的用户量 | 全部内存量              |\n| -------- | ------------------------------------------------------------ | ---------------- | ----------------------- |\n| set      | 32位<br />（假设userid用的是整型，<br />实际很多网站用的是长整型） | 50，000，000     | 32位*50，000，000=100MB |\n| Bitmap   | 1位                                                          | 100，000，000    | 12.5MB                  |\n\n|        | 一天  | 一个月 | 一年 |\n| ------ | ----- | ------ | ---- |\n| set    | 200M  | 6G     | 72G  |\n| Bitmap | 12.5M | 375M   | 4.5G |\n\n如果只有10万对立用户：\n| 数据类型 | 每个userid占用空间 | 需要存储的用户量 | 全部内存量             |\n| -------- | ------------------ | ---------------- | ---------------------- |\n| set      | 32位               | 1,000,000        | 32位*1,000,000=4MB     |\n| Bitmap   | 1位                | 100,000,000      | 1位*100,000,000=12.5MB |\n\n### 使用经验\n\n1. type=string，最大512MB\n2. 注意setbit时的偏移量，可能有较大耗时\n3. 位图不是绝对好。\n\n## HyperLogLog\n\n### 是否是新的数据结构\n\n1. 基于 HyperLogLog 算法：极小空间完成独立数量统计。\n2. 本质还是字符串\n\n### 三个命令\n\n1. 向 hyperloglog 添加元素\n\n   ```shell\n   pfadd key element [element ...]\n   ```\n\n2. 计算 hyperloglog 的独立总数\n\n   ```shell\n   pfcount key [key ...]\n   ```\n\n3. 合并多个 hyperloglog\n\n   ```shell\n   pfmerge destkey sourcekey [sourcekey ...]\n   ```\n\n### 内存消耗\n\n### 使用经验\n\n1. 存在错误率（0.81%）\n2. 无法取出单条数据\n\n## GEO\n\n### GEO是什么\n\nGEO(地理信息定位)：存储经纬度，计算两地距离，范围计算等。\n\n### 5个城市经纬度\n\n| 城市   | 经度   | 纬度  |\n| ------ | ------ | ----- |\n| 北京   | 116.28 | 39.55 |\n| 天津   | 117.12 | 39.08 |\n| 石家庄 | 114.29 | 38.02 |\n| 唐山   | 118.01 | 39.38 |\n| 保定   | 115.29 | 38.51 |\n\n### 相关命令\n\n```shell\n# 1. 添加地理位置信息\ngeo key longitude latitude member [longitude latitude member ...]\n# 2. 获取地理位置信息\ngeopos key member [member ...]\n# 3. 获取两个地理位置的距离\n#    unit: m(米)、km(千米)、mi(英里)、ft(尺)\ngeodist key member1 member2 [unit]\n# 4. 获取指定位置范围内的地理位置信息集合\ngeoradius\n```\n\n### 相关说明\n\n1. since 3.2+\n2. type geoKey = zset\n3. 没有删除 API：zrem key member\n\n## 持久化\n\n## 持久化的作用\n\n（1）什么是持久化\n\nredis 所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。\n\n（2）持久化的实现方式\n\n1. 快照\n   - MySQL Dump\n   - Redis RDB\n2. 写日志\n   - MySQL Binlog\n   - Hbase Hlog\n   - Redis AOF\n\n## RDB\n\n（1）什么是RDB\n\n​\tredis 通过命令创建 RDB 文件（二进制）保存在硬盘中。当 redis 重启时通过命令将 RDB 文件载入到内存。实质是一个复制媒介。\n\n（2）触发机制-主要三种方式\n\n 1. save（同步）\n\n    - 新文件将会替换老文件\n    - 复杂度位 O(n)\n\n 2. bgsave（异步）\n\n    - 利用 Linux fork() 异步执行\n\n    - 文件策略及复杂度与 save 相同\n\n      | 命令   | save             | bgsave              |\n      | ------ | ---------------- | ------------------- |\n      | IO类型 | 同步             | 异步                |\n      | 阻塞   | 是               | 是（阻塞发生在fork) |\n      | 复杂度 | O(n)             | O(n)                |\n      | 优点   | 不会消耗额外内存 | 不阻塞客户端命令    |\n      | 缺点   | 阻塞客户端命令   | 需要fork，消耗内存  |\n\n 3. 自动\n\n    redis 提供了 save 配置\n\n    | 配置 | seconds | changes |\n    | ---- | ------- | ------- |\n    | save | 900     | 1       |\n    | save | 300     | 10      |\n    | save | 60      | 10000   |\n\n    满足任意一个条件，redis 会自动创建（bgsave）RDB 文件\n\n    默认配置：\n\n    ```shell\n    save 900 1\n    save 300 10\n    save 60 10000\n    dbfiename dump.rdb\n    dir ./\n    stop-writes-on-bgsave-error yes\n    rdbcompression yes\n    rdbcheksum yes\n    ```\n\n    最佳配置：\n\n    ```shell\n    dbfilename dump-${port}.rdb\n    dir /bigdiskpath\n    stop-writes-on-bgsave-error yes\n    rdbcompression yes\n    rdbcheksum yes\n    ```\n\n（3）触发机制-不容忽视方式\n\n \t1. 全量复制\n \t2. debug reload\n \t3. shutdown \n\n（4）总结\n\n \t1. RDB是 Redis 内存到硬盘的快照，用于持久化。\n \t2. save 通常会阻塞 Redis\n \t3. bgsave 不会阻塞 Redis，但是会 fork 新进程。\n \t4. save 自动配置满足任意一个条件就会被执行。\n\n## AOF\n\n### RDB 现存问题\n\n- 耗时，耗性能\n\n  - O(n): 耗时\n\n  - fork(): 消耗内存，copy-on-write 策略\n  - Disk I/O: IO 性能\n\n- 不可控，丢失数据\n\n### 什么是 AOF\n\n每执行一条命令，就将该命令写入到 AOF 日志文件中。\n\n### AOF 三种策略\n\n（1）always\n\n​\t每条写命令都会出发刷新，将缓冲区的命令日志刷新到 AOF 文件中。\n\n（2）everysec\n\n​\t每秒（默认值）刷新一次\n\n（3）no\n\n​\t由操作系统决定什么时候刷新。\n\n| 命令 | always                                  | everysec                          | no     |\n| ---- | --------------------------------------- | --------------------------------- | ------ |\n| 优点 | 不丢失数据                              | 每秒一次 fsync <br />丢失一秒数据 | 不用管 |\n| 缺点 | IO 开销较大，一般的 sata 盘只有几百 TPS | 丢失1秒数据                       | 不可控 |\n\n### AOF 重写\n\n| 原生 AOF                                                     | AOF 重写                                                  |\n| ------------------------------------------------------------ | --------------------------------------------------------- |\n| set hello world<br />set hello java<br />set hello hehe<br />incr counter<br />incr counter<br />rpush mylist a<br />rpush mylist b<br />rpush mylist c<br />过期数据 | set hello hehe<br />set counter 2<br />rpush mylist a b c |\n\nAOF 重写的作用：\n\n1. 减少磁盘占用量\n2. 加速恢复速度\n\nAOF 重写的两种实现方式\n\n1. berewriteaof\n\n2. AOF 重写配置\n\n   | 配置名                      | 含义                   |\n   | --------------------------- | ---------------------- |\n   | autoaof-rewrite-min-size    | AOF 文件重写需要的尺寸 |\n   | auto-aof-rewrite-percentage | AOF 文件增长率         |\n\n   | 统计名           | 含义                                   |\n   | ---------------- | -------------------------------------- |\n   | aof_current_size | AOF 当前尺寸（单位：字节）             |\n   | aof_base_size    | AOF 上次启动和重写的尺寸（单位：字节） |\n\n   自动触发时机：\n\n   - aof_current_size > auto-aof-rewrite-min-size\n   - aof_current_size - aof_base_size / aof_base_size > auto-aof-rewrite-percentage\n\n   AOF 重写流程\n\n   ![](data:image/jpeg;base64,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)\n\n   常用配置：\n\n   ```shell\n   appendonly yes\n   appendfilename \"appendonly-${port}.aof\"\n   appendfsync everysec\n   dir /bigdiskpath\n   no-appendfsync-on-rewrite yes\n   auto-aof-rewrite-percentage 100\n   auto-aof-rewrite-min-size 64mb\n   ```\n\n## RDB 和 AOF 的抉择\n\n### RDB 和 AOF 比较\n\n| 命令       | RDB    | AOF          |\n| ---------- | ------ | ------------ |\n| 启动优先级 | 低     | 高           |\n| 体积       | 小     | 大           |\n| 恢复速度   | 快     | 慢           |\n| 数据安全性 | 丢数据 | 根据策略决定 |\n| 轻重       | 重     | 轻           |\n\n### RDB 最佳策略\n\n1. “关”\n2. 集中管理\n3. 主从，从开\n\n### AOF 最佳策略\n\n1. ”开“：缓存和存储\n2. AOF 重写集中管理\n3. everysec\n\n### 最佳策略\n\n1. 小分片\n2. 缓存或者存储\n3. 监控（硬盘、内存、负载、网络）\n4. 足够的内存\n\n## 开发运维常见问题\n\n### fork 操作\n\n1. 同步操作\n2. 与内存量息息相关：内存越大，耗时越长（与机器类型有关）\n3. info: latest_fork_usec 查询上一次 fork 的时间\n\n如何改善fork\n\n1. 优先使用物理机或者高效支持 fork 操作的虚拟化技术\n2. 控制 Redis 实例最大可用内存：maxmemory\n3. 合理配置 Linux 内存分配策略：vm.overcommit_memory = 1\n4. 降低 fork 频率：例如放宽 AOF 重写自动触发时机，不必要的全量复制\n\n### 进程外开销\n\n子进程开销和优化\n\n1. CPU：\n   - 开销：RDB 和 AOF 文件生成，属于 CPU 密集型\n   - 优化：不做 CPU 绑定，不和 CPU 密集型部署\n2. 内存：\n   - 开销：fork 内存开销，copy-on-write。\n   - 优化：echo never > /sys/kernel/mm/transparent_hugepage/enabled\n3. 硬盘\n   - 开销：AOF 和 RDB 文件写入，可以结合 iostat，iotop 分析\n   - 优化：\n     - 不要和高硬盘负责服务部署在一起：存储服务、消息队列等\n     - no-appendfsync-on-rewrite = yes\n     - 根据写入量决定磁盘类型：例如 ssd\n     - 单机多实例持久化文件目录可以考虑分盘\n\n### AOF追加阻塞\n\n![](https://upload-images.jianshu.io/upload_images/12588973-ed80e9c29a4d1ef2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700)\n\nAOF 阻塞定位\n\n​\tReids 日志：\n\n​\tAsynchronous AOF fsync is taking too long (disk is busy?).\n\n​\tWriting the AOF buffer without waiting for fsync to complete,this may slow down Redis.\n\n​\tinfo Persistence:\n\n​\t...\n\n​\taof_delayed_fsync: 100\n\n​\t...\n\n### 单机多实例部署\n\n## Redis 复制的原理与优化\n\n### 什么是主从复制\n\n（1）单机有什么问题？\n\n​\t机器故障\n\n​\t容量瓶颈\n\n​\tQPS 瓶颈\n\n（2）作用\n\n​\t数据副本\n\n​\t扩展读性能\n\n### 复制的配置\n\n两种实现方式\n\n1. slaveof 命令\n\n2. 配置\n\n   ```shell\n   slaveof ip port\n   slave-read-only yes\n   ```\n\n### 全量复制和部分复制\n\n查看 run_id\n\n```shell\nredis-cli -p 6379 info server | grep run\n```\n\n查看偏移量\n\n```shell\nredis-cli -p 6379 info replication\n```\n\n全量复制开销：\n\n1. bgsave 时间\n2. RDB文件网络传输时间\n3. 从节点清空数据时间\n4. 从节点加载 RDB 的时间\n5. 可能的 AOF 重写时间\n\n### 故障处理\n\n### 开发运维常见问题\n\n1. 读写分离\n\n   将读流量分摊到从节点\n\n   可能遇到的问题：\n\n   - 复制数据延迟\n   - 读到过期数据\n   - 从节点故障\n\n2. 主从配置不一致\n\n3. 规避全量复制\n\n   - 第一次不可避免\n   - 系欸但运行 ID  不匹配\n     - 主节点重启\n     - 故障转移\n   - 复制积压缓冲区不足\n     - 网络中断，部分复制无法满足\n     - 增大复制缓冲区配置 rel_backlog_size，网络“增强”。\n\n4. 规避复制风暴\n\n   - 单主节点复制风暴\n     - 问题：主节点重启，多从节点复制\n     - 解决：更换复制拓扑\n   - 单机器复制风暴\n     - 机器宕机后，大量全量复制\n     - 主节点分散多机器\n\n## Redis Sentinel\n\n### 主从复制高可用存在的问题\n\n1. 手动故障转移\n2. 写能力和存储能力受限\n\n### 架构说明\n\n客户端不直接访问 redis，而是通过 sentinel 来访问。由 sentinel 来负责主从节点的管理。\n\n### 安装配置\n\nsentinel 的默认端口为 26379\n\n1. 配置开启主从节点\n2. 配置开启 sentinel 监控主节点（sentinel 是特殊的 redis）\n\n### 客户端连接\n\n请求相应流程\n\njedis\n\n```shell\nJedisSentinelPool sentinelPool = new JedisSentinelPool(masterName, sentinelSet, poolConfig, timeout);\nJedis jedis = null;\ntry {\n    jedis = redisSentinelPool.getResource();\n    // jedis command\n} catch (Exception e){\n    logger.error(e.getMessage(), e);\n} finally {\n    if (jedis != null){\n        jedis.close();\n    }\n}\n```\n\n\n\nredis-py\n\n### 实现原理\n\n### 常见开发运维问题\n\n## Redis Cluster\n\n### 呼唤集群\n\n1. 超高并发量需求\n2. 超大数据量需求\n\n### 数据分布\n\n顺序分布\n\n哈希分布\n\n- 节点取余\n  - 使用多倍扩容降低迁移率\n- 一致性哈希\n  - 顺时针取余\n  - 只影响邻近节点\n  - 扩容后会存在负载不均衡的情况\n- 虚拟槽\n  - 每个槽映射一个数据子集\n  - 良好的哈希函数：例如 CRC16\n  - 服务端管理节点、槽、数据：例如 Redis Cluster\n\n| 分布方式 | 特点                                                         | 典型产品                                     |\n| -------- | ------------------------------------------------------------ | -------------------------------------------- |\n| 哈希分布 | 数据分散度高<br />键值分布业务无关<br />无法顺序访问<br />支持批量操作 | 一致性哈希 Memcache<br />Redis Cluster<br /> |\n| 顺序分布 | 数据分散度易倾斜<br />键值业务相关<br />可顺序访问<br />不支持批量操作 | BigTable<br />HBase                          |\n\n### 搭建集群\n\n### 集群伸缩\n\n### 客户端路由\n\n### 集群原理\n\n### 开发运维常见问题\n\n### Redis Cluster 架构\n\n1. 节点\n2. meet\n3. 指派槽\n4. 复制\n\n### Redis Cluster 特性\n\n1. 复制\n2. 高可用\n3. 分片\n\n### 两种安装方式\n\n#### 原生命令安装\n\n1. 配置开启节点\n\n   ```shell\n   port ${port}\n   daemonize yes\n   dir \"/opt/redis/data\"\n   dbfilename \"dump-${port}.rdb\"\n   logfile \"${port}.log\"\n   cluster-enabled yes\n   cluster-config-file nodes-${port}.conf\n   ```\n\n2. meet\n\n   ```shell\n   cluster meet ip port\n   ```\n\n3. 指派槽\n\n   ```shell\n   cluster addslots slot [slot ...]\n   ```\n\n4. 分配主从关系\n\n   ```shell\n   cluster replicate node-id\n   ```\n\n####  官方工具安装\n\n\n\n> 链接：https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww \n> 提取码：5r0v\n\n","slug":"Redis学习笔记","published":1,"updated":"2019-01-02T00:22:39.405Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cjqg23erp000xwsw2au5lr0kw","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><blockquote>\n<p><a href=\"https://github.com/antirez/redis\" target=\"_blank\" rel=\"noopener\">Redis-GitHbu</a></p>\n</blockquote>\n<h2 id=\"什么是Redis\"><a href=\"#什么是Redis\" class=\"headerlink\" title=\"什么是Redis\"></a>什么是Redis</h2><h2 id=\"有哪些公司在使用Redis\"><a href=\"#有哪些公司在使用Redis\" class=\"headerlink\" title=\"有哪些公司在使用Redis\"></a>有哪些公司在使用Redis</h2><p>GitHub, Twitter, Stackoverflow, Alibaba, 百度，微博，美团，搜狐</p>\n<h2 id=\"Redis的八大特性\"><a href=\"#Redis的八大特性\" class=\"headerlink\" title=\"Redis的八大特性\"></a>Redis的八大特性</h2><ol>\n<li>速度快</li>\n<li>支持持久化</li>\n<li>存在多种数据结构</li>\n<li>支持多种语言</li>\n<li>功能丰富</li>\n<li>简单（代码量小，使用方便）</li>\n<li>主从复制</li>\n<li>高可用，分布式</li>\n</ol>\n<h3 id=\"速度快\"><a href=\"#速度快\" class=\"headerlink\" title=\"速度快\"></a>速度快</h3><p>官方给的指标是10w OPS（每秒十万次读写）</p>\n<p>这么快的原因：</p>\n<ul>\n<li>数据存放在内存中</li>\n<li><p>使用C语言编写（大约五万行代码），C语言离操作系统较近</p>\n</li>\n<li><p>线程模型为单线程</p>\n</li>\n</ul>\n<h3 id=\"持久化\"><a href=\"#持久化\" class=\"headerlink\" title=\"持久化\"></a>持久化</h3><p>Redis所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。</p>\n<h3 id=\"多种数据结构\"><a href=\"#多种数据结构\" class=\"headerlink\" title=\"多种数据结构\"></a>多种数据结构</h3><p>五大数据结构：</p>\n<ol>\n<li>Strings</li>\n<li>Hash Tables</li>\n<li>Linked Lists</li>\n<li>Sets</li>\n<li>Sorted Sets</li>\n</ol>\n<p>其他新结构：</p>\n<ol start=\"6\">\n<li>BitMaps: 位图（本质是字符串，可以实现类似<a href=\"https://china.googleblog.com/2007/07/bloom-filter_7469.html\" target=\"_blank\" rel=\"noopener\">布隆过滤器</a>的功能）</li>\n<li>HyperLogLog：超小内存唯一值计数（本质是字符串）</li>\n<li>GEO：地理信息定位（本质是有序集合，Redis-3.2后提供）</li>\n</ol>\n<h3 id=\"支持多种客户端语言\"><a href=\"#支持多种客户端语言\" class=\"headerlink\" title=\"支持多种客户端语言\"></a>支持多种客户端语言</h3><p>Java，PHP，python，Ruby，Lua，nodejs</p>\n<h3 id=\"功能丰富\"><a href=\"#功能丰富\" class=\"headerlink\" title=\"功能丰富\"></a>功能丰富</h3><ol>\n<li>发布订阅模式</li>\n<li>Lua脚本</li>\n<li>事务</li>\n<li>pipeline（提高客户端并发效率）</li>\n</ol>\n<h2 id=\"典型应用场景\"><a href=\"#典型应用场景\" class=\"headerlink\" title=\"典型应用场景\"></a>典型应用场景</h2><ul>\n<li>缓存系统</li>\n<li>计数器（微博的转发数，评论数以及视频网站的播放数等）</li>\n<li>消息队列系统 </li>\n<li>排行榜</li>\n<li>社交网络（粉丝数，关注数，共同关注数）</li>\n<li>实时系统（垃圾邮件处理系统，布隆过滤器）</li>\n</ul>\n<h1 id=\"安装Redis\"><a href=\"#安装Redis\" class=\"headerlink\" title=\"安装Redis\"></a>安装Redis</h1><h2 id=\"Redis安装\"><a href=\"#Redis安装\" class=\"headerlink\" title=\"Redis安装\"></a>Redis安装</h2><h3 id=\"Linux系统下安装Redis\"><a href=\"#Linux系统下安装Redis\" class=\"headerlink\" title=\"Linux系统下安装Redis\"></a>Linux系统下安装Redis</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 下载</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget http://download.redis.io/releases/redis-5.0.3.tar.gz</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 解压缩</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tar xzf redis-5.0.3.tar.gz</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 建立一个软连接</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> In -s redis-5.0.3 redis</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> redis-5.0.3</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 编译</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 安装</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make install</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"可执行文件说明\"><a href=\"#可执行文件说明\" class=\"headerlink\" title=\"可执行文件说明\"></a>可执行文件说明</h2><table>\n<thead>\n<tr>\n<th>可执行文件</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>redis-server</td>\n<td>Redis服务器</td>\n</tr>\n<tr>\n<td>redis-cli</td>\n<td>Redis命令行客户端</td>\n</tr>\n<tr>\n<td>redis-benchmark</td>\n<td>Redis性能测试工具</td>\n</tr>\n<tr>\n<td>redis-check-aof</td>\n<td>AOF文件修复工具</td>\n</tr>\n<tr>\n<td>redis-check-dump</td>\n<td>RDB文件修复工具</td>\n</tr>\n<tr>\n<td>redis-sentinel</td>\n<td>Sentinel服务器（2.8以后）</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"三种启动方法\"><a href=\"#三种启动方法\" class=\"headerlink\" title=\"三种启动方法\"></a>三种启动方法</h2><h3 id=\"最简启动\"><a href=\"#最简启动\" class=\"headerlink\" title=\"最简启动\"></a>最简启动</h3><p>直接使用<code>redis-server</code></p>\n<h3 id=\"动态参数启动\"><a href=\"#动态参数启动\" class=\"headerlink\" title=\"动态参数启动\"></a>动态参数启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-server --port 6380 # 默认端口是6379</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置文件启动\"><a href=\"#配置文件启动\" class=\"headerlink\" title=\"配置文件启动\"></a>配置文件启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-server configPath</span><br></pre></td></tr></table></figure>\n<h3 id=\"验证方法\"><a href=\"#验证方法\" class=\"headerlink\" title=\"验证方法\"></a>验证方法</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef|grep redis</span><br><span class=\"line\">netstat -antpl|grep redis</span><br><span class=\"line\">redis-cli -h ip -p port ping</span><br></pre></td></tr></table></figure>\n<h3 id=\"比较\"><a href=\"#比较\" class=\"headerlink\" title=\"比较\"></a>比较</h3><ul>\n<li>生产环境推荐配置启动</li>\n<li>单机多实例配置文件可以用端口区分开</li>\n</ul>\n<h2 id=\"简单的客户端连接\"><a href=\"#简单的客户端连接\" class=\"headerlink\" title=\"简单的客户端连接\"></a>简单的客户端连接</h2><h3 id=\"连接\"><a href=\"#连接\" class=\"headerlink\" title=\"连接\"></a>连接</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -h 10.10.79.150 -p 6384</span><br><span class=\"line\">ping</span><br><span class=\"line\">set hello world</span><br><span class=\"line\">get hello</span><br></pre></td></tr></table></figure>\n<h3 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h3><ol>\n<li>状态回复（如<code>ping</code>返回<code>PONG</code>）</li>\n<li>错误回复（如<code>(error) WRONGTYPE Operation against</code>）</li>\n<li>整数回复（如<code>incr hello</code>回复<code>(integer) 1</code>）</li>\n<li>字符串回复（如<code>get hello</code>回复<code>&quot;world&quot;</code>）</li>\n<li>多行字符串回复（如<code>mget hello foo</code>返回<code>&quot;world&quot; &quot;bar&quot;</code>）</li>\n</ol>\n<h2 id=\"Redis常用配置\"><a href=\"#Redis常用配置\" class=\"headerlink\" title=\"Redis常用配置\"></a>Redis常用配置</h2><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>daemonize</td>\n<td>是否是守护进程（no默认\\</td>\n<td>yes推荐）</td>\n</tr>\n<tr>\n<td>port</td>\n<td>Redis对外端口号，默认为6379<br>7379对应手机按键上MERZ对应的号码，MERZ取自意大利歌女Alessia Merz的名字</td>\n</tr>\n<tr>\n<td>logfile</td>\n<td>Redis系统日志</td>\n</tr>\n<tr>\n<td>dir</td>\n<td>Redis工作目录</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Redis-API\"><a href=\"#Redis-API\" class=\"headerlink\" title=\"Redis API\"></a>Redis API</h1><h2 id=\"通用命令\"><a href=\"#通用命令\" class=\"headerlink\" title=\"通用命令\"></a>通用命令</h2><ol>\n<li><p>keys</p>\n<p>eg：<code>keys *</code> 遍历所有的key</p>\n<p>怎么用：</p>\n<p>​    热备从节点</p>\n<p>​    scan</p>\n</li>\n<li><p>dbsize</p>\n<p>计算key的总数</p>\n</li>\n<li><p>exists key</p>\n<p>检查key是否存在，存在返回1，否则返回0</p>\n</li>\n<li><p>del key [key …]</p>\n<p>删除指定key-value，成功返回1，否则返回0</p>\n</li>\n<li><p>expire key seconds</p>\n<p><code>ttl key</code>查看key剩余的过期时间</p>\n<p><code>persist key</code>去掉key的过期时间</p>\n</li>\n<li><p>type key</p>\n<p>返回key的类型（string，hash，list，set，zset，none）</p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>时间复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>keys</td>\n<td>O(n)</td>\n</tr>\n<tr>\n<td>dbsize</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>del</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>exists</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>expire</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>type</td>\n<td>O(1)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"数据结构和内部编码\"><a href=\"#数据结构和内部编码\" class=\"headerlink\" title=\"数据结构和内部编码\"></a>数据结构和内部编码</h2><h3 id=\"内部编码\"><a href=\"#内部编码\" class=\"headerlink\" title=\"内部编码\"></a>内部编码</h3><p><img src=\"https://i.loli.net/2018/12/25/5c2240654f22b.png\" alt=\"Redis 内部编码\"></p>\n<h3 id=\"字符串键值结构\"><a href=\"#字符串键值结构\" class=\"headerlink\" title=\"字符串键值结构\"></a>字符串键值结构</h3><table>\n<thead>\n<tr>\n<th>key</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hello</td>\n<td>world</td>\n</tr>\n<tr>\n<td>counter</td>\n<td>1</td>\n</tr>\n<tr>\n<td>bits</td>\n<td>\\</td>\n<td>1\\</td>\n<td>0\\</td>\n<td>1\\</td>\n<td>1\\</td>\n<td>1\\</td>\n<td>0\\</td>\n<td>1\\</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>{<br>“prodduct”:{<br>“id”: “3242”<br>“name”: “test423”<br>}<br>}</td>\n</tr>\n</tbody>\n</table>\n<p>Value up to 512MB，up to 100k is recommended</p>\n<h4 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h4><ul>\n<li>缓存</li>\n<li>计数器</li>\n<li>分布式锁</li>\n</ul>\n<h4 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取key对应的value O(1)</span></span><br><span class=\"line\">get key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 设置key-value O(1)</span></span><br><span class=\"line\">set key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 删除key-value O(1)</span></span><br><span class=\"line\">del key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. key自增1，如果key不存在，自增后get（key）=1 O(1)</span></span><br><span class=\"line\">incr key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. key自减1，如果key不存在，自减后get（key）=-1 O(1)</span></span><br><span class=\"line\">decr key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. key自增k，如果key不存在，自增后get（key）=k O(1)</span></span><br><span class=\"line\">incrby key k</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. key自减k，如果key不存在，自减后get（key）=-k O(1)</span></span><br><span class=\"line\">decrby key k</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 不管key是否存在，都设置 O(1)</span></span><br><span class=\"line\">set key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. key不存在，才设置 O(1)</span></span><br><span class=\"line\">setnx key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. key存在，才设置 O(1)</span></span><br><span class=\"line\">set key value xx</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 批量获取key，原子操作 O(n)</span></span><br><span class=\"line\">mget key1 key2 key3...</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 批量设置key-value O(n)</span></span><br><span class=\"line\">mset key1 value1 key2 vlaue2 key3 value3</span><br></pre></td></tr></table></figure>\n<p>n次get = n次网络时间 + n次命令时间</p>\n<p>1次mget = 1次网络时间 + n次命令时间</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. <span class=\"built_in\">set</span> key newvalue并返回旧的value O(1)</span></span><br><span class=\"line\">getset key newvalue</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 将value追加到旧的value O(1)</span></span><br><span class=\"line\">append key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 返回字符串的长度（注意中文） O(1)</span></span><br><span class=\"line\">strlen key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 增加key对应的值3.5 O(1)</span></span><br><span class=\"line\">incrbyfloat key 3.5</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取字符串指定下标范围内的值 O(1)</span></span><br><span class=\"line\">getrange key start end</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 设置指定下标范围内对应的值 O(1)</span></span><br><span class=\"line\">setrange key index value</span><br></pre></td></tr></table></figure>\n<h5 id=\"复杂度总结\"><a href=\"#复杂度总结\" class=\"headerlink\" title=\"复杂度总结\"></a>复杂度总结</h5><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>含义</th>\n<th>复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set key value</td>\n<td>是指key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>get key</td>\n<td>获取key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>del key</td>\n<td>删除key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>setnx setxx</td>\n<td>根据key是否存在设置key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>Incr decr</td>\n<td>计数</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>mget mset</td>\n<td>批量操作key-value</td>\n<td>O(n)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"实战\"><a href=\"#实战\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li><p>记录网站每个用户个人主页的访问量？</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">incr userid:pageview</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>缓存视频的基本信息（数据源在MySQL中）伪代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> VideoInfo <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">long</span> id)</span></span>&#123;</span><br><span class=\"line\">    String redisKey = redisPrefix + id;</span><br><span class=\"line\">    VideoInfo videoInfo = redis.get(redisKey);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(videoInfo == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        videoInfo = mysql.get(id);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(videoInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//序列化</span></span><br><span class=\"line\">            redis.set(redisKey, serialize(videoInfo));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> videoInfo;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>分布式计数器</p>\n<p>incr id (原子操作)</p>\n</li>\n</ol>\n<h3 id=\"Hash键值结构\"><a href=\"#Hash键值结构\" class=\"headerlink\" title=\"Hash键值结构\"></a>Hash键值结构</h3><table>\n<thead>\n<tr>\n<th>key</th>\n<th>field</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>user:1:info</td>\n<td>name<br>age<br>Date</td>\n<td>Ronaldo<br>32<br>239</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"特点\"><a href=\"#特点\" class=\"headerlink\" title=\"特点\"></a>特点</h4><ol>\n<li><p>是一个<code>value</code>为<code>Map</code>的<code>Map</code></p>\n</li>\n<li><p><code>field</code>不能相同，<code>value</code>可以相同</p>\n</li>\n</ol>\n<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><p>所有以哈希为结构的命令都是以<code>H</code>开头的。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取<span class=\"built_in\">hash</span> key对应的field的value O(1)</span></span><br><span class=\"line\">hget key field</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 设置<span class=\"built_in\">hash</span> key对应field的value O(1)</span></span><br><span class=\"line\">hset key field value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 删除<span class=\"built_in\">hash</span> key对应field的value O(1)</span></span><br><span class=\"line\">hdel key field</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 判断<span class=\"built_in\">hash</span> key是否有field O(1)</span></span><br><span class=\"line\">hexists key field</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取<span class=\"built_in\">hash</span> key field的数量 O(1)</span></span><br><span class=\"line\">hlen key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 批量获取<span class=\"built_in\">hash</span> key的一批field对应的值 O(n)</span></span><br><span class=\"line\">hmget key field1 field2... fieldN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 批量设置<span class=\"built_in\">hash</span> key的一批field value O(n)</span></span><br><span class=\"line\">hmset key field1 value1 field2 value2...fieldN valueN</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 返回<span class=\"built_in\">hash</span> key对应所有的field和value O(n)</span></span><br><span class=\"line\">hgetall key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 返回<span class=\"built_in\">hash</span> key对应所有field的value O(n)</span></span><br><span class=\"line\">hvals key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 返回<span class=\"built_in\">hash</span> key对应多有field O(n)</span></span><br><span class=\"line\">hkeys key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 设置<span class=\"built_in\">hash</span> key对应field的value（若field已存在，则失败） O(1)</span></span><br><span class=\"line\">hsetnx key field value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. <span class=\"built_in\">hash</span> key对应的filed的value自增intCounter O(1)</span></span><br><span class=\"line\">hincrby key field intCounter</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. hincrby浮点数版 O(1)</span></span><br><span class=\"line\">hincrbyfloat key field floatCounter</span><br></pre></td></tr></table></figure>\n<h5 id=\"复杂度总结-1\"><a href=\"#复杂度总结-1\" class=\"headerlink\" title=\"复杂度总结\"></a>复杂度总结</h5><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hget hset hdel</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hexists</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hincrby</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hgetall hvals hkeys</td>\n<td>O(n)</td>\n</tr>\n<tr>\n<td>hmget hmset</td>\n<td>O(n)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h3><h4 id=\"特点-1\"><a href=\"#特点-1\" class=\"headerlink\" title=\"特点\"></a>特点</h4><ol>\n<li>有序（根据插入顺序得到遍历顺序）</li>\n<li>可以重复</li>\n<li>左右两边都可以插入和弹出</li>\n</ol>\n<h4 id=\"API-1\"><a href=\"#API-1\" class=\"headerlink\" title=\"API\"></a>API</h4><p>列表的API都以<code>L</code>开头</p>\n<h5 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 从列表右端插入值 O(1)</span></span><br><span class=\"line\">rpush key value1 value2 ... valueN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 从列表左端插入值 O(1)</span></span><br><span class=\"line\">lpush key value1 value2 ... valueN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 在list指定的值前|后插入newValue O(n)</span></span><br><span class=\"line\">linsert key before|after value newValue</span><br></pre></td></tr></table></figure>\n<h5 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 从列表左侧弹出一个item O(1)</span></span><br><span class=\"line\">lpop key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 从列表右侧弹出一个item O(1)</span></span><br><span class=\"line\">rpop key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 根据count值，从列表中删除所有value相等的项 O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （1）count&gt;0，从左到右，删除最多count个value相等的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （2）count&lt;0，从右到左，删除最多Math。abs（count）个value相等的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （3）count=0，删除所有value相等的项</span></span><br><span class=\"line\">lrem key count value</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 按照索引范围修剪列表 O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> \t 如ltrime listkey 1 4 是指删除除了下标为1-4（包括1和4）其他项</span></span><br><span class=\"line\">ltrim key start end</span><br></pre></td></tr></table></figure>\n<h5 id=\"查\"><a href=\"#查\" class=\"headerlink\" title=\"查\"></a>查</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取列表指定索引范围所有item O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  \t 如lrange listKey 0 2获取的是下标0-2（包括0和2）的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  \t 再如lrange listKey 1 -1获取的是下标1-（len-1）的项</span></span><br><span class=\"line\">lrange key start end</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取列表指定索引的item O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    如lindex listkye -1 取到的是最后一个元素</span></span><br><span class=\"line\">lindex key index</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取列表长度 O(1)</span></span><br><span class=\"line\">llen key</span><br></pre></td></tr></table></figure>\n<h5 id=\"改\"><a href=\"#改\" class=\"headerlink\" title=\"改\"></a>改</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 设置列表指定索引值为newValue O(n)</span></span><br><span class=\"line\">lset key index newValue</span><br></pre></td></tr></table></figure>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. lpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)</span></span><br><span class=\"line\">blpop key timeout</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. rpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)</span></span><br><span class=\"line\">brpop key timeout</span><br></pre></td></tr></table></figure>\n<h5 id=\"TIPS\"><a href=\"#TIPS\" class=\"headerlink\" title=\"TIPS\"></a>TIPS</h5><ol>\n<li>LPUSH + LPOP = Stack</li>\n<li>LPUSH + RPOP = Queue</li>\n<li>LPUSH + LTRIM = Capped Collection</li>\n<li>LPUSH + BRPOP = Message Queue</li>\n</ol>\n<h4 id=\"实战-1\"><a href=\"#实战-1\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li>TimeLine</li>\n</ol>\n<h4 id=\"实战-2\"><a href=\"#实战-2\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li><p>记录网站每个用户个人主页的访问量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hincrby user:1:info pageview count</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>缓存视频的基本信息（数据源在mysql中）伪代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> VideoInfo <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">long</span> id)</span></span>&#123;</span><br><span class=\"line\">    String redisKey = redisPrefix + id;</span><br><span class=\"line\">    Map&lt;String, String&gt; hashMap = redis.hgetAll(redisKey);</span><br><span class=\"line\">    VideoInfo videoInfo = transferMapToVideo(hashMap);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(videoInfo == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        videoInfo = mysql.get(id);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(videoInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            redis.hmset(redisKey, transferVideoToMap(videoInfo));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> videoInfo;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"单线程架构\"><a href=\"#单线程架构\" class=\"headerlink\" title=\"单线程架构\"></a>单线程架构</h2><p>Redis在同一时刻只会执行一条命令</p>\n<h3 id=\"单线程为什么这么快\"><a href=\"#单线程为什么这么快\" class=\"headerlink\" title=\"单线程为什么这么快\"></a>单线程为什么这么快</h3><ol>\n<li><p>纯内存</p>\n</li>\n<li><p>非阻塞IO</p>\n</li>\n<li><p>避免线程切换和竞态消耗</p>\n</li>\n<li><p>拒绝长（慢）命令</p>\n<p>​    keys, flushall, flushdb, slow lua script, mutil/exec, operate big value(collection)</p>\n</li>\n<li><p>其实不是单线程</p>\n<p>fysnc file descriptor</p>\n<p>close file descriptor</p>\n</li>\n</ol>\n<h1 id=\"Redis客户端\"><a href=\"#Redis客户端\" class=\"headerlink\" title=\"Redis客户端\"></a>Redis客户端</h1><h2 id=\"Java客户端：Jedis\"><a href=\"#Java客户端：Jedis\" class=\"headerlink\" title=\"Java客户端：Jedis\"></a>Java客户端：Jedis</h2><h3 id=\"获取Jedis\"><a href=\"#获取Jedis\" class=\"headerlink\" title=\"获取Jedis\"></a>获取Jedis</h3><ol>\n<li>添加<code>Maven</code>依赖</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><p>Jedis直连（TCP连接）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.set(<span class=\"string\">\"hello\"</span>,<span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">String value = jedis.get(<span class=\"string\">\"hello\"</span>);</span><br></pre></td></tr></table></figure>\n<p><code>Jedis(String host, int port, int connectionTimeout, int soTimeout)</code></p>\n<ul>\n<li>host : Redis节点所在机器的IP</li>\n<li>port : Redis节点的端口</li>\n<li>connectionTimeout : 客户端连接超时时间（内部使用socket技术）</li>\n<li>soTimeout : 客户端读写超时时间</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"Jedis基本使用\"><a href=\"#Jedis基本使用\" class=\"headerlink\" title=\"Jedis基本使用\"></a>Jedis基本使用</h3><h3 id=\"Jedis连接池使用\"><a href=\"#Jedis连接池使用\" class=\"headerlink\" title=\"Jedis连接池使用\"></a>Jedis连接池使用</h3><h4 id=\"简单使用\"><a href=\"#简单使用\" class=\"headerlink\" title=\"简单使用\"></a>简单使用</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 初始化Jedis连接池，通常来讲JedisPool是单例的。</span></span><br><span class=\"line\">GenericObjectPoolConfig poolConfig = <span class=\"keyword\">new</span> GenericObjectPoolConfig();</span><br><span class=\"line\">JedisPool jedisPool = <span class=\"keyword\">new</span> JedisPool(poolConfig, <span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 从连接池获取jedis对象</span></span><br><span class=\"line\">    jedis = jedisPool.getResource();</span><br><span class=\"line\">    <span class=\"comment\">// 2. 执行操作</span></span><br><span class=\"line\">    jedis.set(<span class=\"string\">\"hello\"</span>, <span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">    e.printStackTrance();</span><br><span class=\"line\">&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(jedis != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 如果使用JedisPool，close操作不是关闭连接，二十代表归还连接池。</span></span><br><span class=\"line\">        jedis.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>直连</td>\n<td>- 简单方便<br>- 适用于少量长期连接的场景</td>\n<td>- 存在每次新建/关闭TCP开销<br>- 资源无法控制，存在连接泄露的可能<br>- Jedis对象线程不安全</td>\n</tr>\n<tr>\n<td>连接池</td>\n<td>- Jedis预先生成，降低开销使用<br>- 连接池的形式保护和控制资源的使用</td>\n<td>相对于直连，使用相对麻烦，尤其在资源的管理上需要很多参数来保证，一旦规划不合理也会出现问题。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"python客户端：redis-py\"><a href=\"#python客户端：redis-py\" class=\"headerlink\" title=\"python客户端：redis-py\"></a>python客户端：redis-py</h2><h3 id=\"源码安装\"><a href=\"#源码安装\" class=\"headerlink\" title=\"源码安装\"></a>源码安装</h3><blockquote>\n<p><a href=\"https://redis.io/clients#python\" target=\"_blank\" rel=\"noopener\">Redis-clients-python</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/andymccurdy/redis-py/archive/3.0.0.zip</span><br><span class=\"line\">unzip redis-3.0.0.zip</span><br><span class=\"line\">cd redis-3.0.0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装redis-py</span></span><br><span class=\"line\">sudo python setup.py install</span><br></pre></td></tr></table></figure>\n<h3 id=\"简单使用-1\"><a href=\"#简单使用-1\" class=\"headerlink\" title=\"简单使用\"></a>简单使用</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\">client = redis.StrictRedis(host=<span class=\"string\">'127.0.0.1'</span>, port=<span class=\"number\">6379</span>)</span><br><span class=\"line\">key = <span class=\"string\">\"hello\"</span></span><br><span class=\"line\">setResult = client.set(key, <span class=\"string\">\"python-redis\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> setResult</span><br><span class=\"line\">value = client.get(key)</span><br><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"key:\"</span> + key + <span class=\"string\">\", value:\"</span> + value</span><br></pre></td></tr></table></figure>\n<h2 id=\"Go客户端\"><a href=\"#Go客户端\" class=\"headerlink\" title=\"Go客户端\"></a>Go客户端</h2> <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c,err := redis.Dial(<span class=\"string\">\"tcp\"</span>, <span class=\"string\">\"127.0.0.1:6379\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span>&#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">defer</span> c.Close()</span><br><span class=\"line\">v, err := c.Do(<span class=\"string\">\"SET\"</span>, <span class=\"string\">\"hello\"</span>, <span class=\"string\">\"world\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span>&#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fmt.Println(v)</span><br><span class=\"line\">v, err = redis.String(c.Do(<span class=\"string\">\"GET\"</span>, <span class=\"string\">\"hello\"</span>))</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"瑞士军刀Redis\"><a href=\"#瑞士军刀Redis\" class=\"headerlink\" title=\"瑞士军刀Redis\"></a>瑞士军刀Redis</h1><h2 id=\"慢查询\"><a href=\"#慢查询\" class=\"headerlink\" title=\"慢查询\"></a>慢查询</h2><h3 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h3><p><img src=\"https://i.loli.net/2018/12/27/5c2419d644e00.png\" alt=\"\"></p>\n<ol>\n<li>慢查询发生在第三阶段</li>\n<li>客户端超时不一定是慢查询导致的，慢查询只是导致客户端超时的一个可能因素</li>\n</ol>\n<h3 id=\"两个配置\"><a href=\"#两个配置\" class=\"headerlink\" title=\"两个配置\"></a>两个配置</h3><h4 id=\"slowlog-max-len\"><a href=\"#slowlog-max-len\" class=\"headerlink\" title=\"slowlog-max-len\"></a>slowlog-max-len</h4><ol>\n<li>先进先出队列</li>\n<li>固定长度</li>\n<li>保存在内存内</li>\n</ol>\n<h4 id=\"slowlog-log-slower-than\"><a href=\"#slowlog-log-slower-than\" class=\"headerlink\" title=\"slowlog-log-slower-than\"></a>slowlog-log-slower-than</h4><ol>\n<li>慢查询阈值（单位：微妙，1毫秒等于1000微秒）</li>\n<li>slowlog-log-slower-than=0，记录所有命令</li>\n<li>slowlog-log-slower-than&lt;0，不记录任何命令</li>\n</ol>\n<h4 id=\"配置方法\"><a href=\"#配置方法\" class=\"headerlink\" title=\"配置方法\"></a>配置方法</h4><ol>\n<li>默认值<ul>\n<li>config get slowlog-max-len = 128</li>\n<li>config get slowlog-log-slower-than = 10000</li>\n</ul>\n</li>\n<li>修改配置文件后重启（适用于未启动时）</li>\n<li>动态配置<ul>\n<li>config set slowlog-max-len 1000</li>\n<li>config set slowlog-log-slower-than 1000</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"三个命令\"><a href=\"#三个命令\" class=\"headerlink\" title=\"三个命令\"></a>三个命令</h3><ol>\n<li>slowlog get [n] ：获取慢查询队列</li>\n<li>slowlog len ：获取慢查询队列长度</li>\n<li>slowlog reset ：清空慢查询队列</li>\n</ol>\n<h3 id=\"运维经验\"><a href=\"#运维经验\" class=\"headerlink\" title=\"运维经验\"></a>运维经验</h3><ol>\n<li>slowlog-max-len不要是指过大，默认10ms，通常是指1ms</li>\n<li>slowlog-log-slower-than不要设置太小，通常设置1000左右</li>\n<li>理解命令生命周期</li>\n<li>定期持久化慢查询</li>\n</ol>\n<h2 id=\"pipeline\"><a href=\"#pipeline\" class=\"headerlink\" title=\"pipeline\"></a>pipeline</h2><h3 id=\"什么是流水线\"><a href=\"#什么是流水线\" class=\"headerlink\" title=\"什么是流水线\"></a>什么是流水线</h3><p>流水线就是一次网络连接里传输一批命令，节省网络传输时间</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>N个命令操作</th>\n<th>1次pipeline</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>时间</td>\n<td>n次网络 + n次命令</td>\n<td>1次网络 + n次命令</td>\n</tr>\n<tr>\n<td>数据量</td>\n<td>1条命令</td>\n<td>n条命令</td>\n</tr>\n</tbody>\n</table>\n<p>注意：</p>\n<ol>\n<li>Redis的命令时间是微秒级别。</li>\n<li>pipeline每次条数要控制（网络）。</li>\n</ol>\n<h3 id=\"客户端实现-pipeline-Jedis\"><a href=\"#客户端实现-pipeline-Jedis\" class=\"headerlink\" title=\"客户端实现 pipeline-Jedis\"></a>客户端实现 pipeline-Jedis</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// before pipeline</span></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10000</span>; i++)&#123;</span><br><span class=\"line\">    jedis.hset(<span class=\"string\">\"hashkey:\"</span> + i, <span class=\"string\">\"field\"</span> + i, <span class=\"string\">\"value\"</span> + i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// after pipeline</span></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++)&#123;</span><br><span class=\"line\">    Pipeline pipeline = jedis.pipelined();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i*<span class=\"number\">100</span>; j &lt; (i+<span class=\"number\">1</span>)*<span class=\"number\">100</span>; j++)&#123;</span><br><span class=\"line\">        pipeline.hset(<span class=\"string\">\"hashkey:\"</span> + j, <span class=\"string\">\"field\"</span> + j, <span class=\"string\">\"value\"</span> + j);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pipeline.syncAndReturnAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"与原生M操作做对比\"><a href=\"#与原生M操作做对比\" class=\"headerlink\" title=\"与原生M操作做对比\"></a>与原生M操作做对比</h3><p>M操作是原子操作，pipeline是非原子操作。</p>\n<h3 id=\"使用建议\"><a href=\"#使用建议\" class=\"headerlink\" title=\"使用建议\"></a>使用建议</h3><ol>\n<li>注意每次pipeline携带数据量</li>\n<li>pipeline每次只能作用在一个Redis节点上</li>\n<li>M操作与pipeline区别</li>\n</ol>\n<h2 id=\"发布订阅\"><a href=\"#发布订阅\" class=\"headerlink\" title=\"发布订阅\"></a>发布订阅</h2><h3 id=\"角色\"><a href=\"#角色\" class=\"headerlink\" title=\"角色\"></a>角色</h3><ul>\n<li>发布者（publisher）</li>\n<li>订阅者（subscriber）</li>\n<li>频道（channel）</li>\n</ul>\n<h3 id=\"模型\"><a href=\"#模型\" class=\"headerlink\" title=\"模型\"></a>模型</h3><p>Redis server中有各个频道。</p>\n<p>发布者向频道中发布消息</p>\n<p>订阅者收到其所订阅频道的消息，只能收到订阅时刻之后的消息，之前的收不到。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/7432257-f91184b81f782b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp\" alt=\"\"></p>\n<p>需要注意的是，redis没有消息堆积的能力。</p>\n<h3 id=\"API-2\"><a href=\"#API-2\" class=\"headerlink\" title=\"API\"></a>API</h3><h4 id=\"publish\"><a href=\"#publish\" class=\"headerlink\" title=\"publish\"></a>publish</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">publish channel message</span><br></pre></td></tr></table></figure>\n<p>eg:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">redis&gt;</span><span class=\"bash\"> publish sohu:tv <span class=\"string\">\"hello world\"</span></span></span><br><span class=\"line\">(integer) 3 # 订阅者个数</span><br></pre></td></tr></table></figure>\n<h4 id=\"subscribe\"><a href=\"#subscribe\" class=\"headerlink\" title=\"subscribe\"></a>subscribe</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">subscribe [channel] # 一个或多个</span><br></pre></td></tr></table></figure>\n<h4 id=\"unsubscribe\"><a href=\"#unsubscribe\" class=\"headerlink\" title=\"unsubscribe\"></a>unsubscribe</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unsubcribe [channle] # 一个或多个</span><br></pre></td></tr></table></figure>\n<h4 id=\"其他-1\"><a href=\"#其他-1\" class=\"headerlink\" title=\"其他\"></a>其他</h4> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 订阅模式</span></span><br><span class=\"line\">psubscribe [pattern]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 推定指定的模式</span></span><br><span class=\"line\">punsubscribe [pattern]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 列出至少有一个订阅者的频道</span></span><br><span class=\"line\">pubsub channels</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 列出给定频道的订阅者数量</span></span><br><span class=\"line\">pubsub numsub [channel]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 列出被订阅模式的数量</span></span><br><span class=\"line\">pubsub numpat</span><br></pre></td></tr></table></figure>\n<h3 id=\"发布订阅与消息队列\"><a href=\"#发布订阅与消息队列\" class=\"headerlink\" title=\"发布订阅与消息队列\"></a>发布订阅与消息队列</h3><p>发布订阅是所有订阅者可以收到所有的消息</p>\n<p>消息队列是订阅者要进行消息抢夺，一条消息只有一个订阅者能够抢到。</p>\n<h2 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h2><h3 id=\"位图\"><a href=\"#位图\" class=\"headerlink\" title=\"位图\"></a>位图</h3><table>\n<thead>\n<tr>\n<th>b</th>\n<th>i</th>\n<th>g</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>01100010</td>\n<td>01101001</td>\n<td>01100111</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"相关命令\"><a href=\"#相关命令\" class=\"headerlink\" title=\"相关命令\"></a>相关命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 给位图指定索引设置值</span></span><br><span class=\"line\">setbit key offset value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取位图指定索引的值</span></span><br><span class=\"line\">getbit key offset</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取位图指定范围（start到end，单位为字节，如果不指定就是获取全部）位值为1的个数</span></span><br><span class=\"line\">bitcount key [start end]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 做多个Bitmap的and（交集）、or（并集）、not（非）、xor（抑或）操作并将结果保存在destkey中</span></span><br><span class=\"line\">bitop op destkey key [key...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 计算位图指定范围（start到end，单位为字节，如果不指定就是取全部）第一个偏移量对应的值等于targetBit的位置</span></span><br><span class=\"line\">bitpos key targetBit [start][end]</span><br></pre></td></tr></table></figure>\n<h3 id=\"独立用户统计\"><a href=\"#独立用户统计\" class=\"headerlink\" title=\"独立用户统计\"></a>独立用户统计</h3><ol>\n<li>使用set和Bitmap</li>\n<li>总共1亿用户，每日5千万独立访问。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>每个userid只用空间</th>\n<th>需要存储的用户量</th>\n<th>全部内存量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>32位<br>（假设userid用的是整型，<br>实际很多网站用的是长整型）</td>\n<td>50，000，000</td>\n<td>32位*50，000，000=100MB</td>\n</tr>\n<tr>\n<td>Bitmap</td>\n<td>1位</td>\n<td>100，000，000</td>\n<td>12.5MB</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>一天</th>\n<th>一个月</th>\n<th>一年</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>200M</td>\n<td>6G</td>\n<td>72G</td>\n</tr>\n<tr>\n<td>Bitmap</td>\n<td>12.5M</td>\n<td>375M</td>\n<td>4.5G</td>\n</tr>\n</tbody>\n</table>\n<p>如果只有10万对立用户：<br>| 数据类型 | 每个userid占用空间 | 需要存储的用户量 | 全部内存量             |<br>| ——– | —————— | —————- | ———————- |<br>| set      | 32位               | 1,000,000        | 32位<em>1,000,000=4MB     |<br>| Bitmap   | 1位                | 100,000,000      | 1位</em>100,000,000=12.5MB |</p>\n<h3 id=\"使用经验\"><a href=\"#使用经验\" class=\"headerlink\" title=\"使用经验\"></a>使用经验</h3><ol>\n<li>type=string，最大512MB</li>\n<li>注意setbit时的偏移量，可能有较大耗时</li>\n<li>位图不是绝对好。</li>\n</ol>\n<h2 id=\"HyperLogLog\"><a href=\"#HyperLogLog\" class=\"headerlink\" title=\"HyperLogLog\"></a>HyperLogLog</h2><h3 id=\"是否是新的数据结构\"><a href=\"#是否是新的数据结构\" class=\"headerlink\" title=\"是否是新的数据结构\"></a>是否是新的数据结构</h3><ol>\n<li>基于 HyperLogLog 算法：极小空间完成独立数量统计。</li>\n<li>本质还是字符串</li>\n</ol>\n<h3 id=\"三个命令-1\"><a href=\"#三个命令-1\" class=\"headerlink\" title=\"三个命令\"></a>三个命令</h3><ol>\n<li><p>向 hyperloglog 添加元素</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfadd key element [element ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>计算 hyperloglog 的独立总数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfcount key [key ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>合并多个 hyperloglog</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfmerge destkey sourcekey [sourcekey ...]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"内存消耗\"><a href=\"#内存消耗\" class=\"headerlink\" title=\"内存消耗\"></a>内存消耗</h3><h3 id=\"使用经验-1\"><a href=\"#使用经验-1\" class=\"headerlink\" title=\"使用经验\"></a>使用经验</h3><ol>\n<li>存在错误率（0.81%）</li>\n<li>无法取出单条数据</li>\n</ol>\n<h2 id=\"GEO\"><a href=\"#GEO\" class=\"headerlink\" title=\"GEO\"></a>GEO</h2><h3 id=\"GEO是什么\"><a href=\"#GEO是什么\" class=\"headerlink\" title=\"GEO是什么\"></a>GEO是什么</h3><p>GEO(地理信息定位)：存储经纬度，计算两地距离，范围计算等。</p>\n<h3 id=\"5个城市经纬度\"><a href=\"#5个城市经纬度\" class=\"headerlink\" title=\"5个城市经纬度\"></a>5个城市经纬度</h3><table>\n<thead>\n<tr>\n<th>城市</th>\n<th>经度</th>\n<th>纬度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>北京</td>\n<td>116.28</td>\n<td>39.55</td>\n</tr>\n<tr>\n<td>天津</td>\n<td>117.12</td>\n<td>39.08</td>\n</tr>\n<tr>\n<td>石家庄</td>\n<td>114.29</td>\n<td>38.02</td>\n</tr>\n<tr>\n<td>唐山</td>\n<td>118.01</td>\n<td>39.38</td>\n</tr>\n<tr>\n<td>保定</td>\n<td>115.29</td>\n<td>38.51</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"相关命令-1\"><a href=\"#相关命令-1\" class=\"headerlink\" title=\"相关命令\"></a>相关命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 添加地理位置信息</span></span><br><span class=\"line\">geo key longitude latitude member [longitude latitude member ...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取地理位置信息</span></span><br><span class=\"line\">geopos key member [member ...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取两个地理位置的距离</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    unit: m(米)、km(千米)、mi(英里)、ft(尺)</span></span><br><span class=\"line\">geodist key member1 member2 [unit]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 获取指定位置范围内的地理位置信息集合</span></span><br><span class=\"line\">georadius</span><br></pre></td></tr></table></figure>\n<h3 id=\"相关说明\"><a href=\"#相关说明\" class=\"headerlink\" title=\"相关说明\"></a>相关说明</h3><ol>\n<li>since 3.2+</li>\n<li>type geoKey = zset</li>\n<li>没有删除 API：zrem key member</li>\n</ol>\n<h2 id=\"持久化-1\"><a href=\"#持久化-1\" class=\"headerlink\" title=\"持久化\"></a>持久化</h2><h2 id=\"持久化的作用\"><a href=\"#持久化的作用\" class=\"headerlink\" title=\"持久化的作用\"></a>持久化的作用</h2><p>（1）什么是持久化</p>\n<p>redis 所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。</p>\n<p>（2）持久化的实现方式</p>\n<ol>\n<li>快照<ul>\n<li>MySQL Dump</li>\n<li>Redis RDB</li>\n</ul>\n</li>\n<li>写日志<ul>\n<li>MySQL Binlog</li>\n<li>Hbase Hlog</li>\n<li>Redis AOF</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"RDB\"><a href=\"#RDB\" class=\"headerlink\" title=\"RDB\"></a>RDB</h2><p>（1）什么是RDB</p>\n<p>​    redis 通过命令创建 RDB 文件（二进制）保存在硬盘中。当 redis 重启时通过命令将 RDB 文件载入到内存。实质是一个复制媒介。</p>\n<p>（2）触发机制-主要三种方式</p>\n<ol>\n<li><p>save（同步）</p>\n<ul>\n<li>新文件将会替换老文件</li>\n<li>复杂度位 O(n)</li>\n</ul>\n</li>\n<li><p>bgsave（异步）</p>\n<ul>\n<li><p>利用 Linux fork() 异步执行</p>\n</li>\n<li><p>文件策略及复杂度与 save 相同</p>\n<p>| 命令   | save             | bgsave              |<br>| —— | —————- | ——————- |<br>| IO类型 | 同步             | 异步                |<br>| 阻塞   | 是               | 是（阻塞发生在fork) |<br>| 复杂度 | O(n)             | O(n)                |<br>| 优点   | 不会消耗额外内存 | 不阻塞客户端命令    |<br>| 缺点   | 阻塞客户端命令   | 需要fork，消耗内存  |</p>\n</li>\n</ul>\n</li>\n<li><p>自动</p>\n<p>redis 提供了 save 配置</p>\n<p>| 配置 | seconds | changes |<br>| —- | ——- | ——- |<br>| save | 900     | 1       |<br>| save | 300     | 10      |<br>| save | 60      | 10000   |</p>\n<p>满足任意一个条件，redis 会自动创建（bgsave）RDB 文件</p>\n<p>默认配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">dbfiename dump.rdb</span><br><span class=\"line\">dir ./</span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">rdbcheksum yes</span><br></pre></td></tr></table></figure>\n<p>最佳配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dbfilename dump-$&#123;port&#125;.rdb</span><br><span class=\"line\">dir /bigdiskpath</span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">rdbcheksum yes</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>（3）触发机制-不容忽视方式</p>\n<pre><code>1. 全量复制\n2. debug reload\n3. shutdown \n</code></pre><p>（4）总结</p>\n<pre><code>1. RDB是 Redis 内存到硬盘的快照，用于持久化。\n2. save 通常会阻塞 Redis\n3. bgsave 不会阻塞 Redis，但是会 fork 新进程。\n4. save 自动配置满足任意一个条件就会被执行。\n</code></pre><h2 id=\"AOF\"><a href=\"#AOF\" class=\"headerlink\" title=\"AOF\"></a>AOF</h2><h3 id=\"RDB-现存问题\"><a href=\"#RDB-现存问题\" class=\"headerlink\" title=\"RDB 现存问题\"></a>RDB 现存问题</h3><ul>\n<li><p>耗时，耗性能</p>\n<ul>\n<li><p>O(n): 耗时</p>\n</li>\n<li><p>fork(): 消耗内存，copy-on-write 策略</p>\n</li>\n<li>Disk I/O: IO 性能</li>\n</ul>\n</li>\n<li><p>不可控，丢失数据</p>\n</li>\n</ul>\n<h3 id=\"什么是-AOF\"><a href=\"#什么是-AOF\" class=\"headerlink\" title=\"什么是 AOF\"></a>什么是 AOF</h3><p>每执行一条命令，就将该命令写入到 AOF 日志文件中。</p>\n<h3 id=\"AOF-三种策略\"><a href=\"#AOF-三种策略\" class=\"headerlink\" title=\"AOF 三种策略\"></a>AOF 三种策略</h3><p>（1）always</p>\n<p>​    每条写命令都会出发刷新，将缓冲区的命令日志刷新到 AOF 文件中。</p>\n<p>（2）everysec</p>\n<p>​    每秒（默认值）刷新一次</p>\n<p>（3）no</p>\n<p>​    由操作系统决定什么时候刷新。</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>always</th>\n<th>everysec</th>\n<th>no</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>优点</td>\n<td>不丢失数据</td>\n<td>每秒一次 fsync <br>丢失一秒数据</td>\n<td>不用管</td>\n</tr>\n<tr>\n<td>缺点</td>\n<td>IO 开销较大，一般的 sata 盘只有几百 TPS</td>\n<td>丢失1秒数据</td>\n<td>不可控</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"AOF-重写\"><a href=\"#AOF-重写\" class=\"headerlink\" title=\"AOF 重写\"></a>AOF 重写</h3><table>\n<thead>\n<tr>\n<th>原生 AOF</th>\n<th>AOF 重写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set hello world<br>set hello java<br>set hello hehe<br>incr counter<br>incr counter<br>rpush mylist a<br>rpush mylist b<br>rpush mylist c<br>过期数据</td>\n<td>set hello hehe<br>set counter 2<br>rpush mylist a b c</td>\n</tr>\n</tbody>\n</table>\n<p>AOF 重写的作用：</p>\n<ol>\n<li>减少磁盘占用量</li>\n<li>加速恢复速度</li>\n</ol>\n<p>AOF 重写的两种实现方式</p>\n<ol>\n<li><p>berewriteaof</p>\n</li>\n<li><p>AOF 重写配置</p>\n<p>| 配置名                      | 含义                   |<br>| ————————— | ———————- |<br>| autoaof-rewrite-min-size    | AOF 文件重写需要的尺寸 |<br>| auto-aof-rewrite-percentage | AOF 文件增长率         |</p>\n<p>| 统计名           | 含义                                   |<br>| —————- | ————————————– |<br>| aof_current_size | AOF 当前尺寸（单位：字节）             |<br>| aof_base_size    | AOF 上次启动和重写的尺寸（单位：字节） |</p>\n<p>自动触发时机：</p>\n<ul>\n<li>aof_current_size &gt; auto-aof-rewrite-min-size</li>\n<li>aof_current_size - aof_base_size / aof_base_size &gt; auto-aof-rewrite-percentage</li>\n</ul>\n<p>AOF 重写流程</p>\n<p><img src=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBxIQEBIQEhASFRUWFhcWFRYXFhUXGhgXFRUXGBUYFhcbHSggGB0oHxgWIzEhJikrLi4uGCAzODMtNygtMCsBCgoKDg0OFQ8PGisZFR0rLS0rLSstLS03LSstLTcrLSstLS0tNy03LS0tNy0rNzcrLSsrLSsrKysrKysrKysrLf/AABEIAOoA2AMBIgACEQEDEQH/xAAbAAEAAgMBAQAAAAAAAAAAAAAABQYCAwQBB//EAFMQAAIBAwIDAwQOBQgGCgMAAAECAwAEERIhBQYxEyJBMlFhcRQVFlJUVYGRkpOUscHTI1Oh0dIkNUJigoTC1AdFZHLE4yUzQ0R0oqOks8M0Y4P/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oADAMBAAIRAxEAPwD7jSlKBSlKBVdi47czDtLeyWWJs6HM6xlgDgkoU23B8anrjOhsdcH7qhuRP5ssf/DxZ9egZ/bmgx9tb74sPyXMP44r323vPiuT5J7f+KpSe+VJY4m2MgYqdsdwoCPWdYx8tbhMvvl646jr5vX6KCF9uLz4rl+vtv4689t734sf5bi3/fU6sgO4IPqNc11xGOPdm284BYDcAZIBxnIxnrQRftrffFvz3MX4A09s7/4tT7Un8FTnajzjrjqOvm9dcvEOIiJchTIxdYwilcl28CSQF23OfAUEb7Z3/wAWr8l0n4oK2Jxx40aS6tnt0DRqGLxyhmlkEagCMkjvMvUY3qaU5AOMejzVAc6DMVuD5Ps2zyPP/KE0/wDm0n5KCwUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSg8bpUFyJ/N1qPARgD0qpIU/KADU1PEHVkOcMCDg4OCMbHwNQY5elQBIOITwxKqpHEsduyoqKFABaMseniTQOZuDyXLxFFiIWOVCXJyjSNFpkQAHLKEbHTqNxVd4fwE3BkX9EeziKBwGIM8kbAzYKj9LnBPiMrvkVYxwa7H+tJj64bb8ErL2qvPjJ/lgg/dQQtryxdRaWjMAOVJUlgo7NmKKoVAADrOcAYx4kk0bkj9GqARZDOWbcFwZo3XJH9VGGOgzUx7TXnjxSX5ILcfeprkhtrh55bccUudUSoznsLbT+k1aQD2e57p+cUEW/KN0ImQGBj3sEnB1aCqyeRgN3jk41f1q77HllxJE8iRfo5FYkEkyMO2JlO3lEyL1z0O/Su/2ku/jW4+qtfy6e0d38a3H1Vr+VQWCq5z7tao3it3Ykek+zYBj5ia2Dg12P9aTH1w234IK2R8Ekcr7JumnVJElRezSPDpnSW0+UMkHHnUGgm6UpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKUpQKr/C2xxO/Xzx2rfOJl/wANWCqXY8bhPHrm3DntDbQrp0ts0TTO2+MY0yJv03xQWq3vQ8ssQUjs9GSeh1gnb1Y/bXVXJbWxWWZyRh9BA8RpXSc110ClKUClKUClKUClKUClKUClKUClKUClKUClKUClKUCoF+aEydFtdyr4SRRa0bHXSwO++R8lTU5IViOuDj142qG5EA9rLI+e3iY+lmQFj85NBj7qV8bPiH2WQ/dWDc3RjracR+xXJ+5KsVarq5WJGkc4VRkn0D0eJ9FBADnGI/8AdeI/YbsffHUbHeWovm4gLLiHbNCICfYc47oYtndep2HqUVa7e/V2dQHygBJKkA6hnAPQkY3XqPEbiua047FLMIV1atGs5GMbIcMDupw42I8DQcnuoX4FxD7M4++vPdR/sPEPqD/FW5uZrcSGLv6g4jxoJyxKDYdcd9d8dMkZAJqaoK/7qB42PEB/dyfuNdNlzFFJrLJPCFKAm4hkgUmRgqBXcBWJYgYBO5HnqXqvc7LqhgQ+S15ZhvULmNgPpBaCw0pSgUpSgUpSgUpSgUpSgUpSgUpSgUpSgUpSg8YZGKguRP5utR72MJ9Alc/sqanQsrKG0kggMPAkYz8lV+14Ze20aQW8tp2MaIidpHKXwqgZdlkAJJydh40FkrTdxF0ZV0ZPv11L8q5GfnqGK8U9/YH+xOP8Zr3/AKU/2D/16D3h3BJYUkg7VHicMRrjJcM/l6zq0uu+wwCBgb4rksOW3gnVgtu6hdOsqVddlUaVwRsFx1HU7V0gcU99YD+zOf8AEKwhk4i+Ss3DzglThJjhlOGB/SdQfCrUjli5SZHVo5UUJM0qhlZ9RYYyw1qB58KAM1axUDo4n+ssPqp/zKdnxT9bYfVT/mUVP1XefDi1jf3t3ZN/72EfjWZXinv7A/2Jx/jNYycNurnQt01uESWKbEXaHWYm1qra+g1BG2z5OKgm/ZKa+y1rrxq0ZGrSSQDp642O/ordVR595IXinsdxM0EsDkrKmdWllOVyCD5QU9fA+eu/gfGyXFndJ2Nyo2XJKTKu3aQOfLHnU95fHwJCfpSuCHiqvK0SpKdLFGfQdAYKGI1ePUdPGg76VXuZ+KkK1vCziXXaqzAHuJcz9mWBx10rJ6tjXZY8MS2Yubi4bIxiad3Xz5AY7HAO/mzQStKhYuGJFMrm8uCxYlY3nyrE52CHqB4D0UueGK8+r2ZcKxIYRLMAuFxnCYzjbf10E1SoriHDFuCJBc3CDGB2MuhTvnO3U+ml/YJLGga4mRU/ppMyFsDB1sD3qCVpUS1lGIBbm5mAO4ft2EpGrO0mdRG4H7KyhtRZwSsJJ5cKz/pJGkburnCk+rpQSlK4OASyPaW7zEGRoo2kIGAXZAWwPAZJpQd9KUoFKUoFKUoFKUoFV3kXe2lbxN3eE/apR+FWKq7ySNME6+9vLsfPcyMPvoLFSoLh085udDvqxGzTAAaI3Zl7JEbAJOnXnOdsHbIqdoFKUoFcHGOEQ3cfZzJqGcqQSrIw6PG43Rh5wa76UFW9sZ+HHTeMZrbYLdgd6P0XSgYx/wDtXb3wHU5twxpJQ8cTRkzdo0yzllZPHQoP9IYGCoAznJIFWR1BBBAIOxB8R6aq0tpLwsmS2RpbTOZLdd3gHUvbDqy+eL6PvSG7iEr2XaSjMhka1hQuRqZnnZWHdA6CTI9VdHM3BjdqoR1BXUO9kjvjSTgeOCRn0+k1IQywXkKupSaJxqU7MCCMZHp3IrTwzgFrbMXgt4o2I0kooBIznH7BQcFzy6HltJNQ/Q7NglRjRj9Go8nLAeI2z1zXJ7mZlvTdLOpysq47ylRJkjHlA7kb+jpUvbct2kcvbpbxrJktrAOctnJ6+k11RcLhSZ7hY1ErjSz+JAxgH5h81WpEDwzlZoYGhN0zgqFUHVpXBB1adW5yM+asL/lmSS1S3MsWU1b4de01f0nwdmO5Jwdyal7flqzjl7dLaJZcltYXvZbOTn05Pz0uuW7SWXt5LaJpMg6yuTlcaTn0YFKRCTcos8kUrSqCiRAKS0ijsiTgZwcHberZcTBEZ2IAVSxJ6AAZJPorh4pwC1umDT28cjAYBZckDOcCts/CIJFjR4lZY/IU9B3dOMeIxtg0qx5wG9a4tbed4+zaSJJGTrpLqGK/Jmva7VGBgUqD2lKUClKUClKhrzmi0hdo5JsMux7khH0gpH7aCZpVfPOvDx1ukHrDj7xXnu34b8Oh+VsUFgJqlf6OOPx3bX6RrKNF1Ix1rpx2h8jr5QKtkekVK+7fhvw6D6VcPC+YOE27TtFcxgzymaTGo5dlVSdh/VH7aCeseCwwkFBJkFjlpJG3bOokFsE71I1Ae7Ox+EA+pJT9y092Vj+vP1U38FBP0qCi5xsGdUF1GGYhVVtSkljgAagNyanAaD2lKUClK1zTqm7Mqj0kD76CucQ4XLaSNd2K6gx1XFpkBZfPJDnZJv2P0ODgia4RxSK6iWaFtSnIOxDKw2ZHU7qwOxU7itovYj/2sf0l/fXBDwyBbpruOTQzrplVWXRKRjQ7r79QMBhg4ODnAwEvSsO1X3w+cV4Z198vzig2UrSbuMf9on0h++sTfRfrY/pr++g6KVze2EP66P6a/vrZHcI3kup9RBoNtKUoFKUoFKUoFQHIg/kETeLmWRv96SaR3/axqfqB5HP8iRfeSTofXHcSKfuoJ6lKUHLBfxvJJEpYtHjX3H0gkZwHI0k7jIBJGRmtkdyrM6A95Mahg7ahkb+O3mqlXnDrxWuOy9k6mZ2gIfCgtJJ2hbBA8gR6dXj0wc1IWPD5obzLds0BCBO8zHtezwWmOSzp1AzsDuc5BWotdKUqKVXuQB/0dbt4uHlb/emkeRx9JjVhqi8q8HnktY3i4lcwAdpGY0S2dQYppEOntImIyQc70F6pVb9z12evGbz5IrEf8PXo4Bdr5PGLo+h4bNvuhBoLHmqxNbR3XE5Ypo0kjitoWVJFDrrlkmywVsgHEYGfTUHzFyhxOeeFouKMmkHVOFCMBnZBFGAJQdz3iAKmeCWskPEZElmeZjZw/pHVFLaJp87IoA8oeFBItylw89eH2Z//AIRfw1qPJXDD/q2y+zxfw1PUoK7JybwpRluHWIHnMEIHz4ovJ3CsBva6xwRkHsIcEecHFdPM9i80DKmtiRpCL2YGWIGslxkAAknB3Gdj0rl45waV0SOIkqoYHLKGw2BhMpjYZA3Ub0RkvKvCwoYWFjpbGk9jDg56YON81vj5Y4ed1sLPHogh/hqGk4FLLb2iGOROyJ1Ru0ZJJjYZ1KxGnJx5znzZzPctWTwWyRSKgZc6ihyGLHUzdBjJJqjH3L2PwC0+oi/hrWOUOHhg44faBlIKsIIgQQcgghdjU3SoqD5OneW2MruWLz3LDJJ0p7IkVFGfAKAK8rXyLtaFfFLm7U/JdzY/ZilBYaUpQKUpQeN6Kq3DYr+ziS3jtYJgoy0puDGXdyXkbR2Tae+zf0jU/f8AEUh0BslnOlEUFmYgZIAHmAySdhWA4rF2AuCSIzjcg5yzBQCOudRxQR44jxDx4dF8l2PyqHid/wDFyfak/gqXvryOCN5pXVERSzsxwAB1JqJ5Vu5rlZLuQlY5mzbRkYKwLsjt46pPLwegKjqDQY+2XEPi6L7WPyq89sOI/F0P2v8A5NWClBX/AGx4j8XQfbP+TQcR4j8XQfbP+TXnOLtCkN4pOLaVZJQDgGFgY5s+cKra/wCxU+rAgEHIoIWLiN8WUNYIASAWFyrYHicaBmunlvhrWtrDA7BnVcuw6NI5LyMM+BZmNSIYHoRt1r3NB7SlKBVdvY7iG8ku1t2nDRRwokbRqyhWkeR27RlG5KjAJ6VYqUFf9vrn4pu/rLP86nuguPim9+lafn1YKUFdPMVxkAcJvvpWg/8AvrL2/ufim8+nZ/n1YKr/AB9yL3hi5IBmmyAeuLaXGfP40Hnt9c/FN39ZZ/n09vrr4ou/rLP86rBSgr/t/dfFN39ZZ/n1nDx6YsFbhl4oJA1E2pAyep0zE4qepQRPK/D3t7fTLjtHkmlkwcgNNK8mAfEDUB8lKlqUClKUClKUEZxqIuqr2Uki76uzk7Nx5h5S5U7573m2PhF23Bplt1Qu+FdSkGpGVY1mVkUuVySqj32Nsb9TZ6qn+kS4vlto4+HKxuJZkUMAMIgy7s5OwXCgH/e23oPbge2N72XW1tHDSeaa6G6R/wBZYwQx/rlfemrSBUXyxww2lpDAdOpF75UsQzk5diW3YliSSdySTUrQKUpQa54VdWRgCrAqwPQgjBBqs8vT9nb3FjNIwNpmPXkhjbsuYJQwyc6O6W99G1WqqDz9dXdpe2V3bRKY3ZLa5frhJJk06kx4d7S2di523FB28GDwXLrCltKXhUkRMyLGI27odu9rd+0dtRwToO22azsJYWvV0ToSjzdo5dS8sr5HYDHVIxkHwBRQNw1WxEA6AD1DFEQDoAPUMdetBlSlKBSlKBSlKBVc5oyLnhbf7Wyn1NaXP4gVY6ov+k7i01s3DjHb9rm7QL3sYlKsiKdjswdt/DT0oLLxyeZQiwxudZId00ExqB1VWIBY9ATsOpz0PLyUmm0C6JF78p/SMHZtUrnJbUxPXG/mqeFFUDYDFB7SlKBSlKBUPxLjwhm7BLe4nfQJGEQj7isWVS2t16lWxjPkmpiq3Zuq8VvmbAxaWhJPgoku8/J1oNp5kfx4bf8A0IT90tPdK/xdf/VxD75a6BzJbdz9Iw1HG8cg0+TvICuYwdS4LYB1DHWs+Xr17iETsyFXJaMKrLpTOwYknUduoA9VBxnmSXw4Xfn+zbD75qyTmXG81nd26eMkqxaF8BqKSNjJwOnjThnNEEkQZ30NoZ2BSQDSoJZlyO8uAe8Njg4qK43xBriynk1IYvZMUaKFYHEd2iPqYnDasZ2AxnxoLkTUCvNUbANHb3ciHdZI4GdHU9GRh1B8DUrxUkQTFTg9m+D5jpOKh+WuIQQ2HD0LhNdtAIwc9OzjAyfAZZRk7ZYDqRQZ+6pPG0v/ALLMfuFYnm6L4NxD7FdfwVnNzEkhhS3ljLSuVGsMO6iFyVXYtkacMNiGzuOsne8SigKCVwpckLsTnHXoNgPEnYUESObYvgvEPsVz/BR+aIyMew78j/wk34rUja8at5R3JVPTbcHvEhdiMjONvPUfc832qJ2glRlGcknR9EuAG32ODtVGQ5nHwO/+zP8AjXvumHwO/wDs7fvqSseIxT6uykD6Tg4z5yMjzjIOCNjg+auG35hhM00DuFZJRGoOrvalhxg4wW1SqMAkjUpOM1B5a8yJJIsfse8Qt0L20yoMDPefTpUbdSalbW5SVFkjdXRwGVlIIZTuCCOoqBn4yZ/ZS28kRSKA5IJL9o6MV6HCgYHUZOfDG+nhfMdhaWlrFLeW0JFvCQjyxqwUxrpOknNB08F5iE8jI0lsN5QEWUmT9HIV3BAHhkgdMit9zxeRJUXsxoeZYVyTrfKamdBjGlRn16W8wzB+3fD3ZDccX4dKseoovaQLkspXMn6QhtmIwAo3zjzbra8tGlM0fFbTSMLEsbW+I0GNSKdRG5G5AB6DwFBbqrcHGLy47R7WC2MSyyxAyyyIxaGRo3OFjYY1K2N+mKHnvhyzm3e7jjcYwXOlGB8UlPcbzdc1nyFIGszjG1xdjI8cXc3ez456/LQPZXFfgdh9rm/y1a534lJp12Fg2lg65u5dmXow/k3UV3cV5ihtpBE5OoqW2xsAVA1EkAZ1eJrVccfYTGFI1bUdETF8BnGDKGGk6VUMN9ySGGBgZo0m64r4Wdh8t3N/lqyW44qettYD+8zn/hxW3hnG3lmeJkjTsx38OzHUpIbA0AacjYkgnPQVtTmCEwvP3tCMV6Y1HVpGgnZsnzH14oVzmbin6iwPo7ecft7Gsrbi1xG8aXkMMbTSCOLsZWlBbs5JG1ao0KgCM9M9akuGcQS4TWhOMsu4IPdJG4PTpmojmL/83hef18wHr9hz7/sPz1BYqUpQKqulH4pfIX0arO2QsGCkEyXfkk9CAc/KKtVcHEeC21yQZ7aCYjoZI0cjPXGoHFBD2vLUaMzC6Y6ypcfo+8qFGVcgbbp18Qx9dd8TPCiRRGB0RQoZ5SrHG24VCP21obkjhh/1bZ/URfw1D3nLNinELSBbCzEbw3DOvseHdozDoOdOdtTfPVI6n5YiKafZjhuz7HXmHPZaSugDTj+kTnrWfNEaR8PkRZAxaZCu4Pflu1ZRt/WbArvHJ/Dvi6y+zw/w1na8qWEUiyx2NqjqcqyQxqQfOCBSiQ4hIqxSM5woRix8yhSSfmqocG5ca54bw5XmeMraW6OgHgoicg9MHuAb5q6yIGBVgCCCCCMgg9QR4ioa45SsJHaR7OEsxJZtIySepNQeWXBGiKv2naOg0qMaFKrGERTjVjpkt5z0A2rdNYPOQZlVAEkQaJC+RKuls5RcYxt1rnHJth4WkY9WofcaHk6xO3sZfpSfxUHLHyhpC6bqVWBBLAISSn/VklgScb9Sc58wAHUvLMYjSJXYBC5XofLZWwfVprz3F8P+BxfMf309xfD/AIFD81WpHvDeEPZ6+xIl1nftJCmlQWKgEIxPlttsB4AZOdEvLbSO0rTFWMglRQFZUcNA3UgGQfoR5vLb0EbvcXw/4FB9GnuL4f8AAofo0pGdrwxbS2lDyl17LvuwA2SPSzHGwyBmsOVLFWsLMyxIXFvCG1KpIxGu24rZDynZIQy2yjrtliCCCCCpOCME7EVNAY2FRWlbOMdI0HqVf3Vpl4Tbt5VvC3rjQ/eK7aUFfj5MsBcG6NrG0m2nUAVTH6tPJQ+OQM+mtfIQ/ksm3dN3elfSpvJsH1VZKgbjlG1dtWJ08NMVzcxIMeZI5Ao+QUHdfcHhmftHTvhSgbJyAc9B08T4Vrbl+3J1CIB9TP2i5V9TtqY6xv1/Zt0rg9xdt4S3w/v97+bQ8m256zX5/v15+EtBL2vDo4lZUBGryjqbJOMaixOdXp65rRDwSJFZFDaGIJQsWXOrUSA2cEnr58nzmo73FWv6y9+3Xv5te+4q19/e/br382gm7O0SJdKAAZJ6AeUxPh66heZgPZXC/feynI9XsO4DH5jXnuKtfCS9H9+vfza7eG8vQwOHBmdhnSZppZimRhtBkY6cjriglqUpQKVjLIFBZiAACST0AG5JNQo5w4d8PtfrU/fQTlV/i23EeHnzrdL86Rt/hroHNdgf+/Wv10f76pvNRsrniXD7scSt1SFm7ZRcIAQoLRHGrfvbH0Gg+lUqD92HD/h9t9an76yi5tsGIUX1sSdgO1Tc/PQTVKZpQKUpQKUpQKVi7gAkkADqTtWMUyuMqysOmQQRnzbUGylaY7pGZkV0LL5ShgSvrA6VuoFKUoFKUoFV7mBj7N4YMnBmmz6SLaXGfP41YarnNGRc8LYfC2U+prS5/ECgsdKUoFKUoFKUoK/z5/N8499oQnzB5UVj8xNTbQIeqL8wqE5//m25PmQH5nU11cas5pChibAAbUutk1E6dO49TfPQdUkMAOGWIHBbBC50jqfUMjetUc1qdIVrc6/IwY+9vju+ffzVAz8v3L6GJjbT2SkNqLNGkY1oZM9GfV1G+d6kOHcKkF1JcsNAYbRroPowxx12B7pxk+NVE2IlH9FfmFYyQIRuin1qDUBb2d0PZKtrzLqMbh0IQaQApXbD7eUARv6K7uX7CWESiSQuC+VyMYGhRsc9Nv2VFc/Ichfhto5Jy8Suc9cv3iPkJxU/Va5Pn7PhUD6HfTGe4gyx0sw0qPE1A8E/0mm5u5rc8MvUEaBsdmWlyWx3owO4Ou+TQfQ6VXhzWvwPiA/usn4V6ea4/G14h9kn/BaCwUquNzhCOttxD7FdH7krwc62/wCo4h9gvPyqCQ5mjV7WRHcIrFAWZC6jvr5Sjqp6HO2DvUfwuaUCUIIXhVv+sRGjLLoBfs1QESMOgIxnYdQa992dt+qvvsF7+VXnu0tf1d79hvvyaDl4FEI7qMROkidiyEJEyCBAdS94k5ZjgEMSTpztg5t1Vv3a2vvL37Dffk0PO1p728H9xvfyaCyUqtrzxZ/7UPXZ3g++KsxzrZfrJR67e5H3x0FhpVfHOlh8JA9aSD71r33a8O8b2EetsffQT9V/m0d/h5817H/5opl/xVj7uuF/GVp9cn76i+PczWVw1lHBe20r+zIDojlRmxlsnSDnG9BdqUpQKUpQKUpQRfM3DWurWSBCoL6PKzgqsisy7dMqCud8Zzg9K4fbDifjw61+S+b8bYVYqUFePEuJeHDYftm3/wAP4VieI8U8OHWvy3zf5arHSgrns/inxdafbn/yterxDiX9Lh1v61vC33wLVipQRvLnDTa2kFuzBmjjVWYbBmx3yB5ic1IaBnOBnGM+OPNmsqUClKUClKUClKUClKUClKUClKUGJQHqB81YC3TOdC58+BW2lApSlApSlApSlB//2Q==\" alt=\"\"></p>\n<p>常用配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appendonly yes</span><br><span class=\"line\">appendfilename \"appendonly-$&#123;port&#125;.aof\"</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">dir /bigdiskpath</span><br><span class=\"line\">no-appendfsync-on-rewrite yes</span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"RDB-和-AOF-的抉择\"><a href=\"#RDB-和-AOF-的抉择\" class=\"headerlink\" title=\"RDB 和 AOF 的抉择\"></a>RDB 和 AOF 的抉择</h2><h3 id=\"RDB-和-AOF-比较\"><a href=\"#RDB-和-AOF-比较\" class=\"headerlink\" title=\"RDB 和 AOF 比较\"></a>RDB 和 AOF 比较</h3><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>RDB</th>\n<th>AOF</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>启动优先级</td>\n<td>低</td>\n<td>高</td>\n</tr>\n<tr>\n<td>体积</td>\n<td>小</td>\n<td>大</td>\n</tr>\n<tr>\n<td>恢复速度</td>\n<td>快</td>\n<td>慢</td>\n</tr>\n<tr>\n<td>数据安全性</td>\n<td>丢数据</td>\n<td>根据策略决定</td>\n</tr>\n<tr>\n<td>轻重</td>\n<td>重</td>\n<td>轻</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"RDB-最佳策略\"><a href=\"#RDB-最佳策略\" class=\"headerlink\" title=\"RDB 最佳策略\"></a>RDB 最佳策略</h3><ol>\n<li>“关”</li>\n<li>集中管理</li>\n<li>主从，从开</li>\n</ol>\n<h3 id=\"AOF-最佳策略\"><a href=\"#AOF-最佳策略\" class=\"headerlink\" title=\"AOF 最佳策略\"></a>AOF 最佳策略</h3><ol>\n<li>”开“：缓存和存储</li>\n<li>AOF 重写集中管理</li>\n<li>everysec</li>\n</ol>\n<h3 id=\"最佳策略\"><a href=\"#最佳策略\" class=\"headerlink\" title=\"最佳策略\"></a>最佳策略</h3><ol>\n<li>小分片</li>\n<li>缓存或者存储</li>\n<li>监控（硬盘、内存、负载、网络）</li>\n<li>足够的内存</li>\n</ol>\n<h2 id=\"开发运维常见问题\"><a href=\"#开发运维常见问题\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h2><h3 id=\"fork-操作\"><a href=\"#fork-操作\" class=\"headerlink\" title=\"fork 操作\"></a>fork 操作</h3><ol>\n<li>同步操作</li>\n<li>与内存量息息相关：内存越大，耗时越长（与机器类型有关）</li>\n<li>info: latest_fork_usec 查询上一次 fork 的时间</li>\n</ol>\n<p>如何改善fork</p>\n<ol>\n<li>优先使用物理机或者高效支持 fork 操作的虚拟化技术</li>\n<li>控制 Redis 实例最大可用内存：maxmemory</li>\n<li>合理配置 Linux 内存分配策略：vm.overcommit_memory = 1</li>\n<li>降低 fork 频率：例如放宽 AOF 重写自动触发时机，不必要的全量复制</li>\n</ol>\n<h3 id=\"进程外开销\"><a href=\"#进程外开销\" class=\"headerlink\" title=\"进程外开销\"></a>进程外开销</h3><p>子进程开销和优化</p>\n<ol>\n<li>CPU：<ul>\n<li>开销：RDB 和 AOF 文件生成，属于 CPU 密集型</li>\n<li>优化：不做 CPU 绑定，不和 CPU 密集型部署</li>\n</ul>\n</li>\n<li>内存：<ul>\n<li>开销：fork 内存开销，copy-on-write。</li>\n<li>优化：echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</li>\n</ul>\n</li>\n<li>硬盘<ul>\n<li>开销：AOF 和 RDB 文件写入，可以结合 iostat，iotop 分析</li>\n<li>优化：<ul>\n<li>不要和高硬盘负责服务部署在一起：存储服务、消息队列等</li>\n<li>no-appendfsync-on-rewrite = yes</li>\n<li>根据写入量决定磁盘类型：例如 ssd</li>\n<li>单机多实例持久化文件目录可以考虑分盘</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"AOF追加阻塞\"><a href=\"#AOF追加阻塞\" class=\"headerlink\" title=\"AOF追加阻塞\"></a>AOF追加阻塞</h3><p><img src=\"https://upload-images.jianshu.io/upload_images/12588973-ed80e9c29a4d1ef2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700\" alt=\"\"></p>\n<p>AOF 阻塞定位</p>\n<p>​    Reids 日志：</p>\n<p>​    Asynchronous AOF fsync is taking too long (disk is busy?).</p>\n<p>​    Writing the AOF buffer without waiting for fsync to complete,this may slow down Redis.</p>\n<p>​    info Persistence:</p>\n<p>​    …</p>\n<p>​    aof_delayed_fsync: 100</p>\n<p>​    …</p>\n<h3 id=\"单机多实例部署\"><a href=\"#单机多实例部署\" class=\"headerlink\" title=\"单机多实例部署\"></a>单机多实例部署</h3><h2 id=\"Redis-复制的原理与优化\"><a href=\"#Redis-复制的原理与优化\" class=\"headerlink\" title=\"Redis 复制的原理与优化\"></a>Redis 复制的原理与优化</h2><h3 id=\"什么是主从复制\"><a href=\"#什么是主从复制\" class=\"headerlink\" title=\"什么是主从复制\"></a>什么是主从复制</h3><p>（1）单机有什么问题？</p>\n<p>​    机器故障</p>\n<p>​    容量瓶颈</p>\n<p>​    QPS 瓶颈</p>\n<p>（2）作用</p>\n<p>​    数据副本</p>\n<p>​    扩展读性能</p>\n<h3 id=\"复制的配置\"><a href=\"#复制的配置\" class=\"headerlink\" title=\"复制的配置\"></a>复制的配置</h3><p>两种实现方式</p>\n<ol>\n<li><p>slaveof 命令</p>\n</li>\n<li><p>配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slaveof ip port</span><br><span class=\"line\">slave-read-only yes</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"全量复制和部分复制\"><a href=\"#全量复制和部分复制\" class=\"headerlink\" title=\"全量复制和部分复制\"></a>全量复制和部分复制</h3><p>查看 run_id</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -p 6379 info server | grep run</span><br></pre></td></tr></table></figure>\n<p>查看偏移量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -p 6379 info replication</span><br></pre></td></tr></table></figure>\n<p>全量复制开销：</p>\n<ol>\n<li>bgsave 时间</li>\n<li>RDB文件网络传输时间</li>\n<li>从节点清空数据时间</li>\n<li>从节点加载 RDB 的时间</li>\n<li>可能的 AOF 重写时间</li>\n</ol>\n<h3 id=\"故障处理\"><a href=\"#故障处理\" class=\"headerlink\" title=\"故障处理\"></a>故障处理</h3><h3 id=\"开发运维常见问题-1\"><a href=\"#开发运维常见问题-1\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h3><ol>\n<li><p>读写分离</p>\n<p>将读流量分摊到从节点</p>\n<p>可能遇到的问题：</p>\n<ul>\n<li>复制数据延迟</li>\n<li>读到过期数据</li>\n<li>从节点故障</li>\n</ul>\n</li>\n<li><p>主从配置不一致</p>\n</li>\n<li><p>规避全量复制</p>\n<ul>\n<li>第一次不可避免</li>\n<li>系欸但运行 ID  不匹配<ul>\n<li>主节点重启</li>\n<li>故障转移</li>\n</ul>\n</li>\n<li>复制积压缓冲区不足<ul>\n<li>网络中断，部分复制无法满足</li>\n<li>增大复制缓冲区配置 rel_backlog_size，网络“增强”。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>规避复制风暴</p>\n<ul>\n<li>单主节点复制风暴<ul>\n<li>问题：主节点重启，多从节点复制</li>\n<li>解决：更换复制拓扑</li>\n</ul>\n</li>\n<li>单机器复制风暴<ul>\n<li>机器宕机后，大量全量复制</li>\n<li>主节点分散多机器</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Redis-Sentinel\"><a href=\"#Redis-Sentinel\" class=\"headerlink\" title=\"Redis Sentinel\"></a>Redis Sentinel</h2><h3 id=\"主从复制高可用存在的问题\"><a href=\"#主从复制高可用存在的问题\" class=\"headerlink\" title=\"主从复制高可用存在的问题\"></a>主从复制高可用存在的问题</h3><ol>\n<li>手动故障转移</li>\n<li>写能力和存储能力受限</li>\n</ol>\n<h3 id=\"架构说明\"><a href=\"#架构说明\" class=\"headerlink\" title=\"架构说明\"></a>架构说明</h3><p>客户端不直接访问 redis，而是通过 sentinel 来访问。由 sentinel 来负责主从节点的管理。</p>\n<h3 id=\"安装配置\"><a href=\"#安装配置\" class=\"headerlink\" title=\"安装配置\"></a>安装配置</h3><p>sentinel 的默认端口为 26379</p>\n<ol>\n<li>配置开启主从节点</li>\n<li>配置开启 sentinel 监控主节点（sentinel 是特殊的 redis）</li>\n</ol>\n<h3 id=\"客户端连接\"><a href=\"#客户端连接\" class=\"headerlink\" title=\"客户端连接\"></a>客户端连接</h3><p>请求相应流程</p>\n<p>jedis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JedisSentinelPool sentinelPool = new JedisSentinelPool(masterName, sentinelSet, poolConfig, timeout);</span><br><span class=\"line\">Jedis jedis = null;</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    jedis = redisSentinelPool.getResource();</span><br><span class=\"line\">    // jedis command</span><br><span class=\"line\">&#125; catch (Exception e)&#123;</span><br><span class=\"line\">    logger.error(e.getMessage(), e);</span><br><span class=\"line\">&#125; finally &#123;</span><br><span class=\"line\">    if (jedis != null)&#123;</span><br><span class=\"line\">        jedis.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redis-py</p>\n<h3 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h3><h3 id=\"常见开发运维问题\"><a href=\"#常见开发运维问题\" class=\"headerlink\" title=\"常见开发运维问题\"></a>常见开发运维问题</h3><h2 id=\"Redis-Cluster\"><a href=\"#Redis-Cluster\" class=\"headerlink\" title=\"Redis Cluster\"></a>Redis Cluster</h2><h3 id=\"呼唤集群\"><a href=\"#呼唤集群\" class=\"headerlink\" title=\"呼唤集群\"></a>呼唤集群</h3><ol>\n<li>超高并发量需求</li>\n<li>超大数据量需求</li>\n</ol>\n<h3 id=\"数据分布\"><a href=\"#数据分布\" class=\"headerlink\" title=\"数据分布\"></a>数据分布</h3><p>顺序分布</p>\n<p>哈希分布</p>\n<ul>\n<li>节点取余<ul>\n<li>使用多倍扩容降低迁移率</li>\n</ul>\n</li>\n<li>一致性哈希<ul>\n<li>顺时针取余</li>\n<li>只影响邻近节点</li>\n<li>扩容后会存在负载不均衡的情况</li>\n</ul>\n</li>\n<li>虚拟槽<ul>\n<li>每个槽映射一个数据子集</li>\n<li>良好的哈希函数：例如 CRC16</li>\n<li>服务端管理节点、槽、数据：例如 Redis Cluster</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>分布方式</th>\n<th>特点</th>\n<th>典型产品</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>哈希分布</td>\n<td>数据分散度高<br>键值分布业务无关<br>无法顺序访问<br>支持批量操作</td>\n<td>一致性哈希 Memcache<br>Redis Cluster<br></td>\n</tr>\n<tr>\n<td>顺序分布</td>\n<td>数据分散度易倾斜<br>键值业务相关<br>可顺序访问<br>不支持批量操作</td>\n<td>BigTable<br>HBase</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"搭建集群\"><a href=\"#搭建集群\" class=\"headerlink\" title=\"搭建集群\"></a>搭建集群</h3><h3 id=\"集群伸缩\"><a href=\"#集群伸缩\" class=\"headerlink\" title=\"集群伸缩\"></a>集群伸缩</h3><h3 id=\"客户端路由\"><a href=\"#客户端路由\" class=\"headerlink\" title=\"客户端路由\"></a>客户端路由</h3><h3 id=\"集群原理\"><a href=\"#集群原理\" class=\"headerlink\" title=\"集群原理\"></a>集群原理</h3><h3 id=\"开发运维常见问题-2\"><a href=\"#开发运维常见问题-2\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h3><h3 id=\"Redis-Cluster-架构\"><a href=\"#Redis-Cluster-架构\" class=\"headerlink\" title=\"Redis Cluster 架构\"></a>Redis Cluster 架构</h3><ol>\n<li>节点</li>\n<li>meet</li>\n<li>指派槽</li>\n<li>复制</li>\n</ol>\n<h3 id=\"Redis-Cluster-特性\"><a href=\"#Redis-Cluster-特性\" class=\"headerlink\" title=\"Redis Cluster 特性\"></a>Redis Cluster 特性</h3><ol>\n<li>复制</li>\n<li>高可用</li>\n<li>分片</li>\n</ol>\n<h3 id=\"两种安装方式\"><a href=\"#两种安装方式\" class=\"headerlink\" title=\"两种安装方式\"></a>两种安装方式</h3><h4 id=\"原生命令安装\"><a href=\"#原生命令安装\" class=\"headerlink\" title=\"原生命令安装\"></a>原生命令安装</h4><ol>\n<li><p>配置开启节点</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">port $&#123;port&#125;</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">dir \"/opt/redis/data\"</span><br><span class=\"line\">dbfilename \"dump-$&#123;port&#125;.rdb\"</span><br><span class=\"line\">logfile \"$&#123;port&#125;.log\"</span><br><span class=\"line\">cluster-enabled yes</span><br><span class=\"line\">cluster-config-file nodes-$&#123;port&#125;.conf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>meet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster meet ip port</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>指派槽</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster addslots slot [slot ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>分配主从关系</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster replicate node-id</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"官方工具安装\"><a href=\"#官方工具安装\" class=\"headerlink\" title=\"官方工具安装\"></a>官方工具安装</h4><blockquote>\n<p>链接：<a href=\"https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww</a><br>提取码：5r0v</p>\n</blockquote>\n","site":{"data":{"next":{"override":true,"cache":{"enable":true},"favicon":{"small":"/images/favicon-16x16-next.png","medium":"/images/favicon-32x32-next.png","apple_touch_icon":"/images/apple-touch-icon-next.png","safari_pinned_tab":"/images/logo.svg"},"rss":null,"footer":{"since":2018,"icon":{"name":"user","animated":false,"color":"#808080"},"copyright":null,"powered":{"enable":true,"version":true},"theme":{"enable":true,"version":true},"beian":{"enable":false,"icp":null}},"creative_commons":{"license":"by-nc-sa","sidebar":false,"post":false},"canonical":true,"seo":false,"index_with_subtitle":false,"exturl":false,"menu":{"home":"/ || home","about":"/about/ || user","tags":"/tags/ || tags","categories":"/categories/ || th","archives":"/archives/ || archive","schedule":"/schedule/ || calendar"},"menu_settings":{"icons":true,"badges":false},"scheme":"Mist","site_state":true,"social":{"GitHub":"https://github.com/yourname || github"},"social_icons":{"enable":true,"icons_only":false,"transition":false},"links_icon":"link","links_title":"Links","links_layout":"block","avatar":{"url":"/images/avatar.jpg","rounded":false,"opacity":1,"rotated":false},"toc":{"enable":true,"number":true,"wrap":false},"sidebar":{"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},"scroll_to_more":true,"save_scroll":false,"excerpt_description":true,"auto_excerpt":{"enable":false,"length":150},"read_more_btn":true,"post_meta":{"item_text":true,"created_at":true,"updated_at":{"enabled":true,"another_day":true},"categories":true},"symbols_count_time":{"separated_meta":true,"item_text_post":true,"item_text_total":false,"awl":4,"wpm":275},"codeblock":{"border_radius":null,"copy_button":{"enable":false,"show_result":false}},"reward":{"enable":false},"related_posts":{"enable":false,"title":null,"display_in_home":false,"params":{"maxCount":5}},"post_edit":{"enable":false,"url":"https://github.com/theme-next/theme-next.org/_posts/tree/master/"},"mobile_layout_economy":false,"android_chrome_color":"#222","custom_logo":{"enabled":false,"image":null},"highlight_theme":"night bright","cheers_enabled":true,"font":{"enable":false,"host":null,"global":{"external":true,"family":"Lato","size":null},"headings":{"external":true,"family":null,"size":null},"posts":{"external":true,"family":null},"logo":{"external":true,"family":null,"size":null},"codes":{"external":true,"family":null,"size":null}},"math":{"enable":false,"per_page":true,"engine":"mathjax","mathjax":{"cdn":"//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"},"katex":{"cdn":"//cdn.jsdelivr.net/npm/katex@0.7.1/dist/katex.min.css"}},"pdf":{"enable":false,"per_page":true,"height":"500px","pdfobject":{"cdn":"//cdn.jsdelivr.net/npm/pdfobject@2.1.1/pdfobject.min.js"}},"han":false,"pangu":false,"disqus":{"enable":false,"shortname":null,"count":true,"lazyload":false},"changyan":{"enable":false,"appid":null,"appkey":null},"valine":{"enable":true,"appid":"eVUj7cd3MyiEwfcYhXhBLmnh-gzGzoHsz","appkey":"IfKchdp9FY0HDE1drNF3FDln","notify":false,"verify":false,"placeholder":"Just Bi Bi","avatar":"mm","guest_info":"nick,mail,link","pageSize":10,"visitor":false},"gitment":{"enable":false,"mint":true,"count":true,"lazy":false,"cleanly":false,"language":null,"github_user":null,"github_repo":null,"client_id":null,"client_secret":null,"proxy_gateway":null,"redirect_protocol":null},"gitalk":{"enable":true,"github_id":"gzhennaxia","repo":"gitalk","client_id":"a77b279c5ba7ebd5fe7e","client_secret":"9cd07d5fdfa6a05f936ce4abc96c87473a48f7ca","admin_user":"gzhennaxia","distraction_free_mode":true},"needmoreshare2":{"enable":false,"postbottom":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"bottomCenter","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}},"float":{"enable":false,"options":{"iconStyle":"box","boxForm":"horizontal","position":"middleRight","networks":"Weibo,Wechat,Douban,QQZone,Twitter,Facebook"}}},"facebook_sdk":{"enable":false,"app_id":null,"fb_admin":null,"like_button":null,"webmaster":null},"facebook_comments_plugin":{"enable":false,"num_of_posts":10,"width":"100%","scheme":"light"},"vkontakte_api":{"enable":false,"app_id":null,"like":true,"comments":true,"num_of_posts":10},"rating":{"enable":false,"id":null,"color":"fc6423"},"leancloud_visitors":{"enable":false,"app_id":null,"app_key":null,"security":true,"betterPerformance":false},"firestore":{"enable":false,"collection":"articles","apiKey":null,"projectId":null,"bluebird":false},"busuanzi_count":{"enable":false,"total_visitors":true,"total_visitors_icon":"user","total_views":true,"total_views_icon":"eye","post_views":true,"post_views_icon":"eye"},"baidu_push":false,"calendar":{"enable":false,"calendar_id":"<required>","api_key":"<required>","orderBy":"startTime","offsetMax":24,"offsetMin":4,"timeZone":null,"showDeleted":false,"singleEvents":true,"maxResults":250},"algolia_search":{"enable":false,"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"local_search":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false},"bookmark":{"enable":false,"save":"auto"},"note":{"style":"simple","icons":false,"border_radius":3,"light_bg_offset":0},"label":true,"tabs":{"enable":true,"transition":{"tabs":false,"labels":true},"border_radius":0},"reading_progress":{"enable":false,"color":"#37c6c0","height":"2px"},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"fancybox":false,"fastclick":false,"lazyload":false,"pace":true,"pace_theme":"pace-theme-minimal","canvas_nest":{"enable":false,"onmobile":true,"color":"0,0,255","opacity":0.5,"zIndex":-1,"count":99},"three_waves":false,"canvas_lines":false,"canvas_sphere":false,"canvas_ribbon":{"enable":false,"size":300,"alpha":0.6,"zIndex":-1},"vendors":{"_internal":"lib","jquery":null,"fancybox":null,"fancybox_css":null,"fastclick":null,"lazyload":null,"velocity":null,"velocity_ui":null,"ua_parser":null,"fontawesome":null,"algolia_instant_js":null,"algolia_instant_css":null,"pace":null,"pace_css":null,"canvas_nest":null,"canvas_nest_nomobile":null,"three":null,"three_waves":null,"canvas_lines":null,"canvas_sphere":null,"canvas_ribbon":null,"Han":null,"pangu":null,"needmoreshare2_js":null,"needmoreshare2_css":null,"bookmark":null,"reading_progress":null,"valine":null,"gitalk_js":null,"gitalk_css":null,"md5":null},"css":"css","js":"js","images":"images","passage_end_tag":{"enabled":true}}}},"excerpt":"","more":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><blockquote>\n<p><a href=\"https://github.com/antirez/redis\" target=\"_blank\" rel=\"noopener\">Redis-GitHbu</a></p>\n</blockquote>\n<h2 id=\"什么是Redis\"><a href=\"#什么是Redis\" class=\"headerlink\" title=\"什么是Redis\"></a>什么是Redis</h2><h2 id=\"有哪些公司在使用Redis\"><a href=\"#有哪些公司在使用Redis\" class=\"headerlink\" title=\"有哪些公司在使用Redis\"></a>有哪些公司在使用Redis</h2><p>GitHub, Twitter, Stackoverflow, Alibaba, 百度，微博，美团，搜狐</p>\n<h2 id=\"Redis的八大特性\"><a href=\"#Redis的八大特性\" class=\"headerlink\" title=\"Redis的八大特性\"></a>Redis的八大特性</h2><ol>\n<li>速度快</li>\n<li>支持持久化</li>\n<li>存在多种数据结构</li>\n<li>支持多种语言</li>\n<li>功能丰富</li>\n<li>简单（代码量小，使用方便）</li>\n<li>主从复制</li>\n<li>高可用，分布式</li>\n</ol>\n<h3 id=\"速度快\"><a href=\"#速度快\" class=\"headerlink\" title=\"速度快\"></a>速度快</h3><p>官方给的指标是10w OPS（每秒十万次读写）</p>\n<p>这么快的原因：</p>\n<ul>\n<li>数据存放在内存中</li>\n<li><p>使用C语言编写（大约五万行代码），C语言离操作系统较近</p>\n</li>\n<li><p>线程模型为单线程</p>\n</li>\n</ul>\n<h3 id=\"持久化\"><a href=\"#持久化\" class=\"headerlink\" title=\"持久化\"></a>持久化</h3><p>Redis所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。</p>\n<h3 id=\"多种数据结构\"><a href=\"#多种数据结构\" class=\"headerlink\" title=\"多种数据结构\"></a>多种数据结构</h3><p>五大数据结构：</p>\n<ol>\n<li>Strings</li>\n<li>Hash Tables</li>\n<li>Linked Lists</li>\n<li>Sets</li>\n<li>Sorted Sets</li>\n</ol>\n<p>其他新结构：</p>\n<ol start=\"6\">\n<li>BitMaps: 位图（本质是字符串，可以实现类似<a href=\"https://china.googleblog.com/2007/07/bloom-filter_7469.html\" target=\"_blank\" rel=\"noopener\">布隆过滤器</a>的功能）</li>\n<li>HyperLogLog：超小内存唯一值计数（本质是字符串）</li>\n<li>GEO：地理信息定位（本质是有序集合，Redis-3.2后提供）</li>\n</ol>\n<h3 id=\"支持多种客户端语言\"><a href=\"#支持多种客户端语言\" class=\"headerlink\" title=\"支持多种客户端语言\"></a>支持多种客户端语言</h3><p>Java，PHP，python，Ruby，Lua，nodejs</p>\n<h3 id=\"功能丰富\"><a href=\"#功能丰富\" class=\"headerlink\" title=\"功能丰富\"></a>功能丰富</h3><ol>\n<li>发布订阅模式</li>\n<li>Lua脚本</li>\n<li>事务</li>\n<li>pipeline（提高客户端并发效率）</li>\n</ol>\n<h2 id=\"典型应用场景\"><a href=\"#典型应用场景\" class=\"headerlink\" title=\"典型应用场景\"></a>典型应用场景</h2><ul>\n<li>缓存系统</li>\n<li>计数器（微博的转发数，评论数以及视频网站的播放数等）</li>\n<li>消息队列系统 </li>\n<li>排行榜</li>\n<li>社交网络（粉丝数，关注数，共同关注数）</li>\n<li>实时系统（垃圾邮件处理系统，布隆过滤器）</li>\n</ul>\n<h1 id=\"安装Redis\"><a href=\"#安装Redis\" class=\"headerlink\" title=\"安装Redis\"></a>安装Redis</h1><h2 id=\"Redis安装\"><a href=\"#Redis安装\" class=\"headerlink\" title=\"Redis安装\"></a>Redis安装</h2><h3 id=\"Linux系统下安装Redis\"><a href=\"#Linux系统下安装Redis\" class=\"headerlink\" title=\"Linux系统下安装Redis\"></a>Linux系统下安装Redis</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 下载</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> wget http://download.redis.io/releases/redis-5.0.3.tar.gz</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 解压缩</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> tar xzf redis-5.0.3.tar.gz</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 建立一个软连接</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> In -s redis-5.0.3 redis</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> <span class=\"built_in\">cd</span> redis-5.0.3</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 编译</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 安装</span></span><br><span class=\"line\"><span class=\"meta\">$</span><span class=\"bash\"> make install</span></span><br></pre></td></tr></table></figure>\n<h2 id=\"可执行文件说明\"><a href=\"#可执行文件说明\" class=\"headerlink\" title=\"可执行文件说明\"></a>可执行文件说明</h2><table>\n<thead>\n<tr>\n<th>可执行文件</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>redis-server</td>\n<td>Redis服务器</td>\n</tr>\n<tr>\n<td>redis-cli</td>\n<td>Redis命令行客户端</td>\n</tr>\n<tr>\n<td>redis-benchmark</td>\n<td>Redis性能测试工具</td>\n</tr>\n<tr>\n<td>redis-check-aof</td>\n<td>AOF文件修复工具</td>\n</tr>\n<tr>\n<td>redis-check-dump</td>\n<td>RDB文件修复工具</td>\n</tr>\n<tr>\n<td>redis-sentinel</td>\n<td>Sentinel服务器（2.8以后）</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"三种启动方法\"><a href=\"#三种启动方法\" class=\"headerlink\" title=\"三种启动方法\"></a>三种启动方法</h2><h3 id=\"最简启动\"><a href=\"#最简启动\" class=\"headerlink\" title=\"最简启动\"></a>最简启动</h3><p>直接使用<code>redis-server</code></p>\n<h3 id=\"动态参数启动\"><a href=\"#动态参数启动\" class=\"headerlink\" title=\"动态参数启动\"></a>动态参数启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-server --port 6380 # 默认端口是6379</span><br></pre></td></tr></table></figure>\n<h3 id=\"配置文件启动\"><a href=\"#配置文件启动\" class=\"headerlink\" title=\"配置文件启动\"></a>配置文件启动</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-server configPath</span><br></pre></td></tr></table></figure>\n<h3 id=\"验证方法\"><a href=\"#验证方法\" class=\"headerlink\" title=\"验证方法\"></a>验证方法</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ps -ef|grep redis</span><br><span class=\"line\">netstat -antpl|grep redis</span><br><span class=\"line\">redis-cli -h ip -p port ping</span><br></pre></td></tr></table></figure>\n<h3 id=\"比较\"><a href=\"#比较\" class=\"headerlink\" title=\"比较\"></a>比较</h3><ul>\n<li>生产环境推荐配置启动</li>\n<li>单机多实例配置文件可以用端口区分开</li>\n</ul>\n<h2 id=\"简单的客户端连接\"><a href=\"#简单的客户端连接\" class=\"headerlink\" title=\"简单的客户端连接\"></a>简单的客户端连接</h2><h3 id=\"连接\"><a href=\"#连接\" class=\"headerlink\" title=\"连接\"></a>连接</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -h 10.10.79.150 -p 6384</span><br><span class=\"line\">ping</span><br><span class=\"line\">set hello world</span><br><span class=\"line\">get hello</span><br></pre></td></tr></table></figure>\n<h3 id=\"返回值\"><a href=\"#返回值\" class=\"headerlink\" title=\"返回值\"></a>返回值</h3><ol>\n<li>状态回复（如<code>ping</code>返回<code>PONG</code>）</li>\n<li>错误回复（如<code>(error) WRONGTYPE Operation against</code>）</li>\n<li>整数回复（如<code>incr hello</code>回复<code>(integer) 1</code>）</li>\n<li>字符串回复（如<code>get hello</code>回复<code>&quot;world&quot;</code>）</li>\n<li>多行字符串回复（如<code>mget hello foo</code>返回<code>&quot;world&quot; &quot;bar&quot;</code>）</li>\n</ol>\n<h2 id=\"Redis常用配置\"><a href=\"#Redis常用配置\" class=\"headerlink\" title=\"Redis常用配置\"></a>Redis常用配置</h2><table>\n<thead>\n<tr>\n<th>属性</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>daemonize</td>\n<td>是否是守护进程（no默认\\</td>\n<td>yes推荐）</td>\n</tr>\n<tr>\n<td>port</td>\n<td>Redis对外端口号，默认为6379<br>7379对应手机按键上MERZ对应的号码，MERZ取自意大利歌女Alessia Merz的名字</td>\n</tr>\n<tr>\n<td>logfile</td>\n<td>Redis系统日志</td>\n</tr>\n<tr>\n<td>dir</td>\n<td>Redis工作目录</td>\n</tr>\n</tbody>\n</table>\n<h1 id=\"Redis-API\"><a href=\"#Redis-API\" class=\"headerlink\" title=\"Redis API\"></a>Redis API</h1><h2 id=\"通用命令\"><a href=\"#通用命令\" class=\"headerlink\" title=\"通用命令\"></a>通用命令</h2><ol>\n<li><p>keys</p>\n<p>eg：<code>keys *</code> 遍历所有的key</p>\n<p>怎么用：</p>\n<p>​    热备从节点</p>\n<p>​    scan</p>\n</li>\n<li><p>dbsize</p>\n<p>计算key的总数</p>\n</li>\n<li><p>exists key</p>\n<p>检查key是否存在，存在返回1，否则返回0</p>\n</li>\n<li><p>del key [key …]</p>\n<p>删除指定key-value，成功返回1，否则返回0</p>\n</li>\n<li><p>expire key seconds</p>\n<p><code>ttl key</code>查看key剩余的过期时间</p>\n<p><code>persist key</code>去掉key的过期时间</p>\n</li>\n<li><p>type key</p>\n<p>返回key的类型（string，hash，list，set，zset，none）</p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>时间复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>keys</td>\n<td>O(n)</td>\n</tr>\n<tr>\n<td>dbsize</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>del</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>exists</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>expire</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>type</td>\n<td>O(1)</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"数据结构和内部编码\"><a href=\"#数据结构和内部编码\" class=\"headerlink\" title=\"数据结构和内部编码\"></a>数据结构和内部编码</h2><h3 id=\"内部编码\"><a href=\"#内部编码\" class=\"headerlink\" title=\"内部编码\"></a>内部编码</h3><p><img src=\"https://i.loli.net/2018/12/25/5c2240654f22b.png\" alt=\"Redis 内部编码\"></p>\n<h3 id=\"字符串键值结构\"><a href=\"#字符串键值结构\" class=\"headerlink\" title=\"字符串键值结构\"></a>字符串键值结构</h3><table>\n<thead>\n<tr>\n<th>key</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hello</td>\n<td>world</td>\n</tr>\n<tr>\n<td>counter</td>\n<td>1</td>\n</tr>\n<tr>\n<td>bits</td>\n<td>\\</td>\n<td>1\\</td>\n<td>0\\</td>\n<td>1\\</td>\n<td>1\\</td>\n<td>1\\</td>\n<td>0\\</td>\n<td>1\\</td>\n<td></td>\n</tr>\n<tr>\n<td></td>\n<td>{<br>“prodduct”:{<br>“id”: “3242”<br>“name”: “test423”<br>}<br>}</td>\n</tr>\n</tbody>\n</table>\n<p>Value up to 512MB，up to 100k is recommended</p>\n<h4 id=\"场景\"><a href=\"#场景\" class=\"headerlink\" title=\"场景\"></a>场景</h4><ul>\n<li>缓存</li>\n<li>计数器</li>\n<li>分布式锁</li>\n</ul>\n<h4 id=\"命令\"><a href=\"#命令\" class=\"headerlink\" title=\"命令\"></a>命令</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取key对应的value O(1)</span></span><br><span class=\"line\">get key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 设置key-value O(1)</span></span><br><span class=\"line\">set key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 删除key-value O(1)</span></span><br><span class=\"line\">del key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. key自增1，如果key不存在，自增后get（key）=1 O(1)</span></span><br><span class=\"line\">incr key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. key自减1，如果key不存在，自减后get（key）=-1 O(1)</span></span><br><span class=\"line\">decr key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. key自增k，如果key不存在，自增后get（key）=k O(1)</span></span><br><span class=\"line\">incrby key k</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. key自减k，如果key不存在，自减后get（key）=-k O(1)</span></span><br><span class=\"line\">decrby key k</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 不管key是否存在，都设置 O(1)</span></span><br><span class=\"line\">set key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. key不存在，才设置 O(1)</span></span><br><span class=\"line\">setnx key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. key存在，才设置 O(1)</span></span><br><span class=\"line\">set key value xx</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 批量获取key，原子操作 O(n)</span></span><br><span class=\"line\">mget key1 key2 key3...</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 批量设置key-value O(n)</span></span><br><span class=\"line\">mset key1 value1 key2 vlaue2 key3 value3</span><br></pre></td></tr></table></figure>\n<p>n次get = n次网络时间 + n次命令时间</p>\n<p>1次mget = 1次网络时间 + n次命令时间</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. <span class=\"built_in\">set</span> key newvalue并返回旧的value O(1)</span></span><br><span class=\"line\">getset key newvalue</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 将value追加到旧的value O(1)</span></span><br><span class=\"line\">append key value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 返回字符串的长度（注意中文） O(1)</span></span><br><span class=\"line\">strlen key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 增加key对应的值3.5 O(1)</span></span><br><span class=\"line\">incrbyfloat key 3.5</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取字符串指定下标范围内的值 O(1)</span></span><br><span class=\"line\">getrange key start end</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 设置指定下标范围内对应的值 O(1)</span></span><br><span class=\"line\">setrange key index value</span><br></pre></td></tr></table></figure>\n<h5 id=\"复杂度总结\"><a href=\"#复杂度总结\" class=\"headerlink\" title=\"复杂度总结\"></a>复杂度总结</h5><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>含义</th>\n<th>复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set key value</td>\n<td>是指key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>get key</td>\n<td>获取key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>del key</td>\n<td>删除key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>setnx setxx</td>\n<td>根据key是否存在设置key-value</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>Incr decr</td>\n<td>计数</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>mget mset</td>\n<td>批量操作key-value</td>\n<td>O(n)</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"实战\"><a href=\"#实战\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li><p>记录网站每个用户个人主页的访问量？</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">incr userid:pageview</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>缓存视频的基本信息（数据源在MySQL中）伪代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> VideoInfo <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">long</span> id)</span></span>&#123;</span><br><span class=\"line\">    String redisKey = redisPrefix + id;</span><br><span class=\"line\">    VideoInfo videoInfo = redis.get(redisKey);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(videoInfo == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        videoInfo = mysql.get(id);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(videoInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            <span class=\"comment\">//序列化</span></span><br><span class=\"line\">            redis.set(redisKey, serialize(videoInfo));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> videoInfo;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>分布式计数器</p>\n<p>incr id (原子操作)</p>\n</li>\n</ol>\n<h3 id=\"Hash键值结构\"><a href=\"#Hash键值结构\" class=\"headerlink\" title=\"Hash键值结构\"></a>Hash键值结构</h3><table>\n<thead>\n<tr>\n<th>key</th>\n<th>field</th>\n<th>value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>user:1:info</td>\n<td>name<br>age<br>Date</td>\n<td>Ronaldo<br>32<br>239</td>\n</tr>\n</tbody>\n</table>\n<h4 id=\"特点\"><a href=\"#特点\" class=\"headerlink\" title=\"特点\"></a>特点</h4><ol>\n<li><p>是一个<code>value</code>为<code>Map</code>的<code>Map</code></p>\n</li>\n<li><p><code>field</code>不能相同，<code>value</code>可以相同</p>\n</li>\n</ol>\n<h4 id=\"API\"><a href=\"#API\" class=\"headerlink\" title=\"API\"></a>API</h4><p>所有以哈希为结构的命令都是以<code>H</code>开头的。</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取<span class=\"built_in\">hash</span> key对应的field的value O(1)</span></span><br><span class=\"line\">hget key field</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 设置<span class=\"built_in\">hash</span> key对应field的value O(1)</span></span><br><span class=\"line\">hset key field value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 删除<span class=\"built_in\">hash</span> key对应field的value O(1)</span></span><br><span class=\"line\">hdel key field</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 判断<span class=\"built_in\">hash</span> key是否有field O(1)</span></span><br><span class=\"line\">hexists key field</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取<span class=\"built_in\">hash</span> key field的数量 O(1)</span></span><br><span class=\"line\">hlen key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 批量获取<span class=\"built_in\">hash</span> key的一批field对应的值 O(n)</span></span><br><span class=\"line\">hmget key field1 field2... fieldN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 批量设置<span class=\"built_in\">hash</span> key的一批field value O(n)</span></span><br><span class=\"line\">hmset key field1 value1 field2 value2...fieldN valueN</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 返回<span class=\"built_in\">hash</span> key对应所有的field和value O(n)</span></span><br><span class=\"line\">hgetall key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 返回<span class=\"built_in\">hash</span> key对应所有field的value O(n)</span></span><br><span class=\"line\">hvals key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 返回<span class=\"built_in\">hash</span> key对应多有field O(n)</span></span><br><span class=\"line\">hkeys key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 设置<span class=\"built_in\">hash</span> key对应field的value（若field已存在，则失败） O(1)</span></span><br><span class=\"line\">hsetnx key field value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. <span class=\"built_in\">hash</span> key对应的filed的value自增intCounter O(1)</span></span><br><span class=\"line\">hincrby key field intCounter</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. hincrby浮点数版 O(1)</span></span><br><span class=\"line\">hincrbyfloat key field floatCounter</span><br></pre></td></tr></table></figure>\n<h5 id=\"复杂度总结-1\"><a href=\"#复杂度总结-1\" class=\"headerlink\" title=\"复杂度总结\"></a>复杂度总结</h5><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>复杂度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>hget hset hdel</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hexists</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hincrby</td>\n<td>O(1)</td>\n</tr>\n<tr>\n<td>hgetall hvals hkeys</td>\n<td>O(n)</td>\n</tr>\n<tr>\n<td>hmget hmset</td>\n<td>O(n)</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"列表\"><a href=\"#列表\" class=\"headerlink\" title=\"列表\"></a>列表</h3><h4 id=\"特点-1\"><a href=\"#特点-1\" class=\"headerlink\" title=\"特点\"></a>特点</h4><ol>\n<li>有序（根据插入顺序得到遍历顺序）</li>\n<li>可以重复</li>\n<li>左右两边都可以插入和弹出</li>\n</ol>\n<h4 id=\"API-1\"><a href=\"#API-1\" class=\"headerlink\" title=\"API\"></a>API</h4><p>列表的API都以<code>L</code>开头</p>\n<h5 id=\"增\"><a href=\"#增\" class=\"headerlink\" title=\"增\"></a>增</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 从列表右端插入值 O(1)</span></span><br><span class=\"line\">rpush key value1 value2 ... valueN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 从列表左端插入值 O(1)</span></span><br><span class=\"line\">lpush key value1 value2 ... valueN</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 在list指定的值前|后插入newValue O(n)</span></span><br><span class=\"line\">linsert key before|after value newValue</span><br></pre></td></tr></table></figure>\n<h5 id=\"删\"><a href=\"#删\" class=\"headerlink\" title=\"删\"></a>删</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 从列表左侧弹出一个item O(1)</span></span><br><span class=\"line\">lpop key</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 从列表右侧弹出一个item O(1)</span></span><br><span class=\"line\">rpop key</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 根据count值，从列表中删除所有value相等的项 O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （1）count&gt;0，从左到右，删除最多count个value相等的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （2）count&lt;0，从右到左，删除最多Math。abs（count）个value相等的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> （3）count=0，删除所有value相等的项</span></span><br><span class=\"line\">lrem key count value</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 按照索引范围修剪列表 O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> \t 如ltrime listkey 1 4 是指删除除了下标为1-4（包括1和4）其他项</span></span><br><span class=\"line\">ltrim key start end</span><br></pre></td></tr></table></figure>\n<h5 id=\"查\"><a href=\"#查\" class=\"headerlink\" title=\"查\"></a>查</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 获取列表指定索引范围所有item O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  \t 如lrange listKey 0 2获取的是下标0-2（包括0和2）的项</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">  \t 再如lrange listKey 1 -1获取的是下标1-（len-1）的项</span></span><br><span class=\"line\">lrange key start end</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取列表指定索引的item O(n)</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    如lindex listkye -1 取到的是最后一个元素</span></span><br><span class=\"line\">lindex key index</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取列表长度 O(1)</span></span><br><span class=\"line\">llen key</span><br></pre></td></tr></table></figure>\n<h5 id=\"改\"><a href=\"#改\" class=\"headerlink\" title=\"改\"></a>改</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 设置列表指定索引值为newValue O(n)</span></span><br><span class=\"line\">lset key index newValue</span><br></pre></td></tr></table></figure>\n<h5 id=\"其他\"><a href=\"#其他\" class=\"headerlink\" title=\"其他\"></a>其他</h5><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. lpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)</span></span><br><span class=\"line\">blpop key timeout</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. rpop阻塞版本，timeout是阻塞超时时间，timeout=0为永远不阻塞 O(1)</span></span><br><span class=\"line\">brpop key timeout</span><br></pre></td></tr></table></figure>\n<h5 id=\"TIPS\"><a href=\"#TIPS\" class=\"headerlink\" title=\"TIPS\"></a>TIPS</h5><ol>\n<li>LPUSH + LPOP = Stack</li>\n<li>LPUSH + RPOP = Queue</li>\n<li>LPUSH + LTRIM = Capped Collection</li>\n<li>LPUSH + BRPOP = Message Queue</li>\n</ol>\n<h4 id=\"实战-1\"><a href=\"#实战-1\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li>TimeLine</li>\n</ol>\n<h4 id=\"实战-2\"><a href=\"#实战-2\" class=\"headerlink\" title=\"实战\"></a>实战</h4><ol>\n<li><p>记录网站每个用户个人主页的访问量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hincrby user:1:info pageview count</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>缓存视频的基本信息（数据源在mysql中）伪代码</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"function\"><span class=\"keyword\">public</span> VideoInfo <span class=\"title\">get</span><span class=\"params\">(<span class=\"keyword\">long</span> id)</span></span>&#123;</span><br><span class=\"line\">    String redisKey = redisPrefix + id;</span><br><span class=\"line\">    Map&lt;String, String&gt; hashMap = redis.hgetAll(redisKey);</span><br><span class=\"line\">    VideoInfo videoInfo = transferMapToVideo(hashMap);</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(videoInfo == <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        videoInfo = mysql.get(id);</span><br><span class=\"line\">        <span class=\"keyword\">if</span>(videoInfo != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">            redis.hmset(redisKey, transferVideoToMap(videoInfo));</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> videoInfo;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"单线程架构\"><a href=\"#单线程架构\" class=\"headerlink\" title=\"单线程架构\"></a>单线程架构</h2><p>Redis在同一时刻只会执行一条命令</p>\n<h3 id=\"单线程为什么这么快\"><a href=\"#单线程为什么这么快\" class=\"headerlink\" title=\"单线程为什么这么快\"></a>单线程为什么这么快</h3><ol>\n<li><p>纯内存</p>\n</li>\n<li><p>非阻塞IO</p>\n</li>\n<li><p>避免线程切换和竞态消耗</p>\n</li>\n<li><p>拒绝长（慢）命令</p>\n<p>​    keys, flushall, flushdb, slow lua script, mutil/exec, operate big value(collection)</p>\n</li>\n<li><p>其实不是单线程</p>\n<p>fysnc file descriptor</p>\n<p>close file descriptor</p>\n</li>\n</ol>\n<h1 id=\"Redis客户端\"><a href=\"#Redis客户端\" class=\"headerlink\" title=\"Redis客户端\"></a>Redis客户端</h1><h2 id=\"Java客户端：Jedis\"><a href=\"#Java客户端：Jedis\" class=\"headerlink\" title=\"Java客户端：Jedis\"></a>Java客户端：Jedis</h2><h3 id=\"获取Jedis\"><a href=\"#获取Jedis\" class=\"headerlink\" title=\"获取Jedis\"></a>获取Jedis</h3><ol>\n<li>添加<code>Maven</code>依赖</li>\n</ol>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- https://mvnrepository.com/artifact/redis.clients/jedis --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>redis.clients<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jedis<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>2.9.0<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>\n<ol start=\"2\">\n<li><p>Jedis直连（TCP连接）</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> Jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\">jedis.set(<span class=\"string\">\"hello\"</span>,<span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">String value = jedis.get(<span class=\"string\">\"hello\"</span>);</span><br></pre></td></tr></table></figure>\n<p><code>Jedis(String host, int port, int connectionTimeout, int soTimeout)</code></p>\n<ul>\n<li>host : Redis节点所在机器的IP</li>\n<li>port : Redis节点的端口</li>\n<li>connectionTimeout : 客户端连接超时时间（内部使用socket技术）</li>\n<li>soTimeout : 客户端读写超时时间</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"Jedis基本使用\"><a href=\"#Jedis基本使用\" class=\"headerlink\" title=\"Jedis基本使用\"></a>Jedis基本使用</h3><h3 id=\"Jedis连接池使用\"><a href=\"#Jedis连接池使用\" class=\"headerlink\" title=\"Jedis连接池使用\"></a>Jedis连接池使用</h3><h4 id=\"简单使用\"><a href=\"#简单使用\" class=\"headerlink\" title=\"简单使用\"></a>简单使用</h4><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// 初始化Jedis连接池，通常来讲JedisPool是单例的。</span></span><br><span class=\"line\">GenericObjectPoolConfig poolConfig = <span class=\"keyword\">new</span> GenericObjectPoolConfig();</span><br><span class=\"line\">JedisPool jedisPool = <span class=\"keyword\">new</span> JedisPool(poolConfig, <span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">null</span>;</span><br><span class=\"line\"><span class=\"keyword\">try</span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// 1. 从连接池获取jedis对象</span></span><br><span class=\"line\">    jedis = jedisPool.getResource();</span><br><span class=\"line\">    <span class=\"comment\">// 2. 执行操作</span></span><br><span class=\"line\">    jedis.set(<span class=\"string\">\"hello\"</span>, <span class=\"string\">\"world\"</span>);</span><br><span class=\"line\">&#125; <span class=\"keyword\">catch</span> (Exception e)&#123;</span><br><span class=\"line\">    e.printStackTrance();</span><br><span class=\"line\">&#125; <span class=\"keyword\">finally</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span>(jedis != <span class=\"keyword\">null</span>)&#123;</span><br><span class=\"line\">        <span class=\"comment\">// 如果使用JedisPool，close操作不是关闭连接，二十代表归还连接池。</span></span><br><span class=\"line\">        jedis.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>优点</th>\n<th>缺点</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>直连</td>\n<td>- 简单方便<br>- 适用于少量长期连接的场景</td>\n<td>- 存在每次新建/关闭TCP开销<br>- 资源无法控制，存在连接泄露的可能<br>- Jedis对象线程不安全</td>\n</tr>\n<tr>\n<td>连接池</td>\n<td>- Jedis预先生成，降低开销使用<br>- 连接池的形式保护和控制资源的使用</td>\n<td>相对于直连，使用相对麻烦，尤其在资源的管理上需要很多参数来保证，一旦规划不合理也会出现问题。</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"python客户端：redis-py\"><a href=\"#python客户端：redis-py\" class=\"headerlink\" title=\"python客户端：redis-py\"></a>python客户端：redis-py</h2><h3 id=\"源码安装\"><a href=\"#源码安装\" class=\"headerlink\" title=\"源码安装\"></a>源码安装</h3><blockquote>\n<p><a href=\"https://redis.io/clients#python\" target=\"_blank\" rel=\"noopener\">Redis-clients-python</a></p>\n</blockquote>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">wget https://github.com/andymccurdy/redis-py/archive/3.0.0.zip</span><br><span class=\"line\">unzip redis-3.0.0.zip</span><br><span class=\"line\">cd redis-3.0.0</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 安装redis-py</span></span><br><span class=\"line\">sudo python setup.py install</span><br></pre></td></tr></table></figure>\n<h3 id=\"简单使用-1\"><a href=\"#简单使用-1\" class=\"headerlink\" title=\"简单使用\"></a>简单使用</h3><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> redis</span><br><span class=\"line\">client = redis.StrictRedis(host=<span class=\"string\">'127.0.0.1'</span>, port=<span class=\"number\">6379</span>)</span><br><span class=\"line\">key = <span class=\"string\">\"hello\"</span></span><br><span class=\"line\">setResult = client.set(key, <span class=\"string\">\"python-redis\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">print</span> setResult</span><br><span class=\"line\">value = client.get(key)</span><br><span class=\"line\"><span class=\"keyword\">print</span> <span class=\"string\">\"key:\"</span> + key + <span class=\"string\">\", value:\"</span> + value</span><br></pre></td></tr></table></figure>\n<h2 id=\"Go客户端\"><a href=\"#Go客户端\" class=\"headerlink\" title=\"Go客户端\"></a>Go客户端</h2> <figure class=\"highlight go\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">c,err := redis.Dial(<span class=\"string\">\"tcp\"</span>, <span class=\"string\">\"127.0.0.1:6379\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span>&#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"keyword\">defer</span> c.Close()</span><br><span class=\"line\">v, err := c.Do(<span class=\"string\">\"SET\"</span>, <span class=\"string\">\"hello\"</span>, <span class=\"string\">\"world\"</span>)</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span>&#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br><span class=\"line\">fmt.Println(v)</span><br><span class=\"line\">v, err = redis.String(c.Do(<span class=\"string\">\"GET\"</span>, <span class=\"string\">\"hello\"</span>))</span><br><span class=\"line\"><span class=\"keyword\">if</span> err != <span class=\"literal\">nil</span> &#123;</span><br><span class=\"line\">    fmt.Println(err)</span><br><span class=\"line\">    <span class=\"keyword\">return</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h1 id=\"瑞士军刀Redis\"><a href=\"#瑞士军刀Redis\" class=\"headerlink\" title=\"瑞士军刀Redis\"></a>瑞士军刀Redis</h1><h2 id=\"慢查询\"><a href=\"#慢查询\" class=\"headerlink\" title=\"慢查询\"></a>慢查询</h2><h3 id=\"生命周期\"><a href=\"#生命周期\" class=\"headerlink\" title=\"生命周期\"></a>生命周期</h3><p><img src=\"https://i.loli.net/2018/12/27/5c2419d644e00.png\" alt=\"\"></p>\n<ol>\n<li>慢查询发生在第三阶段</li>\n<li>客户端超时不一定是慢查询导致的，慢查询只是导致客户端超时的一个可能因素</li>\n</ol>\n<h3 id=\"两个配置\"><a href=\"#两个配置\" class=\"headerlink\" title=\"两个配置\"></a>两个配置</h3><h4 id=\"slowlog-max-len\"><a href=\"#slowlog-max-len\" class=\"headerlink\" title=\"slowlog-max-len\"></a>slowlog-max-len</h4><ol>\n<li>先进先出队列</li>\n<li>固定长度</li>\n<li>保存在内存内</li>\n</ol>\n<h4 id=\"slowlog-log-slower-than\"><a href=\"#slowlog-log-slower-than\" class=\"headerlink\" title=\"slowlog-log-slower-than\"></a>slowlog-log-slower-than</h4><ol>\n<li>慢查询阈值（单位：微妙，1毫秒等于1000微秒）</li>\n<li>slowlog-log-slower-than=0，记录所有命令</li>\n<li>slowlog-log-slower-than&lt;0，不记录任何命令</li>\n</ol>\n<h4 id=\"配置方法\"><a href=\"#配置方法\" class=\"headerlink\" title=\"配置方法\"></a>配置方法</h4><ol>\n<li>默认值<ul>\n<li>config get slowlog-max-len = 128</li>\n<li>config get slowlog-log-slower-than = 10000</li>\n</ul>\n</li>\n<li>修改配置文件后重启（适用于未启动时）</li>\n<li>动态配置<ul>\n<li>config set slowlog-max-len 1000</li>\n<li>config set slowlog-log-slower-than 1000</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"三个命令\"><a href=\"#三个命令\" class=\"headerlink\" title=\"三个命令\"></a>三个命令</h3><ol>\n<li>slowlog get [n] ：获取慢查询队列</li>\n<li>slowlog len ：获取慢查询队列长度</li>\n<li>slowlog reset ：清空慢查询队列</li>\n</ol>\n<h3 id=\"运维经验\"><a href=\"#运维经验\" class=\"headerlink\" title=\"运维经验\"></a>运维经验</h3><ol>\n<li>slowlog-max-len不要是指过大，默认10ms，通常是指1ms</li>\n<li>slowlog-log-slower-than不要设置太小，通常设置1000左右</li>\n<li>理解命令生命周期</li>\n<li>定期持久化慢查询</li>\n</ol>\n<h2 id=\"pipeline\"><a href=\"#pipeline\" class=\"headerlink\" title=\"pipeline\"></a>pipeline</h2><h3 id=\"什么是流水线\"><a href=\"#什么是流水线\" class=\"headerlink\" title=\"什么是流水线\"></a>什么是流水线</h3><p>流水线就是一次网络连接里传输一批命令，节省网络传输时间</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>N个命令操作</th>\n<th>1次pipeline</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>时间</td>\n<td>n次网络 + n次命令</td>\n<td>1次网络 + n次命令</td>\n</tr>\n<tr>\n<td>数据量</td>\n<td>1条命令</td>\n<td>n条命令</td>\n</tr>\n</tbody>\n</table>\n<p>注意：</p>\n<ol>\n<li>Redis的命令时间是微秒级别。</li>\n<li>pipeline每次条数要控制（网络）。</li>\n</ol>\n<h3 id=\"客户端实现-pipeline-Jedis\"><a href=\"#客户端实现-pipeline-Jedis\" class=\"headerlink\" title=\"客户端实现 pipeline-Jedis\"></a>客户端实现 pipeline-Jedis</h3><figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// before pipeline</span></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">10000</span>; i++)&#123;</span><br><span class=\"line\">    jedis.hset(<span class=\"string\">\"hashkey:\"</span> + i, <span class=\"string\">\"field\"</span> + i, <span class=\"string\">\"value\"</span> + i);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// after pipeline</span></span><br><span class=\"line\">Jedis jedis = <span class=\"keyword\">new</span> jedis(<span class=\"string\">\"127.0.0.1\"</span>, <span class=\"number\">6379</span>);</span><br><span class=\"line\"><span class=\"keyword\">for</span> (<span class=\"keyword\">int</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"number\">100</span>; i++)&#123;</span><br><span class=\"line\">    Pipeline pipeline = jedis.pipelined();</span><br><span class=\"line\">    <span class=\"keyword\">for</span>(<span class=\"keyword\">int</span> j = i*<span class=\"number\">100</span>; j &lt; (i+<span class=\"number\">1</span>)*<span class=\"number\">100</span>; j++)&#123;</span><br><span class=\"line\">        pipeline.hset(<span class=\"string\">\"hashkey:\"</span> + j, <span class=\"string\">\"field\"</span> + j, <span class=\"string\">\"value\"</span> + j);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    pipeline.syncAndReturnAll();</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<h3 id=\"与原生M操作做对比\"><a href=\"#与原生M操作做对比\" class=\"headerlink\" title=\"与原生M操作做对比\"></a>与原生M操作做对比</h3><p>M操作是原子操作，pipeline是非原子操作。</p>\n<h3 id=\"使用建议\"><a href=\"#使用建议\" class=\"headerlink\" title=\"使用建议\"></a>使用建议</h3><ol>\n<li>注意每次pipeline携带数据量</li>\n<li>pipeline每次只能作用在一个Redis节点上</li>\n<li>M操作与pipeline区别</li>\n</ol>\n<h2 id=\"发布订阅\"><a href=\"#发布订阅\" class=\"headerlink\" title=\"发布订阅\"></a>发布订阅</h2><h3 id=\"角色\"><a href=\"#角色\" class=\"headerlink\" title=\"角色\"></a>角色</h3><ul>\n<li>发布者（publisher）</li>\n<li>订阅者（subscriber）</li>\n<li>频道（channel）</li>\n</ul>\n<h3 id=\"模型\"><a href=\"#模型\" class=\"headerlink\" title=\"模型\"></a>模型</h3><p>Redis server中有各个频道。</p>\n<p>发布者向频道中发布消息</p>\n<p>订阅者收到其所订阅频道的消息，只能收到订阅时刻之后的消息，之前的收不到。</p>\n<p><img src=\"https://upload-images.jianshu.io/upload_images/7432257-f91184b81f782b4f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1000/format/webp\" alt=\"\"></p>\n<p>需要注意的是，redis没有消息堆积的能力。</p>\n<h3 id=\"API-2\"><a href=\"#API-2\" class=\"headerlink\" title=\"API\"></a>API</h3><h4 id=\"publish\"><a href=\"#publish\" class=\"headerlink\" title=\"publish\"></a>publish</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">publish channel message</span><br></pre></td></tr></table></figure>\n<p>eg:</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">redis&gt;</span><span class=\"bash\"> publish sohu:tv <span class=\"string\">\"hello world\"</span></span></span><br><span class=\"line\">(integer) 3 # 订阅者个数</span><br></pre></td></tr></table></figure>\n<h4 id=\"subscribe\"><a href=\"#subscribe\" class=\"headerlink\" title=\"subscribe\"></a>subscribe</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">subscribe [channel] # 一个或多个</span><br></pre></td></tr></table></figure>\n<h4 id=\"unsubscribe\"><a href=\"#unsubscribe\" class=\"headerlink\" title=\"unsubscribe\"></a>unsubscribe</h4><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unsubcribe [channle] # 一个或多个</span><br></pre></td></tr></table></figure>\n<h4 id=\"其他-1\"><a href=\"#其他-1\" class=\"headerlink\" title=\"其他\"></a>其他</h4> <figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 订阅模式</span></span><br><span class=\"line\">psubscribe [pattern]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 推定指定的模式</span></span><br><span class=\"line\">punsubscribe [pattern]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 列出至少有一个订阅者的频道</span></span><br><span class=\"line\">pubsub channels</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 列出给定频道的订阅者数量</span></span><br><span class=\"line\">pubsub numsub [channel]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 列出被订阅模式的数量</span></span><br><span class=\"line\">pubsub numpat</span><br></pre></td></tr></table></figure>\n<h3 id=\"发布订阅与消息队列\"><a href=\"#发布订阅与消息队列\" class=\"headerlink\" title=\"发布订阅与消息队列\"></a>发布订阅与消息队列</h3><p>发布订阅是所有订阅者可以收到所有的消息</p>\n<p>消息队列是订阅者要进行消息抢夺，一条消息只有一个订阅者能够抢到。</p>\n<h2 id=\"Bitmap\"><a href=\"#Bitmap\" class=\"headerlink\" title=\"Bitmap\"></a>Bitmap</h2><h3 id=\"位图\"><a href=\"#位图\" class=\"headerlink\" title=\"位图\"></a>位图</h3><table>\n<thead>\n<tr>\n<th>b</th>\n<th>i</th>\n<th>g</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>01100010</td>\n<td>01101001</td>\n<td>01100111</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"相关命令\"><a href=\"#相关命令\" class=\"headerlink\" title=\"相关命令\"></a>相关命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 给位图指定索引设置值</span></span><br><span class=\"line\">setbit key offset value</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取位图指定索引的值</span></span><br><span class=\"line\">getbit key offset</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取位图指定范围（start到end，单位为字节，如果不指定就是获取全部）位值为1的个数</span></span><br><span class=\"line\">bitcount key [start end]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 做多个Bitmap的and（交集）、or（并集）、not（非）、xor（抑或）操作并将结果保存在destkey中</span></span><br><span class=\"line\">bitop op destkey key [key...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 5. 计算位图指定范围（start到end，单位为字节，如果不指定就是取全部）第一个偏移量对应的值等于targetBit的位置</span></span><br><span class=\"line\">bitpos key targetBit [start][end]</span><br></pre></td></tr></table></figure>\n<h3 id=\"独立用户统计\"><a href=\"#独立用户统计\" class=\"headerlink\" title=\"独立用户统计\"></a>独立用户统计</h3><ol>\n<li>使用set和Bitmap</li>\n<li>总共1亿用户，每日5千万独立访问。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>数据类型</th>\n<th>每个userid只用空间</th>\n<th>需要存储的用户量</th>\n<th>全部内存量</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>32位<br>（假设userid用的是整型，<br>实际很多网站用的是长整型）</td>\n<td>50，000，000</td>\n<td>32位*50，000，000=100MB</td>\n</tr>\n<tr>\n<td>Bitmap</td>\n<td>1位</td>\n<td>100，000，000</td>\n<td>12.5MB</td>\n</tr>\n</tbody>\n</table>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>一天</th>\n<th>一个月</th>\n<th>一年</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set</td>\n<td>200M</td>\n<td>6G</td>\n<td>72G</td>\n</tr>\n<tr>\n<td>Bitmap</td>\n<td>12.5M</td>\n<td>375M</td>\n<td>4.5G</td>\n</tr>\n</tbody>\n</table>\n<p>如果只有10万对立用户：<br>| 数据类型 | 每个userid占用空间 | 需要存储的用户量 | 全部内存量             |<br>| ——– | —————— | —————- | ———————- |<br>| set      | 32位               | 1,000,000        | 32位<em>1,000,000=4MB     |<br>| Bitmap   | 1位                | 100,000,000      | 1位</em>100,000,000=12.5MB |</p>\n<h3 id=\"使用经验\"><a href=\"#使用经验\" class=\"headerlink\" title=\"使用经验\"></a>使用经验</h3><ol>\n<li>type=string，最大512MB</li>\n<li>注意setbit时的偏移量，可能有较大耗时</li>\n<li>位图不是绝对好。</li>\n</ol>\n<h2 id=\"HyperLogLog\"><a href=\"#HyperLogLog\" class=\"headerlink\" title=\"HyperLogLog\"></a>HyperLogLog</h2><h3 id=\"是否是新的数据结构\"><a href=\"#是否是新的数据结构\" class=\"headerlink\" title=\"是否是新的数据结构\"></a>是否是新的数据结构</h3><ol>\n<li>基于 HyperLogLog 算法：极小空间完成独立数量统计。</li>\n<li>本质还是字符串</li>\n</ol>\n<h3 id=\"三个命令-1\"><a href=\"#三个命令-1\" class=\"headerlink\" title=\"三个命令\"></a>三个命令</h3><ol>\n<li><p>向 hyperloglog 添加元素</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfadd key element [element ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>计算 hyperloglog 的独立总数</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfcount key [key ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>合并多个 hyperloglog</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">pfmerge destkey sourcekey [sourcekey ...]</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"内存消耗\"><a href=\"#内存消耗\" class=\"headerlink\" title=\"内存消耗\"></a>内存消耗</h3><h3 id=\"使用经验-1\"><a href=\"#使用经验-1\" class=\"headerlink\" title=\"使用经验\"></a>使用经验</h3><ol>\n<li>存在错误率（0.81%）</li>\n<li>无法取出单条数据</li>\n</ol>\n<h2 id=\"GEO\"><a href=\"#GEO\" class=\"headerlink\" title=\"GEO\"></a>GEO</h2><h3 id=\"GEO是什么\"><a href=\"#GEO是什么\" class=\"headerlink\" title=\"GEO是什么\"></a>GEO是什么</h3><p>GEO(地理信息定位)：存储经纬度，计算两地距离，范围计算等。</p>\n<h3 id=\"5个城市经纬度\"><a href=\"#5个城市经纬度\" class=\"headerlink\" title=\"5个城市经纬度\"></a>5个城市经纬度</h3><table>\n<thead>\n<tr>\n<th>城市</th>\n<th>经度</th>\n<th>纬度</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>北京</td>\n<td>116.28</td>\n<td>39.55</td>\n</tr>\n<tr>\n<td>天津</td>\n<td>117.12</td>\n<td>39.08</td>\n</tr>\n<tr>\n<td>石家庄</td>\n<td>114.29</td>\n<td>38.02</td>\n</tr>\n<tr>\n<td>唐山</td>\n<td>118.01</td>\n<td>39.38</td>\n</tr>\n<tr>\n<td>保定</td>\n<td>115.29</td>\n<td>38.51</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"相关命令-1\"><a href=\"#相关命令-1\" class=\"headerlink\" title=\"相关命令\"></a>相关命令</h3><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 1. 添加地理位置信息</span></span><br><span class=\"line\">geo key longitude latitude member [longitude latitude member ...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 2. 获取地理位置信息</span></span><br><span class=\"line\">geopos key member [member ...]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 3. 获取两个地理位置的距离</span></span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\">    unit: m(米)、km(千米)、mi(英里)、ft(尺)</span></span><br><span class=\"line\">geodist key member1 member2 [unit]</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 4. 获取指定位置范围内的地理位置信息集合</span></span><br><span class=\"line\">georadius</span><br></pre></td></tr></table></figure>\n<h3 id=\"相关说明\"><a href=\"#相关说明\" class=\"headerlink\" title=\"相关说明\"></a>相关说明</h3><ol>\n<li>since 3.2+</li>\n<li>type geoKey = zset</li>\n<li>没有删除 API：zrem key member</li>\n</ol>\n<h2 id=\"持久化-1\"><a href=\"#持久化-1\" class=\"headerlink\" title=\"持久化\"></a>持久化</h2><h2 id=\"持久化的作用\"><a href=\"#持久化的作用\" class=\"headerlink\" title=\"持久化的作用\"></a>持久化的作用</h2><p>（1）什么是持久化</p>\n<p>redis 所有数据保存在内存中，对数据的更新将异步的保存到磁盘上。</p>\n<p>（2）持久化的实现方式</p>\n<ol>\n<li>快照<ul>\n<li>MySQL Dump</li>\n<li>Redis RDB</li>\n</ul>\n</li>\n<li>写日志<ul>\n<li>MySQL Binlog</li>\n<li>Hbase Hlog</li>\n<li>Redis AOF</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"RDB\"><a href=\"#RDB\" class=\"headerlink\" title=\"RDB\"></a>RDB</h2><p>（1）什么是RDB</p>\n<p>​    redis 通过命令创建 RDB 文件（二进制）保存在硬盘中。当 redis 重启时通过命令将 RDB 文件载入到内存。实质是一个复制媒介。</p>\n<p>（2）触发机制-主要三种方式</p>\n<ol>\n<li><p>save（同步）</p>\n<ul>\n<li>新文件将会替换老文件</li>\n<li>复杂度位 O(n)</li>\n</ul>\n</li>\n<li><p>bgsave（异步）</p>\n<ul>\n<li><p>利用 Linux fork() 异步执行</p>\n</li>\n<li><p>文件策略及复杂度与 save 相同</p>\n<p>| 命令   | save             | bgsave              |<br>| —— | —————- | ——————- |<br>| IO类型 | 同步             | 异步                |<br>| 阻塞   | 是               | 是（阻塞发生在fork) |<br>| 复杂度 | O(n)             | O(n)                |<br>| 优点   | 不会消耗额外内存 | 不阻塞客户端命令    |<br>| 缺点   | 阻塞客户端命令   | 需要fork，消耗内存  |</p>\n</li>\n</ul>\n</li>\n<li><p>自动</p>\n<p>redis 提供了 save 配置</p>\n<p>| 配置 | seconds | changes |<br>| —- | ——- | ——- |<br>| save | 900     | 1       |<br>| save | 300     | 10      |<br>| save | 60      | 10000   |</p>\n<p>满足任意一个条件，redis 会自动创建（bgsave）RDB 文件</p>\n<p>默认配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">save 900 1</span><br><span class=\"line\">save 300 10</span><br><span class=\"line\">save 60 10000</span><br><span class=\"line\">dbfiename dump.rdb</span><br><span class=\"line\">dir ./</span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">rdbcheksum yes</span><br></pre></td></tr></table></figure>\n<p>最佳配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">dbfilename dump-$&#123;port&#125;.rdb</span><br><span class=\"line\">dir /bigdiskpath</span><br><span class=\"line\">stop-writes-on-bgsave-error yes</span><br><span class=\"line\">rdbcompression yes</span><br><span class=\"line\">rdbcheksum yes</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>（3）触发机制-不容忽视方式</p>\n<pre><code>1. 全量复制\n2. debug reload\n3. shutdown \n</code></pre><p>（4）总结</p>\n<pre><code>1. RDB是 Redis 内存到硬盘的快照，用于持久化。\n2. save 通常会阻塞 Redis\n3. bgsave 不会阻塞 Redis，但是会 fork 新进程。\n4. save 自动配置满足任意一个条件就会被执行。\n</code></pre><h2 id=\"AOF\"><a href=\"#AOF\" class=\"headerlink\" title=\"AOF\"></a>AOF</h2><h3 id=\"RDB-现存问题\"><a href=\"#RDB-现存问题\" class=\"headerlink\" title=\"RDB 现存问题\"></a>RDB 现存问题</h3><ul>\n<li><p>耗时，耗性能</p>\n<ul>\n<li><p>O(n): 耗时</p>\n</li>\n<li><p>fork(): 消耗内存，copy-on-write 策略</p>\n</li>\n<li>Disk I/O: IO 性能</li>\n</ul>\n</li>\n<li><p>不可控，丢失数据</p>\n</li>\n</ul>\n<h3 id=\"什么是-AOF\"><a href=\"#什么是-AOF\" class=\"headerlink\" title=\"什么是 AOF\"></a>什么是 AOF</h3><p>每执行一条命令，就将该命令写入到 AOF 日志文件中。</p>\n<h3 id=\"AOF-三种策略\"><a href=\"#AOF-三种策略\" class=\"headerlink\" title=\"AOF 三种策略\"></a>AOF 三种策略</h3><p>（1）always</p>\n<p>​    每条写命令都会出发刷新，将缓冲区的命令日志刷新到 AOF 文件中。</p>\n<p>（2）everysec</p>\n<p>​    每秒（默认值）刷新一次</p>\n<p>（3）no</p>\n<p>​    由操作系统决定什么时候刷新。</p>\n<table>\n<thead>\n<tr>\n<th>命令</th>\n<th>always</th>\n<th>everysec</th>\n<th>no</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>优点</td>\n<td>不丢失数据</td>\n<td>每秒一次 fsync <br>丢失一秒数据</td>\n<td>不用管</td>\n</tr>\n<tr>\n<td>缺点</td>\n<td>IO 开销较大，一般的 sata 盘只有几百 TPS</td>\n<td>丢失1秒数据</td>\n<td>不可控</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"AOF-重写\"><a href=\"#AOF-重写\" class=\"headerlink\" title=\"AOF 重写\"></a>AOF 重写</h3><table>\n<thead>\n<tr>\n<th>原生 AOF</th>\n<th>AOF 重写</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>set hello world<br>set hello java<br>set hello hehe<br>incr counter<br>incr counter<br>rpush mylist a<br>rpush mylist b<br>rpush mylist c<br>过期数据</td>\n<td>set hello hehe<br>set counter 2<br>rpush mylist a b c</td>\n</tr>\n</tbody>\n</table>\n<p>AOF 重写的作用：</p>\n<ol>\n<li>减少磁盘占用量</li>\n<li>加速恢复速度</li>\n</ol>\n<p>AOF 重写的两种实现方式</p>\n<ol>\n<li><p>berewriteaof</p>\n</li>\n<li><p>AOF 重写配置</p>\n<p>| 配置名                      | 含义                   |<br>| ————————— | ———————- |<br>| autoaof-rewrite-min-size    | AOF 文件重写需要的尺寸 |<br>| auto-aof-rewrite-percentage | AOF 文件增长率         |</p>\n<p>| 统计名           | 含义                                   |<br>| —————- | ————————————– |<br>| aof_current_size | AOF 当前尺寸（单位：字节）             |<br>| aof_base_size    | AOF 上次启动和重写的尺寸（单位：字节） |</p>\n<p>自动触发时机：</p>\n<ul>\n<li>aof_current_size &gt; auto-aof-rewrite-min-size</li>\n<li>aof_current_size - aof_base_size / aof_base_size &gt; auto-aof-rewrite-percentage</li>\n</ul>\n<p>AOF 重写流程</p>\n<p><img src=\"data:image/jpeg;base64,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\" alt=\"\"></p>\n<p>常用配置：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">appendonly yes</span><br><span class=\"line\">appendfilename \"appendonly-$&#123;port&#125;.aof\"</span><br><span class=\"line\">appendfsync everysec</span><br><span class=\"line\">dir /bigdiskpath</span><br><span class=\"line\">no-appendfsync-on-rewrite yes</span><br><span class=\"line\">auto-aof-rewrite-percentage 100</span><br><span class=\"line\">auto-aof-rewrite-min-size 64mb</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h2 id=\"RDB-和-AOF-的抉择\"><a href=\"#RDB-和-AOF-的抉择\" class=\"headerlink\" title=\"RDB 和 AOF 的抉择\"></a>RDB 和 AOF 的抉择</h2><h3 id=\"RDB-和-AOF-比较\"><a href=\"#RDB-和-AOF-比较\" class=\"headerlink\" title=\"RDB 和 AOF 比较\"></a>RDB 和 AOF 比较</h3><table>\n<thead>\n<tr>\n<th>命令</th>\n<th>RDB</th>\n<th>AOF</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>启动优先级</td>\n<td>低</td>\n<td>高</td>\n</tr>\n<tr>\n<td>体积</td>\n<td>小</td>\n<td>大</td>\n</tr>\n<tr>\n<td>恢复速度</td>\n<td>快</td>\n<td>慢</td>\n</tr>\n<tr>\n<td>数据安全性</td>\n<td>丢数据</td>\n<td>根据策略决定</td>\n</tr>\n<tr>\n<td>轻重</td>\n<td>重</td>\n<td>轻</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"RDB-最佳策略\"><a href=\"#RDB-最佳策略\" class=\"headerlink\" title=\"RDB 最佳策略\"></a>RDB 最佳策略</h3><ol>\n<li>“关”</li>\n<li>集中管理</li>\n<li>主从，从开</li>\n</ol>\n<h3 id=\"AOF-最佳策略\"><a href=\"#AOF-最佳策略\" class=\"headerlink\" title=\"AOF 最佳策略\"></a>AOF 最佳策略</h3><ol>\n<li>”开“：缓存和存储</li>\n<li>AOF 重写集中管理</li>\n<li>everysec</li>\n</ol>\n<h3 id=\"最佳策略\"><a href=\"#最佳策略\" class=\"headerlink\" title=\"最佳策略\"></a>最佳策略</h3><ol>\n<li>小分片</li>\n<li>缓存或者存储</li>\n<li>监控（硬盘、内存、负载、网络）</li>\n<li>足够的内存</li>\n</ol>\n<h2 id=\"开发运维常见问题\"><a href=\"#开发运维常见问题\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h2><h3 id=\"fork-操作\"><a href=\"#fork-操作\" class=\"headerlink\" title=\"fork 操作\"></a>fork 操作</h3><ol>\n<li>同步操作</li>\n<li>与内存量息息相关：内存越大，耗时越长（与机器类型有关）</li>\n<li>info: latest_fork_usec 查询上一次 fork 的时间</li>\n</ol>\n<p>如何改善fork</p>\n<ol>\n<li>优先使用物理机或者高效支持 fork 操作的虚拟化技术</li>\n<li>控制 Redis 实例最大可用内存：maxmemory</li>\n<li>合理配置 Linux 内存分配策略：vm.overcommit_memory = 1</li>\n<li>降低 fork 频率：例如放宽 AOF 重写自动触发时机，不必要的全量复制</li>\n</ol>\n<h3 id=\"进程外开销\"><a href=\"#进程外开销\" class=\"headerlink\" title=\"进程外开销\"></a>进程外开销</h3><p>子进程开销和优化</p>\n<ol>\n<li>CPU：<ul>\n<li>开销：RDB 和 AOF 文件生成，属于 CPU 密集型</li>\n<li>优化：不做 CPU 绑定，不和 CPU 密集型部署</li>\n</ul>\n</li>\n<li>内存：<ul>\n<li>开销：fork 内存开销，copy-on-write。</li>\n<li>优化：echo never &gt; /sys/kernel/mm/transparent_hugepage/enabled</li>\n</ul>\n</li>\n<li>硬盘<ul>\n<li>开销：AOF 和 RDB 文件写入，可以结合 iostat，iotop 分析</li>\n<li>优化：<ul>\n<li>不要和高硬盘负责服务部署在一起：存储服务、消息队列等</li>\n<li>no-appendfsync-on-rewrite = yes</li>\n<li>根据写入量决定磁盘类型：例如 ssd</li>\n<li>单机多实例持久化文件目录可以考虑分盘</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"AOF追加阻塞\"><a href=\"#AOF追加阻塞\" class=\"headerlink\" title=\"AOF追加阻塞\"></a>AOF追加阻塞</h3><p><img src=\"https://upload-images.jianshu.io/upload_images/12588973-ed80e9c29a4d1ef2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/700\" alt=\"\"></p>\n<p>AOF 阻塞定位</p>\n<p>​    Reids 日志：</p>\n<p>​    Asynchronous AOF fsync is taking too long (disk is busy?).</p>\n<p>​    Writing the AOF buffer without waiting for fsync to complete,this may slow down Redis.</p>\n<p>​    info Persistence:</p>\n<p>​    …</p>\n<p>​    aof_delayed_fsync: 100</p>\n<p>​    …</p>\n<h3 id=\"单机多实例部署\"><a href=\"#单机多实例部署\" class=\"headerlink\" title=\"单机多实例部署\"></a>单机多实例部署</h3><h2 id=\"Redis-复制的原理与优化\"><a href=\"#Redis-复制的原理与优化\" class=\"headerlink\" title=\"Redis 复制的原理与优化\"></a>Redis 复制的原理与优化</h2><h3 id=\"什么是主从复制\"><a href=\"#什么是主从复制\" class=\"headerlink\" title=\"什么是主从复制\"></a>什么是主从复制</h3><p>（1）单机有什么问题？</p>\n<p>​    机器故障</p>\n<p>​    容量瓶颈</p>\n<p>​    QPS 瓶颈</p>\n<p>（2）作用</p>\n<p>​    数据副本</p>\n<p>​    扩展读性能</p>\n<h3 id=\"复制的配置\"><a href=\"#复制的配置\" class=\"headerlink\" title=\"复制的配置\"></a>复制的配置</h3><p>两种实现方式</p>\n<ol>\n<li><p>slaveof 命令</p>\n</li>\n<li><p>配置</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">slaveof ip port</span><br><span class=\"line\">slave-read-only yes</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h3 id=\"全量复制和部分复制\"><a href=\"#全量复制和部分复制\" class=\"headerlink\" title=\"全量复制和部分复制\"></a>全量复制和部分复制</h3><p>查看 run_id</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -p 6379 info server | grep run</span><br></pre></td></tr></table></figure>\n<p>查看偏移量</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">redis-cli -p 6379 info replication</span><br></pre></td></tr></table></figure>\n<p>全量复制开销：</p>\n<ol>\n<li>bgsave 时间</li>\n<li>RDB文件网络传输时间</li>\n<li>从节点清空数据时间</li>\n<li>从节点加载 RDB 的时间</li>\n<li>可能的 AOF 重写时间</li>\n</ol>\n<h3 id=\"故障处理\"><a href=\"#故障处理\" class=\"headerlink\" title=\"故障处理\"></a>故障处理</h3><h3 id=\"开发运维常见问题-1\"><a href=\"#开发运维常见问题-1\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h3><ol>\n<li><p>读写分离</p>\n<p>将读流量分摊到从节点</p>\n<p>可能遇到的问题：</p>\n<ul>\n<li>复制数据延迟</li>\n<li>读到过期数据</li>\n<li>从节点故障</li>\n</ul>\n</li>\n<li><p>主从配置不一致</p>\n</li>\n<li><p>规避全量复制</p>\n<ul>\n<li>第一次不可避免</li>\n<li>系欸但运行 ID  不匹配<ul>\n<li>主节点重启</li>\n<li>故障转移</li>\n</ul>\n</li>\n<li>复制积压缓冲区不足<ul>\n<li>网络中断，部分复制无法满足</li>\n<li>增大复制缓冲区配置 rel_backlog_size，网络“增强”。</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>规避复制风暴</p>\n<ul>\n<li>单主节点复制风暴<ul>\n<li>问题：主节点重启，多从节点复制</li>\n<li>解决：更换复制拓扑</li>\n</ul>\n</li>\n<li>单机器复制风暴<ul>\n<li>机器宕机后，大量全量复制</li>\n<li>主节点分散多机器</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"Redis-Sentinel\"><a href=\"#Redis-Sentinel\" class=\"headerlink\" title=\"Redis Sentinel\"></a>Redis Sentinel</h2><h3 id=\"主从复制高可用存在的问题\"><a href=\"#主从复制高可用存在的问题\" class=\"headerlink\" title=\"主从复制高可用存在的问题\"></a>主从复制高可用存在的问题</h3><ol>\n<li>手动故障转移</li>\n<li>写能力和存储能力受限</li>\n</ol>\n<h3 id=\"架构说明\"><a href=\"#架构说明\" class=\"headerlink\" title=\"架构说明\"></a>架构说明</h3><p>客户端不直接访问 redis，而是通过 sentinel 来访问。由 sentinel 来负责主从节点的管理。</p>\n<h3 id=\"安装配置\"><a href=\"#安装配置\" class=\"headerlink\" title=\"安装配置\"></a>安装配置</h3><p>sentinel 的默认端口为 26379</p>\n<ol>\n<li>配置开启主从节点</li>\n<li>配置开启 sentinel 监控主节点（sentinel 是特殊的 redis）</li>\n</ol>\n<h3 id=\"客户端连接\"><a href=\"#客户端连接\" class=\"headerlink\" title=\"客户端连接\"></a>客户端连接</h3><p>请求相应流程</p>\n<p>jedis</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">JedisSentinelPool sentinelPool = new JedisSentinelPool(masterName, sentinelSet, poolConfig, timeout);</span><br><span class=\"line\">Jedis jedis = null;</span><br><span class=\"line\">try &#123;</span><br><span class=\"line\">    jedis = redisSentinelPool.getResource();</span><br><span class=\"line\">    // jedis command</span><br><span class=\"line\">&#125; catch (Exception e)&#123;</span><br><span class=\"line\">    logger.error(e.getMessage(), e);</span><br><span class=\"line\">&#125; finally &#123;</span><br><span class=\"line\">    if (jedis != null)&#123;</span><br><span class=\"line\">        jedis.close();</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>redis-py</p>\n<h3 id=\"实现原理\"><a href=\"#实现原理\" class=\"headerlink\" title=\"实现原理\"></a>实现原理</h3><h3 id=\"常见开发运维问题\"><a href=\"#常见开发运维问题\" class=\"headerlink\" title=\"常见开发运维问题\"></a>常见开发运维问题</h3><h2 id=\"Redis-Cluster\"><a href=\"#Redis-Cluster\" class=\"headerlink\" title=\"Redis Cluster\"></a>Redis Cluster</h2><h3 id=\"呼唤集群\"><a href=\"#呼唤集群\" class=\"headerlink\" title=\"呼唤集群\"></a>呼唤集群</h3><ol>\n<li>超高并发量需求</li>\n<li>超大数据量需求</li>\n</ol>\n<h3 id=\"数据分布\"><a href=\"#数据分布\" class=\"headerlink\" title=\"数据分布\"></a>数据分布</h3><p>顺序分布</p>\n<p>哈希分布</p>\n<ul>\n<li>节点取余<ul>\n<li>使用多倍扩容降低迁移率</li>\n</ul>\n</li>\n<li>一致性哈希<ul>\n<li>顺时针取余</li>\n<li>只影响邻近节点</li>\n<li>扩容后会存在负载不均衡的情况</li>\n</ul>\n</li>\n<li>虚拟槽<ul>\n<li>每个槽映射一个数据子集</li>\n<li>良好的哈希函数：例如 CRC16</li>\n<li>服务端管理节点、槽、数据：例如 Redis Cluster</li>\n</ul>\n</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>分布方式</th>\n<th>特点</th>\n<th>典型产品</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>哈希分布</td>\n<td>数据分散度高<br>键值分布业务无关<br>无法顺序访问<br>支持批量操作</td>\n<td>一致性哈希 Memcache<br>Redis Cluster<br></td>\n</tr>\n<tr>\n<td>顺序分布</td>\n<td>数据分散度易倾斜<br>键值业务相关<br>可顺序访问<br>不支持批量操作</td>\n<td>BigTable<br>HBase</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"搭建集群\"><a href=\"#搭建集群\" class=\"headerlink\" title=\"搭建集群\"></a>搭建集群</h3><h3 id=\"集群伸缩\"><a href=\"#集群伸缩\" class=\"headerlink\" title=\"集群伸缩\"></a>集群伸缩</h3><h3 id=\"客户端路由\"><a href=\"#客户端路由\" class=\"headerlink\" title=\"客户端路由\"></a>客户端路由</h3><h3 id=\"集群原理\"><a href=\"#集群原理\" class=\"headerlink\" title=\"集群原理\"></a>集群原理</h3><h3 id=\"开发运维常见问题-2\"><a href=\"#开发运维常见问题-2\" class=\"headerlink\" title=\"开发运维常见问题\"></a>开发运维常见问题</h3><h3 id=\"Redis-Cluster-架构\"><a href=\"#Redis-Cluster-架构\" class=\"headerlink\" title=\"Redis Cluster 架构\"></a>Redis Cluster 架构</h3><ol>\n<li>节点</li>\n<li>meet</li>\n<li>指派槽</li>\n<li>复制</li>\n</ol>\n<h3 id=\"Redis-Cluster-特性\"><a href=\"#Redis-Cluster-特性\" class=\"headerlink\" title=\"Redis Cluster 特性\"></a>Redis Cluster 特性</h3><ol>\n<li>复制</li>\n<li>高可用</li>\n<li>分片</li>\n</ol>\n<h3 id=\"两种安装方式\"><a href=\"#两种安装方式\" class=\"headerlink\" title=\"两种安装方式\"></a>两种安装方式</h3><h4 id=\"原生命令安装\"><a href=\"#原生命令安装\" class=\"headerlink\" title=\"原生命令安装\"></a>原生命令安装</h4><ol>\n<li><p>配置开启节点</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">port $&#123;port&#125;</span><br><span class=\"line\">daemonize yes</span><br><span class=\"line\">dir \"/opt/redis/data\"</span><br><span class=\"line\">dbfilename \"dump-$&#123;port&#125;.rdb\"</span><br><span class=\"line\">logfile \"$&#123;port&#125;.log\"</span><br><span class=\"line\">cluster-enabled yes</span><br><span class=\"line\">cluster-config-file nodes-$&#123;port&#125;.conf</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>meet</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster meet ip port</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>指派槽</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster addslots slot [slot ...]</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>分配主从关系</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cluster replicate node-id</span><br></pre></td></tr></table></figure>\n</li>\n</ol>\n<h4 id=\"官方工具安装\"><a href=\"#官方工具安装\" class=\"headerlink\" title=\"官方工具安装\"></a>官方工具安装</h4><blockquote>\n<p>链接：<a href=\"https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/1Y0_Aq8UOzIDoqluORSuCww</a><br>提取码：5r0v</p>\n</blockquote>\n"}],"PostAsset":[],"PostCategory":[{"post_id":"cjqg23d6g0002wsw2aailckvd","category_id":"cjqg23d8u0005wsw2oaj5b5xo","_id":"cjqg23dbn000dwsw2qh99h2ya"},{"post_id":"cjqg23dae0008wsw2get7gwfj","category_id":"cjqg23dby000ewsw25acq6tx6","_id":"cjqg23ddi000kwsw2wrfmjcn7"},{"post_id":"cjqg23d9r0007wsw29rmq12sh","category_id":"cjqg23db5000awsw2prmceay4","_id":"cjqg23dds000mwsw2qkb6xxrk"},{"post_id":"cjqg23d9r0007wsw29rmq12sh","category_id":"cjqg23dd1000gwsw23ndau09m","_id":"cjqg23ddw000nwsw20518xtg9"},{"post_id":"cjqg23dlq000owsw2thcwki1e","category_id":"cjqg23dlz000pwsw200w2munx","_id":"cjqg23dm9000swsw2l2h9sptj"},{"post_id":"cjqg23erp000xwsw2au5lr0kw","category_id":"cjqg23es0000ywsw2jtzhmard","_id":"cjqg23ese0012wsw2ii5iz0qi"},{"post_id":"cjqg23erp000xwsw2au5lr0kw","category_id":"cjqg23es80011wsw2ublt9b76","_id":"cjqg23esh0013wsw2a7kjazhx"}],"PostTag":[{"post_id":"cjqg23d6g0002wsw2aailckvd","tag_id":"cjqg23d9n0006wsw23r37bpb0","_id":"cjqg23dbj000cwsw2yxg31wmr"},{"post_id":"cjqg23d9r0007wsw29rmq12sh","tag_id":"cjqg23db9000bwsw2r7222n4m","_id":"cjqg23ddc000iwsw2sibi6l54"},{"post_id":"cjqg23d9r0007wsw29rmq12sh","tag_id":"cjqg23dc0000fwsw2rsjwfncq","_id":"cjqg23ddg000jwsw2ar7u6ejd"},{"post_id":"cjqg23dae0008wsw2get7gwfj","tag_id":"cjqg23dd4000hwsw2wtkcu0jg","_id":"cjqg23ddn000lwsw2fbtsnayf"},{"post_id":"cjqg23dlq000owsw2thcwki1e","tag_id":"cjqg23dm1000qwsw2r0n4z1fq","_id":"cjqg23dmi000uwsw2sksgr103"},{"post_id":"cjqg23dlq000owsw2thcwki1e","tag_id":"cjqg23dm6000rwsw2yiyeb5ms","_id":"cjqg23dmk000vwsw2oq6tiekr"},{"post_id":"cjqg23dlq000owsw2thcwki1e","tag_id":"cjqg23dmc000twsw2p9l2pffr","_id":"cjqg23dml000wwsw2t04yexkd"},{"post_id":"cjqg23erp000xwsw2au5lr0kw","tag_id":"cjqg23es3000zwsw2isezjy7u","_id":"cjqg23es70010wsw27psy1y18"}],"Tag":[{"name":"Git","_id":"cjqg23d9n0006wsw23r37bpb0"},{"name":"Software","_id":"cjqg23db9000bwsw2r7222n4m"},{"name":"Tools","_id":"cjqg23dc0000fwsw2rsjwfncq"},{"name":"Windows","_id":"cjqg23dd4000hwsw2wtkcu0jg"},{"name":"GitHub Pages","_id":"cjqg23dm1000qwsw2r0n4z1fq"},{"name":"Hexo","_id":"cjqg23dm6000rwsw2yiyeb5ms"},{"name":"NexT","_id":"cjqg23dmc000twsw2p9l2pffr"},{"name":"Redis","_id":"cjqg23es3000zwsw2isezjy7u"}]}}